var idbKeyval=function(n){"use strict";function t(n){return new Promise((function(t,r){n.oncomplete=n.onsuccess=function(){return t(n.result)},n.onabort=n.onerror=function(){return r(n.error)}}))}function r(n,r){var e,u=(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(n){var t=function(){return indexedDB.databases().finally(n)};e=setInterval(t,100),t()})).finally((function(){return clearInterval(e)})):Promise.resolve()).then((function(){var e=indexedDB.open(n);return e.onupgradeneeded=function(){return e.result.createObjectStore(r)},t(e)}));return function(n,t){return u.then((function(e){return t(e.transaction(r,n).objectStore(r))}))}}var e;function u(){return e||(e=r("keyval-store","keyval")),e}function o(n,r){return n("readonly",(function(n){return n.openCursor().onsuccess=function(){this.result&&(r(this.result),this.result.continue())},t(n.transaction)}))}return n.clear=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u();return n("readwrite",(function(n){return n.clear(),t(n.transaction)}))},n.createStore=r,n.del=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();return r("readwrite",(function(r){return r.delete(n),t(r.transaction)}))},n.entries=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u(),t=[];return o(n,(function(n){return t.push([n.key,n.value])})).then((function(){return t}))},n.get=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();return r("readonly",(function(r){return t(r.get(n))}))},n.getMany=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();return r("readonly",(function(r){return Promise.all(n.map((function(n){return t(r.get(n))})))}))},n.keys=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u(),t=[];return o(n,(function(n){return t.push(n.key)})).then((function(){return t}))},n.promisifyRequest=t,n.set=function(n,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return e("readwrite",(function(e){return e.put(r,n),t(e.transaction)}))},n.setMany=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();return r("readwrite",(function(r){return n.forEach((function(n){return r.put(n[1],n[0])})),t(r.transaction)}))},n.update=function(n,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return e("readwrite",(function(e){return new Promise((function(u,o){e.get(n).onsuccess=function(){try{e.put(r(this.result),n),u(t(e.transaction))}catch(n){o(n)}}}))}))},n.values=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u(),t=[];return o(n,(function(n){return t.push(n.value)})).then((function(){return t}))},n}({});
