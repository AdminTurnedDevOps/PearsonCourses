'use strict';

var fs = require('fs-extra');
var paths = require('./paths.cjs.js');
var cliNode = require('@backstage/cli-node');

function _interopDefaultCompat (e) { return e && typeof e === 'object' && 'default' in e ? e : { default: e }; }

var fs__default = /*#__PURE__*/_interopDefaultCompat(fs);

async function findRoleFromCommand(opts) {
  if (opts.role) {
    return cliNode.PackageRoles.getRoleInfo(opts.role)?.role;
  }
  const pkg = await fs__default.default.readJson(paths.paths.resolveTarget("package.json"));
  const info = cliNode.PackageRoles.getRoleFromPackage(pkg);
  if (!info) {
    throw new Error(`Target package must have 'backstage.role' set`);
  }
  return info;
}

exports.findRoleFromCommand = findRoleFromCommand;
//# sourceMappingURL=role.cjs.js.map
