{"version":3,"file":"OpenApiDefinition.esm.js","sources":["../../../src/components/OpenApiDefinitionWidget/OpenApiDefinition.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useEffect, useState } from 'react';\nimport SwaggerUI, { SwaggerUIProps } from 'swagger-ui-react';\nimport 'swagger-ui-react/swagger-ui.css';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '& .swagger-ui': {\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n\n      ['& .btn-clear']: {\n        color: theme.palette.text.primary,\n      },\n      [`& .scheme-container`]: {\n        backgroundColor: theme.palette.background.default,\n      },\n      [`& .opblock-tag,\n          .opblock-tag small,\n          table thead tr td,\n          table thead tr th,\n          table tbody tr td,\n          table tbody tr th`]: {\n        fontFamily: theme.typography.fontFamily,\n        color: theme.palette.text.primary,\n        borderColor: theme.palette.divider,\n      },\n      [`& section.models,\n          section.models.is-open h4`]: {\n        borderColor: theme.palette.divider,\n      },\n      [`& .model-title,\n          .model .renderedMarkdown,\n          .model .description`]: {\n        fontFamily: theme.typography.fontFamily,\n        fontWeight: theme.typography.fontWeightRegular,\n      },\n      [`& h1, h2, h3, h4, h5, h6,\n          .errors h4, .error h4, .opblock h4, section.models h4,\n          .response-control-media-type__accept-message,\n          .opblock-summary-description,\n          .opblock-summary-operation-id,\n          .opblock-summary-path,\n          .opblock-summary-path__deprecated,\n          .opblock-description-wrapper,\n          .opblock-external-docs-wrapper,\n          .opblock-section-header .btn,\n          .opblock-section-header>label,\n          .scheme-container .schemes>label,a.nostyle,\n          .parameter__name,\n          .response-col_status,\n          .response-col_links,\n          .error .btn,\n          .info .title,\n          .info .base-url`]: {\n        fontFamily: theme.typography.fontFamily,\n        color: theme.palette.text.primary,\n      },\n      [`& .opblock .opblock-section-header,\n          .model-box,\n          section.models .model-container`]: {\n        background: theme.palette.background.default,\n      },\n      [`& .prop-format,\n          .parameter__in`]: {\n        color: theme.palette.text.disabled,\n      },\n      [`& table.model,\n          .parameter__type,\n          .model.model-title,\n          .model-title,\n          .model span,\n          .model .brace-open,\n          .model .brace-close,\n          .model .property.primitive,\n          .model .renderedMarkdown,\n          .model .description,\n          .errors small`]: {\n        color: theme.palette.text.secondary,\n      },\n      [`& .parameter__name.required:after,\n        .parameter__name.required span`]: {\n        color: theme.palette.warning.dark,\n      },\n      [`& table.model,\n          table.model .model,\n          .opblock-external-docs-wrapper`]: {\n        fontSize: theme.typography.fontSize,\n      },\n      [`& table.headers td`]: {\n        color: theme.palette.text.primary,\n        fontWeight: theme.typography.fontWeightRegular,\n      },\n      [`& .model-hint`]: {\n        color: theme.palette.text.secondary,\n        backgroundColor: theme.palette.background.paper,\n      },\n      [`& .opblock-summary-method,\n          .info a`]: {\n        fontFamily: theme.typography.fontFamily,\n      },\n      [`& .info, .opblock, .tab`]: {\n        [`& li, p`]: {\n          fontFamily: theme.typography.fontFamily,\n          color: theme.palette.text.primary,\n        },\n      },\n      [`& a`]: {\n        color: theme.palette.primary.main,\n      },\n      [`& .renderedMarkdown code`]: {\n        color: theme.palette.secondary.light,\n      },\n      [`& .property-row td:first-child`]: {\n        color: theme.palette.text.primary,\n      },\n      [`& span.prop-type`]: {\n        color: theme.palette.success.light,\n      },\n      [`& .opblock-control-arrow svg, .authorization__btn .unlocked`]: {\n        fill: theme.palette.text.primary,\n      },\n      [`& .json-schema-2020-12__title,\n          .json-schema-2020-12-keyword__name,\n          .json-schema-2020-12-property .json-schema-2020-12__title,\n          .json-schema-2020-12-keyword--description`]: {\n        color: theme.palette.text.primary,\n      },\n      [`.json-schema-2020-12-accordion__icon svg`]: {\n        fill: theme.palette.text.primary,\n      },\n      [`& .json-schema-2020-12-accordion,\n          .json-schema-2020-12-expand-deep-button`]: {\n        background: 'none',\n        appearance: 'none',\n      },\n      [`& .json-schema-2020-12-expand-deep-button,\n          .json-schema-2020-12-keyword__name--secondary,\n          .json-schema-2020-12-keyword__value--secondary,\n          .json-schema-2020-12__attribute--muted,\n          .json-schema-2020-12-keyword__value--const,\n          .json-schema-2020-12-keyword__value--warning`]: {\n        color: theme.palette.text.secondary,\n      },\n      [`& .json-schema-2020-12-body,\n          .json-schema-2020-12-keyword__value--const,\n          .json-schema-2020-12-keyword__value--warning`]: {\n        borderColor: theme.palette.text.secondary,\n      },\n      [`.json-schema-2020-12__constraint--string`]: {\n        backgroundColor: theme.palette.primary.main,\n      },\n      [`& .json-schema-2020-12__attribute--primary`]: {\n        color: theme.palette.primary.main,\n      },\n      [`& .json-schema-2020-12-property--required>.json-schema-2020-12:first-of-type>.json-schema-2020-12-head .json-schema-2020-12__title:after`]:\n        {\n          color: theme.palette.warning.dark,\n        },\n    },\n  },\n}));\n\nexport type OpenApiDefinitionProps = {\n  definition: string;\n} & Omit<SwaggerUIProps, 'spec'>;\n\nexport const OpenApiDefinition = ({\n  definition,\n  ...swaggerUiProps\n}: OpenApiDefinitionProps) => {\n  const classes = useStyles();\n\n  // Due to a bug in the swagger-ui-react component, the component needs\n  // to be created without content first.\n  const [def, setDef] = useState('');\n\n  useEffect(() => {\n    const timer = setTimeout(() => setDef(definition), 0);\n    return () => clearTimeout(timer);\n  }, [definition, setDef]);\n\n  return (\n    <div className={classes.root}>\n      <SwaggerUI\n        spec={def}\n        url=\"\"\n        deepLinking\n        oauth2RedirectUrl={`${window.location.protocol}//${window.location.host}/oauth2-redirect.html`}\n        {...swaggerUiProps}\n      />\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}