{"version":3,"file":"AsyncApiDefinition.esm.js","sources":["../../../src/components/AsyncApiDefinitionWidget/AsyncApiDefinition.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport AsyncApi from '@asyncapi/react-component';\nimport '@asyncapi/react-component/styles/default.css';\nimport { makeStyles, alpha, darken } from '@material-ui/core/styles';\nimport React from 'react';\nimport { useTheme } from '@material-ui/core/styles';\n\n/** @public */\nexport type AsyncApiResolver = {\n  schema: string;\n  order: number;\n  canRead: boolean;\n  read(uri: any): Promise<string>;\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    fontFamily: 'inherit',\n    '& .bg-white': {\n      background: 'none',\n    },\n    '& .text-4xl': {\n      ...theme.typography.h3,\n    },\n    ' & h2': {\n      ...theme.typography.h4,\n    },\n    '& .border': {\n      borderColor: alpha(theme.palette.border, 0.1),\n    },\n    '& .min-w-min': {\n      minWidth: 'fit-content',\n    },\n    '& .examples': {\n      padding: '1rem',\n    },\n    '& .bg-teal-500': {\n      backgroundColor: theme.palette.status.ok,\n    },\n    '& .bg-blue-500': {\n      backgroundColor: theme.palette.info.main,\n    },\n    '& .bg-blue-400': {\n      backgroundColor: theme.palette.info.light,\n    },\n    '& .bg-indigo-400': {\n      backgroundColor: theme.palette.warning.main,\n    },\n    '& .text-teal-50': {\n      color: theme.palette.status.ok,\n    },\n    '& .text-red-600': {\n      color: theme.palette.error.main,\n    },\n    '& .text-orange-600': {\n      color: theme.palette.warning.main,\n    },\n    '& .text-teal-500': {\n      color: theme.palette.status.ok,\n    },\n    '& .text-blue-500': {\n      color: theme.palette.info.main,\n    },\n    '& .-rotate-90': {\n      '--tw-rotate': '0deg',\n    },\n    '& button': {\n      ...theme.typography.button,\n      borderRadius: theme.shape.borderRadius,\n      color: theme.palette.primary.main,\n      // override whatever may be in the theme's typography to ensure consistency with asyncapi\n      textTransform: 'inherit',\n    },\n    '& a': {\n      color: theme.palette.link,\n    },\n    '& a.no-underline': {\n      ...theme.typography.button,\n      background: 'none',\n      boxSizing: 'border-box',\n      minWidth: 64,\n      borderRadius: theme.shape.borderRadius,\n      transition: theme.transitions.create(\n        ['background-color', 'box-shadow', 'border'],\n        {\n          duration: theme.transitions.duration.short,\n        },\n      ),\n      padding: '5px 15px',\n      color: theme.palette.primary.main,\n      border: `1px solid ${alpha(theme.palette.primary.main, 0.5)}`,\n      '&:hover': {\n        textDecoration: 'none',\n        border: `1px solid ${theme.palette.primary.main}`,\n        backgroundColor: alpha(\n          theme.palette.primary.main,\n          theme.palette.action.hoverOpacity,\n        ),\n      },\n    },\n    '& li.no-underline': {\n      '& a': {\n        textDecoration: 'none',\n        color: theme.palette.getContrastText(theme.palette.primary.main),\n      },\n    },\n  },\n  dark: {\n    '& svg': {\n      fill: theme.palette.text.primary,\n    },\n    '& .prose': {\n      color: theme.palette.text.secondary,\n      '& h3': {\n        color: theme.palette.text.primary,\n      },\n    },\n    '& .bg-gray-100, .bg-gray-200': {\n      backgroundColor: theme.palette.background.default,\n    },\n    '& .text-gray-600': {\n      color: theme.palette.grey['50'],\n    },\n    '& .text-gray-700': {\n      color: theme.palette.grey['100'],\n    },\n    '& .panel--right': {\n      background: darken(theme.palette.navigation.background, 0.1),\n    },\n    '& .examples': {\n      backgroundColor: darken(theme.palette.navigation.background, 0.1),\n      '& pre': {\n        backgroundColor: darken(theme.palette.background.default, 0.2),\n      },\n    },\n  },\n}));\n\nconst httpsFetchResolver: AsyncApiResolver = {\n  schema: 'https',\n  order: 1,\n  canRead: true,\n  async read(uri: any) {\n    const response = await fetch(uri.toString());\n    return response.text();\n  },\n};\n\nconst httpFetchResolver: AsyncApiResolver = {\n  schema: 'http',\n  order: 1,\n  canRead: true,\n  async read(uri: any) {\n    const response = await fetch(uri.toString());\n    return response.text();\n  },\n};\n\ntype Props = {\n  definition: string;\n  resolvers?: AsyncApiResolver[];\n};\n\nexport const AsyncApiDefinition = ({\n  definition,\n  resolvers,\n}: Props): JSX.Element => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const classNames = `${classes.root} ${\n    theme.palette.type === 'dark' ? classes.dark : ''\n  }`;\n\n  const config = {\n    parserOptions: {\n      __unstable: {\n        resolver: {\n          resolvers: [httpsFetchResolver, httpFetchResolver],\n        },\n      },\n    },\n  };\n\n  // Overwrite default resolvers if custom ones are set\n  if (resolvers) {\n    config.parserOptions.__unstable.resolver.resolvers = resolvers;\n  }\n\n  return (\n    <div className={classNames}>\n      <AsyncApi schema={definition} config={config} />\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AA8BA,MAAM,SAAA,GAAY,WAAW,CAAU,KAAA,MAAA;AAAA,EACrC,IAAM,EAAA;AAAA,IACJ,UAAY,EAAA,SAAA;AAAA,IACZ,aAAe,EAAA;AAAA,MACb,UAAY,EAAA;AAAA,KACd;AAAA,IACA,aAAe,EAAA;AAAA,MACb,GAAG,MAAM,UAAW,CAAA;AAAA,KACtB;AAAA,IACA,OAAS,EAAA;AAAA,MACP,GAAG,MAAM,UAAW,CAAA;AAAA,KACtB;AAAA,IACA,WAAa,EAAA;AAAA,MACX,WAAa,EAAA,KAAA,CAAM,KAAM,CAAA,OAAA,CAAQ,QAAQ,GAAG;AAAA,KAC9C;AAAA,IACA,cAAgB,EAAA;AAAA,MACd,QAAU,EAAA;AAAA,KACZ;AAAA,IACA,aAAe,EAAA;AAAA,MACb,OAAS,EAAA;AAAA,KACX;AAAA,IACA,gBAAkB,EAAA;AAAA,MAChB,eAAA,EAAiB,KAAM,CAAA,OAAA,CAAQ,MAAO,CAAA;AAAA,KACxC;AAAA,IACA,gBAAkB,EAAA;AAAA,MAChB,eAAA,EAAiB,KAAM,CAAA,OAAA,CAAQ,IAAK,CAAA;AAAA,KACtC;AAAA,IACA,gBAAkB,EAAA;AAAA,MAChB,eAAA,EAAiB,KAAM,CAAA,OAAA,CAAQ,IAAK,CAAA;AAAA,KACtC;AAAA,IACA,kBAAoB,EAAA;AAAA,MAClB,eAAA,EAAiB,KAAM,CAAA,OAAA,CAAQ,OAAQ,CAAA;AAAA,KACzC;AAAA,IACA,iBAAmB,EAAA;AAAA,MACjB,KAAA,EAAO,KAAM,CAAA,OAAA,CAAQ,MAAO,CAAA;AAAA,KAC9B;AAAA,IACA,iBAAmB,EAAA;AAAA,MACjB,KAAA,EAAO,KAAM,CAAA,OAAA,CAAQ,KAAM,CAAA;AAAA,KAC7B;AAAA,IACA,oBAAsB,EAAA;AAAA,MACpB,KAAA,EAAO,KAAM,CAAA,OAAA,CAAQ,OAAQ,CAAA;AAAA,KAC/B;AAAA,IACA,kBAAoB,EAAA;AAAA,MAClB,KAAA,EAAO,KAAM,CAAA,OAAA,CAAQ,MAAO,CAAA;AAAA,KAC9B;AAAA,IACA,kBAAoB,EAAA;AAAA,MAClB,KAAA,EAAO,KAAM,CAAA,OAAA,CAAQ,IAAK,CAAA;AAAA,KAC5B;AAAA,IACA,eAAiB,EAAA;AAAA,MACf,aAAe,EAAA;AAAA,KACjB;AAAA,IACA,UAAY,EAAA;AAAA,MACV,GAAG,MAAM,UAAW,CAAA,MAAA;AAAA,MACpB,YAAA,EAAc,MAAM,KAAM,CAAA,YAAA;AAAA,MAC1B,KAAA,EAAO,KAAM,CAAA,OAAA,CAAQ,OAAQ,CAAA,IAAA;AAAA;AAAA,MAE7B,aAAe,EAAA;AAAA,KACjB;AAAA,IACA,KAAO,EAAA;AAAA,MACL,KAAA,EAAO,MAAM,OAAQ,CAAA;AAAA,KACvB;AAAA,IACA,kBAAoB,EAAA;AAAA,MAClB,GAAG,MAAM,UAAW,CAAA,MAAA;AAAA,MACpB,UAAY,EAAA,MAAA;AAAA,MACZ,SAAW,EAAA,YAAA;AAAA,MACX,QAAU,EAAA,EAAA;AAAA,MACV,YAAA,EAAc,MAAM,KAAM,CAAA,YAAA;AAAA,MAC1B,UAAA,EAAY,MAAM,WAAY,CAAA,MAAA;AAAA,QAC5B,CAAC,kBAAoB,EAAA,YAAA,EAAc,QAAQ,CAAA;AAAA,QAC3C;AAAA,UACE,QAAA,EAAU,KAAM,CAAA,WAAA,CAAY,QAAS,CAAA;AAAA;AACvC,OACF;AAAA,MACA,OAAS,EAAA,UAAA;AAAA,MACT,KAAA,EAAO,KAAM,CAAA,OAAA,CAAQ,OAAQ,CAAA,IAAA;AAAA,MAC7B,MAAA,EAAQ,aAAa,KAAM,CAAA,KAAA,CAAM,QAAQ,OAAQ,CAAA,IAAA,EAAM,GAAG,CAAC,CAAA,CAAA;AAAA,MAC3D,SAAW,EAAA;AAAA,QACT,cAAgB,EAAA,MAAA;AAAA,QAChB,MAAQ,EAAA,CAAA,UAAA,EAAa,KAAM,CAAA,OAAA,CAAQ,QAAQ,IAAI,CAAA,CAAA;AAAA,QAC/C,eAAiB,EAAA,KAAA;AAAA,UACf,KAAA,CAAM,QAAQ,OAAQ,CAAA,IAAA;AAAA,UACtB,KAAA,CAAM,QAAQ,MAAO,CAAA;AAAA;AACvB;AACF,KACF;AAAA,IACA,mBAAqB,EAAA;AAAA,MACnB,KAAO,EAAA;AAAA,QACL,cAAgB,EAAA,MAAA;AAAA,QAChB,OAAO,KAAM,CAAA,OAAA,CAAQ,gBAAgB,KAAM,CAAA,OAAA,CAAQ,QAAQ,IAAI;AAAA;AACjE;AACF,GACF;AAAA,EACA,IAAM,EAAA;AAAA,IACJ,OAAS,EAAA;AAAA,MACP,IAAA,EAAM,KAAM,CAAA,OAAA,CAAQ,IAAK,CAAA;AAAA,KAC3B;AAAA,IACA,UAAY,EAAA;AAAA,MACV,KAAA,EAAO,KAAM,CAAA,OAAA,CAAQ,IAAK,CAAA,SAAA;AAAA,MAC1B,MAAQ,EAAA;AAAA,QACN,KAAA,EAAO,KAAM,CAAA,OAAA,CAAQ,IAAK,CAAA;AAAA;AAC5B,KACF;AAAA,IACA,8BAAgC,EAAA;AAAA,MAC9B,eAAA,EAAiB,KAAM,CAAA,OAAA,CAAQ,UAAW,CAAA;AAAA,KAC5C;AAAA,IACA,kBAAoB,EAAA;AAAA,MAClB,KAAO,EAAA,KAAA,CAAM,OAAQ,CAAA,IAAA,CAAK,IAAI;AAAA,KAChC;AAAA,IACA,kBAAoB,EAAA;AAAA,MAClB,KAAO,EAAA,KAAA,CAAM,OAAQ,CAAA,IAAA,CAAK,KAAK;AAAA,KACjC;AAAA,IACA,iBAAmB,EAAA;AAAA,MACjB,YAAY,MAAO,CAAA,KAAA,CAAM,OAAQ,CAAA,UAAA,CAAW,YAAY,GAAG;AAAA,KAC7D;AAAA,IACA,aAAe,EAAA;AAAA,MACb,iBAAiB,MAAO,CAAA,KAAA,CAAM,OAAQ,CAAA,UAAA,CAAW,YAAY,GAAG,CAAA;AAAA,MAChE,OAAS,EAAA;AAAA,QACP,iBAAiB,MAAO,CAAA,KAAA,CAAM,OAAQ,CAAA,UAAA,CAAW,SAAS,GAAG;AAAA;AAC/D;AACF;AAEJ,CAAE,CAAA,CAAA;AAEF,MAAM,kBAAuC,GAAA;AAAA,EAC3C,MAAQ,EAAA,OAAA;AAAA,EACR,KAAO,EAAA,CAAA;AAAA,EACP,OAAS,EAAA,IAAA;AAAA,EACT,MAAM,KAAK,GAAU,EAAA;AACnB,IAAA,MAAM,QAAW,GAAA,MAAM,KAAM,CAAA,GAAA,CAAI,UAAU,CAAA;AAC3C,IAAA,OAAO,SAAS,IAAK,EAAA;AAAA;AAEzB,CAAA;AAEA,MAAM,iBAAsC,GAAA;AAAA,EAC1C,MAAQ,EAAA,MAAA;AAAA,EACR,KAAO,EAAA,CAAA;AAAA,EACP,OAAS,EAAA,IAAA;AAAA,EACT,MAAM,KAAK,GAAU,EAAA;AACnB,IAAA,MAAM,QAAW,GAAA,MAAM,KAAM,CAAA,GAAA,CAAI,UAAU,CAAA;AAC3C,IAAA,OAAO,SAAS,IAAK,EAAA;AAAA;AAEzB,CAAA;AAOO,MAAM,qBAAqB,CAAC;AAAA,EACjC,UAAA;AAAA,EACA;AACF,CAA0B,KAAA;AACxB,EAAA,MAAM,UAAU,SAAU,EAAA;AAC1B,EAAA,MAAM,QAAQ,QAAS,EAAA;AACvB,EAAM,MAAA,UAAA,GAAa,CAAG,EAAA,OAAA,CAAQ,IAAI,CAAA,CAAA,EAChC,KAAM,CAAA,OAAA,CAAQ,IAAS,KAAA,MAAA,GAAS,OAAQ,CAAA,IAAA,GAAO,EACjD,CAAA,CAAA;AAEA,EAAA,MAAM,MAAS,GAAA;AAAA,IACb,aAAe,EAAA;AAAA,MACb,UAAY,EAAA;AAAA,QACV,QAAU,EAAA;AAAA,UACR,SAAA,EAAW,CAAC,kBAAA,EAAoB,iBAAiB;AAAA;AACnD;AACF;AACF,GACF;AAGA,EAAA,IAAI,SAAW,EAAA;AACb,IAAO,MAAA,CAAA,aAAA,CAAc,UAAW,CAAA,QAAA,CAAS,SAAY,GAAA,SAAA;AAAA;AAGvD,EACE,uBAAA,KAAA,CAAA,aAAA,CAAC,SAAI,SAAW,EAAA,UAAA,EAAA,sCACb,QAAS,EAAA,EAAA,MAAA,EAAQ,UAAY,EAAA,MAAA,EAAgB,CAChD,CAAA;AAEJ;;;;"}