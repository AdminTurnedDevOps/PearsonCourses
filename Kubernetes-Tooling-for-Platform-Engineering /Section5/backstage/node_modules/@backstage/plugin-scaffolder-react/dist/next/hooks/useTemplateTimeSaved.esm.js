import { useApi } from '@backstage/core-plugin-api';
import { catalogApiRef } from '@backstage/plugin-catalog-react';
import { Duration } from 'luxon';
import useAsync from 'react-use/lib/useAsync';

const useTemplateTimeSavedMinutes = (templateRef) => {
  const catalogApi = useApi(catalogApiRef);
  const { value: timeSavedMinutes } = useAsync(async () => {
    const entity = await catalogApi.getEntityByRef(templateRef);
    const timeSaved = entity?.metadata.annotations?.["backstage.io/time-saved"];
    if (!entity || !timeSaved) {
      return void 0;
    }
    const durationMs = Duration.fromISO(timeSaved).as("minutes");
    if (Number.isNaN(durationMs)) {
      return void 0;
    }
    return durationMs;
  }, [catalogApi, templateRef]);
  return timeSavedMinutes;
};

export { useTemplateTimeSavedMinutes };
//# sourceMappingURL=useTemplateTimeSaved.esm.js.map
