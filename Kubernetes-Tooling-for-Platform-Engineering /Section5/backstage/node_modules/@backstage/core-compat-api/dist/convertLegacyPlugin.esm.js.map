{"version":3,"file":"convertLegacyPlugin.esm.js","sources":["../src/convertLegacyPlugin.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BackstagePlugin as LegacyBackstagePlugin } from '@backstage/core-plugin-api';\nimport {\n  ApiBlueprint,\n  ExtensionDefinition,\n  FrontendPlugin as NewBackstagePlugin,\n  createFrontendPlugin,\n} from '@backstage/frontend-plugin-api';\nimport { convertLegacyRouteRefs } from './convertLegacyRouteRef';\n\n/** @public */\nexport function convertLegacyPlugin(\n  legacyPlugin: LegacyBackstagePlugin,\n  options: { extensions: ExtensionDefinition[] },\n): NewBackstagePlugin {\n  const apiExtensions = Array.from(legacyPlugin.getApis()).map(factory =>\n    ApiBlueprint.make({ name: factory.api.id, params: { factory } }),\n  );\n  return createFrontendPlugin({\n    id: legacyPlugin.getId(),\n    featureFlags: [...legacyPlugin.getFeatureFlags()],\n    routes: convertLegacyRouteRefs(legacyPlugin.routes ?? {}),\n    externalRoutes: convertLegacyRouteRefs(legacyPlugin.externalRoutes ?? {}),\n    extensions: [...apiExtensions, ...options.extensions],\n  });\n}\n"],"names":[],"mappings":";;;AA0BgB,SAAA,mBAAA,CACd,cACA,OACoB,EAAA;AACpB,EAAA,MAAM,gBAAgB,KAAM,CAAA,IAAA,CAAK,YAAa,CAAA,OAAA,EAAS,CAAE,CAAA,GAAA;AAAA,IAAI,CAC3D,OAAA,KAAA,YAAA,CAAa,IAAK,CAAA,EAAE,IAAM,EAAA,OAAA,CAAQ,GAAI,CAAA,EAAA,EAAI,MAAQ,EAAA,EAAE,OAAQ,EAAA,EAAG;AAAA,GACjE;AACA,EAAA,OAAO,oBAAqB,CAAA;AAAA,IAC1B,EAAA,EAAI,aAAa,KAAM,EAAA;AAAA,IACvB,YAAc,EAAA,CAAC,GAAG,YAAA,CAAa,iBAAiB,CAAA;AAAA,IAChD,MAAQ,EAAA,sBAAA,CAAuB,YAAa,CAAA,MAAA,IAAU,EAAE,CAAA;AAAA,IACxD,cAAgB,EAAA,sBAAA,CAAuB,YAAa,CAAA,cAAA,IAAkB,EAAE,CAAA;AAAA,IACxE,YAAY,CAAC,GAAG,aAAe,EAAA,GAAG,QAAQ,UAAU;AAAA,GACrD,CAAA;AACH;;;;"}