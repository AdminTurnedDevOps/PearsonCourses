'use strict';

var luxon = require('luxon');

const TABLE = "user_info";
class UserInfoDatabaseHandler {
  constructor(client) {
    this.client = client;
  }
  async addUserInfo(userInfo) {
    await this.client(TABLE).insert({
      user_entity_ref: userInfo.claims.sub,
      user_info: JSON.stringify(userInfo),
      exp: luxon.DateTime.fromSeconds(userInfo.claims.exp, {
        zone: "utc"
      }).toSQL({ includeOffset: false })
    }).onConflict("user_entity_ref").merge();
  }
  async getUserInfo(userEntityRef) {
    const info = await this.client(TABLE).where({ user_entity_ref: userEntityRef }).first();
    if (!info) {
      return void 0;
    }
    const userInfo = JSON.parse(info.user_info);
    return userInfo;
  }
}

exports.UserInfoDatabaseHandler = UserInfoDatabaseHandler;
//# sourceMappingURL=UserInfoDatabaseHandler.cjs.js.map
