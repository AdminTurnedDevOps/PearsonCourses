'use strict';

var pluginAuthBackendModuleCloudflareAccessProvider = require('@backstage/plugin-auth-backend-module-cloudflare-access-provider');
var pluginAuthNode = require('@backstage/plugin-auth-node');
var createAuthProviderIntegration = require('../createAuthProviderIntegration.cjs.js');

const cfAccess = createAuthProviderIntegration.createAuthProviderIntegration({
  create(options) {
    return pluginAuthNode.createProxyAuthProviderFactory({
      authenticator: pluginAuthBackendModuleCloudflareAccessProvider.createCloudflareAccessAuthenticator({
        cache: options.cache
      }),
      profileTransform: options?.authHandler,
      signInResolver: options?.signIn?.resolver,
      signInResolverFactories: pluginAuthBackendModuleCloudflareAccessProvider.cloudflareAccessSignInResolvers
    });
  },
  resolvers: pluginAuthBackendModuleCloudflareAccessProvider.cloudflareAccessSignInResolvers
});

exports.cfAccess = cfAccess;
//# sourceMappingURL=provider.cjs.js.map
