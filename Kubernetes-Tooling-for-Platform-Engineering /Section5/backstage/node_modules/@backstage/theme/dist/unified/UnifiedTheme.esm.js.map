{"version":3,"file":"UnifiedTheme.esm.js","sources":["../../src/unified/UnifiedTheme.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Theme as Mui4Theme,\n  ThemeOptions as ThemeOptionsV4,\n  createTheme,\n} from '@material-ui/core/styles';\nimport type { PaletteOptions as PaletteOptionsV4 } from '@material-ui/core/styles/createPalette';\nimport {\n  DeprecatedThemeOptions,\n  Theme as Mui5Theme,\n  PaletteOptions as PaletteOptionsV5,\n  ThemeOptions as ThemeOptionsV5,\n  adaptV4Theme,\n  createTheme as createV5Theme,\n} from '@mui/material/styles';\nimport { createBaseThemeOptions } from '../base/createBaseThemeOptions';\nimport { BackstageTypography, PageTheme } from '../base/types';\nimport { defaultComponentThemes } from '../v5';\nimport { transformV5ComponentThemesToV4 } from './overrides';\nimport { SupportedThemes, SupportedVersions, UnifiedTheme } from './types';\n\nexport class UnifiedThemeHolder implements UnifiedTheme {\n  #themes = new Map<SupportedVersions, SupportedThemes>();\n\n  constructor(v4?: Mui4Theme, v5?: Mui5Theme) {\n    this.#themes = new Map();\n    if (v4) {\n      this.#themes.set('v4', v4);\n    }\n    if (v5) {\n      this.#themes.set('v5', v5);\n    }\n  }\n\n  getTheme(version: SupportedVersions): SupportedThemes | undefined {\n    return this.#themes.get(version);\n  }\n}\n\n/**\n * Options for creating a new {@link UnifiedTheme}.\n *\n * @public\n */\nexport interface UnifiedThemeOptions {\n  palette: PaletteOptionsV4 & PaletteOptionsV5;\n  defaultPageTheme?: string;\n  pageTheme?: Record<string, PageTheme>;\n  fontFamily?: string;\n  htmlFontSize?: number;\n  components?: ThemeOptionsV5['components'];\n  typography?: BackstageTypography;\n}\n\n/**\n * Creates a new {@link UnifiedTheme} using the provided options.\n *\n * @public\n */\nexport function createUnifiedTheme(options: UnifiedThemeOptions): UnifiedTheme {\n  const themeOptions = createBaseThemeOptions(options);\n  const components = { ...defaultComponentThemes, ...options.components };\n  const v5Theme = createV5Theme({ ...themeOptions, components });\n\n  const v4Overrides = transformV5ComponentThemesToV4(v5Theme, components);\n  const v4Theme = { ...createTheme(themeOptions), ...v4Overrides };\n  return new UnifiedThemeHolder(v4Theme, v5Theme);\n}\n\n/**\n * Creates a new {@link UnifiedTheme} using Material UI v4 theme options.\n * Note that this uses `adaptV4Theme` from Material UI v5, which is deprecated.\n *\n * @public\n */\nexport function createUnifiedThemeFromV4(\n  options: ThemeOptionsV4,\n): UnifiedTheme {\n  const v5Theme = adaptV4Theme(options as DeprecatedThemeOptions);\n  const v4Theme = createTheme(options);\n  return new UnifiedThemeHolder(v4Theme, createV5Theme(v5Theme));\n}\n"],"names":["createV5Theme","createTheme"],"mappings":";;;;;;AAoCO,MAAM,kBAA2C,CAAA;AAAA,EACtD,OAAA,uBAAc,GAAwC,EAAA;AAAA,EAEtD,WAAA,CAAY,IAAgB,EAAgB,EAAA;AAC1C,IAAK,IAAA,CAAA,OAAA,uBAAc,GAAI,EAAA;AACvB,IAAA,IAAI,EAAI,EAAA;AACN,MAAK,IAAA,CAAA,OAAA,CAAQ,GAAI,CAAA,IAAA,EAAM,EAAE,CAAA;AAAA;AAE3B,IAAA,IAAI,EAAI,EAAA;AACN,MAAK,IAAA,CAAA,OAAA,CAAQ,GAAI,CAAA,IAAA,EAAM,EAAE,CAAA;AAAA;AAC3B;AACF,EAEA,SAAS,OAAyD,EAAA;AAChE,IAAO,OAAA,IAAA,CAAK,OAAQ,CAAA,GAAA,CAAI,OAAO,CAAA;AAAA;AAEnC;AAsBO,SAAS,mBAAmB,OAA4C,EAAA;AAC7E,EAAM,MAAA,YAAA,GAAe,uBAAuB,OAAO,CAAA;AACnD,EAAA,MAAM,aAAa,EAAE,GAAG,sBAAwB,EAAA,GAAG,QAAQ,UAAW,EAAA;AACtE,EAAA,MAAM,UAAUA,WAAc,CAAA,EAAE,GAAG,YAAA,EAAc,YAAY,CAAA;AAE7D,EAAM,MAAA,WAAA,GAAc,8BAA+B,CAAA,OAAA,EAAS,UAAU,CAAA;AACtE,EAAA,MAAM,UAAU,EAAE,GAAGC,cAAY,YAAY,CAAA,EAAG,GAAG,WAAY,EAAA;AAC/D,EAAO,OAAA,IAAI,kBAAmB,CAAA,OAAA,EAAS,OAAO,CAAA;AAChD;AAQO,SAAS,yBACd,OACc,EAAA;AACd,EAAM,MAAA,OAAA,GAAU,aAAa,OAAiC,CAAA;AAC9D,EAAM,MAAA,OAAA,GAAUA,cAAY,OAAO,CAAA;AACnC,EAAA,OAAO,IAAI,kBAAA,CAAmB,OAAS,EAAAD,WAAA,CAAc,OAAO,CAAC,CAAA;AAC/D;;;;"}