{"version":3,"file":"Router.esm.js","sources":["../src/Router.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Entity } from '@backstage/catalog-model';\nimport {\n  useEntity,\n  MissingAnnotationEmptyState,\n} from '@backstage/plugin-catalog-react';\nimport { Route, Routes } from 'react-router-dom';\nimport { KubernetesContent } from './KubernetesContent';\nimport Button from '@material-ui/core/Button';\n\nconst KUBERNETES_ANNOTATION = 'backstage.io/kubernetes-id';\nconst KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION =\n  'backstage.io/kubernetes-label-selector';\n\nexport const isKubernetesAvailable = (entity: Entity) =>\n  Boolean(entity.metadata.annotations?.[KUBERNETES_ANNOTATION]) ||\n  Boolean(\n    entity.metadata.annotations?.[KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION],\n  );\n\nexport const Router = (props: { refreshIntervalMs?: number }) => {\n  const { entity } = useEntity();\n\n  const kubernetesAnnotationValue =\n    entity.metadata.annotations?.[KUBERNETES_ANNOTATION];\n\n  const kubernetesLabelSelectorQueryAnnotationValue =\n    entity.metadata.annotations?.[KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION];\n\n  if (\n    kubernetesAnnotationValue ||\n    kubernetesLabelSelectorQueryAnnotationValue\n  ) {\n    return (\n      <Routes>\n        <Route\n          path=\"/\"\n          element={\n            <KubernetesContent\n              entity={entity}\n              refreshIntervalMs={props.refreshIntervalMs}\n            />\n          }\n        />\n      </Routes>\n    );\n  }\n\n  return (\n    <>\n      <MissingAnnotationEmptyState annotation={KUBERNETES_ANNOTATION} />\n      <h1>\n        Or use a label selector query, which takes precedence over the previous\n        annotation.\n      </h1>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        href=\"https://backstage.io/docs/features/kubernetes/configuration#surfacing-your-kubernetes-components-as-part-of-an-entity\"\n      >\n        Read Kubernetes Plugin Docs\n      </Button>\n    </>\n  );\n};\n"],"names":[],"mappings":";;;;;;AA0BA,MAAM,qBAAwB,GAAA,4BAAA;AAC9B,MAAM,0CACJ,GAAA,wCAAA;AAEW,MAAA,qBAAA,GAAwB,CAAC,MACpC,KAAA,OAAA,CAAQ,OAAO,QAAS,CAAA,WAAA,GAAc,qBAAqB,CAAC,CAC5D,IAAA,OAAA;AAAA,EACE,MAAA,CAAO,QAAS,CAAA,WAAA,GAAc,0CAA0C;AAC1E;AAEW,MAAA,MAAA,GAAS,CAAC,KAA0C,KAAA;AAC/D,EAAM,MAAA,EAAE,MAAO,EAAA,GAAI,SAAU,EAAA;AAE7B,EAAA,MAAM,yBACJ,GAAA,MAAA,CAAO,QAAS,CAAA,WAAA,GAAc,qBAAqB,CAAA;AAErD,EAAA,MAAM,2CACJ,GAAA,MAAA,CAAO,QAAS,CAAA,WAAA,GAAc,0CAA0C,CAAA;AAE1E,EAAA,IACE,6BACA,2CACA,EAAA;AACA,IAAA,2CACG,MACC,EAAA,IAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,MAAC,KAAA;AAAA,MAAA;AAAA,QACC,IAAK,EAAA,GAAA;AAAA,QACL,OACE,kBAAA,KAAA,CAAA,aAAA;AAAA,UAAC,iBAAA;AAAA,UAAA;AAAA,YACC,MAAA;AAAA,YACA,mBAAmB,KAAM,CAAA;AAAA;AAAA;AAC3B;AAAA,KAGN,CAAA;AAAA;AAIJ,EACE,uBAAA,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,sCACG,2BAA4B,EAAA,EAAA,UAAA,EAAY,uBAAuB,CAChE,kBAAA,KAAA,CAAA,aAAA,CAAC,IAAG,EAAA,IAAA,EAAA,qFAGJ,CACA,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,MAAA;AAAA,IAAA;AAAA,MACC,OAAQ,EAAA,WAAA;AAAA,MACR,KAAM,EAAA,SAAA;AAAA,MACN,IAAK,EAAA;AAAA,KAAA;AAAA,IACN;AAAA,GAGH,CAAA;AAEJ;;;;"}