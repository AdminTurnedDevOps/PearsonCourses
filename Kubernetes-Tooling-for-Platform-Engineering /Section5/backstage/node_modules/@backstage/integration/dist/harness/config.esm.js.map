{"version":3,"file":"config.esm.js","sources":["../../src/harness/config.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Config } from '@backstage/config';\nimport { isValidHost } from '../helpers';\n\n/**\n * The configuration for a single Harness integration.\n *\n * @public\n */\nexport type HarnessIntegrationConfig = {\n  /**\n   * The host of the target that this matches on, e.g. \"app.harness.io\"\n   */\n  host: string;\n  /**\n   * The password or http token to use for authentication.\n   */\n  token?: string;\n  /**\n   * The API key to use for authentication.\n   */\n  apiKey?: string;\n};\n\n/**\n * Parses a location config block for use in HarnessIntegration\n *\n * @public\n */\nexport function readHarnessConfig(config: Config): HarnessIntegrationConfig {\n  const host = config.getString('host');\n  const token = config.getOptionalString('token');\n  const apiKey = config.getOptionalString('apiKey');\n\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Harness Code integration config, '${host}' is not a valid host`,\n    );\n  }\n\n  return {\n    host,\n    apiKey,\n    token,\n  };\n}\n"],"names":[],"mappings":";;AA4CO,SAAS,kBAAkB,MAA0C,EAAA;AAC1E,EAAM,MAAA,IAAA,GAAO,MAAO,CAAA,SAAA,CAAU,MAAM,CAAA;AACpC,EAAM,MAAA,KAAA,GAAQ,MAAO,CAAA,iBAAA,CAAkB,OAAO,CAAA;AAC9C,EAAM,MAAA,MAAA,GAAS,MAAO,CAAA,iBAAA,CAAkB,QAAQ,CAAA;AAEhD,EAAI,IAAA,CAAC,WAAY,CAAA,IAAI,CAAG,EAAA;AACtB,IAAA,MAAM,IAAI,KAAA;AAAA,MACR,6CAA6C,IAAI,CAAA,qBAAA;AAAA,KACnD;AAAA;AAGF,EAAO,OAAA;AAAA,IACL,IAAA;AAAA,IACA,MAAA;AAAA,IACA;AAAA,GACF;AACF;;;;"}