{"version":3,"file":"TechDocsReaderPageSubheader.esm.js","sources":["../../../../src/reader/components/TechDocsReaderPageSubheader/TechDocsReaderPageSubheader.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { MouseEvent, useState, useCallback } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { ToolbarProps } from '@material-ui/core/Toolbar';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Menu from '@material-ui/core/Menu';\nimport Box from '@material-ui/core/Box';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nimport {\n  TechDocsAddonLocations as locations,\n  useTechDocsAddons,\n  useTechDocsReaderPage,\n} from '@backstage/plugin-techdocs-react';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    gridArea: 'pageSubheader',\n    flexDirection: 'column',\n    minHeight: 'auto',\n    padding: theme.spacing(3, 3, 0),\n    '@media print': {\n      display: 'none',\n    },\n  },\n}));\n\n/**\n * Renders the reader page subheader.\n * Please use the Tech Docs add-ons to customize it\n * @public\n */\nexport const TechDocsReaderPageSubheader = (props: {\n  toolbarProps?: ToolbarProps;\n}) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\n  const handleClick = useCallback((event: MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n\n  const {\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n  } = useTechDocsReaderPage();\n\n  const addons = useTechDocsAddons();\n\n  const subheaderAddons = addons.renderComponentsByLocation(\n    locations.Subheader,\n  );\n\n  const settingsAddons = addons.renderComponentsByLocation(locations.Settings);\n\n  if (!subheaderAddons && !settingsAddons) return null;\n\n  // No entity metadata = 404. Don't render subheader on 404.\n  if (entityMetadataLoading === false && !entityMetadata) return null;\n\n  return (\n    <Toolbar classes={classes} {...props.toolbarProps}>\n      <Box\n        display=\"flex\"\n        justifyContent=\"flex-end\"\n        width=\"100%\"\n        flexWrap=\"wrap\"\n      >\n        {subheaderAddons}\n        {settingsAddons ? (\n          <>\n            <Tooltip title=\"Settings\">\n              <IconButton\n                aria-controls=\"tech-docs-reader-page-settings\"\n                aria-haspopup=\"true\"\n                onClick={handleClick}\n              >\n                <SettingsIcon />\n              </IconButton>\n            </Tooltip>\n            <Menu\n              id=\"tech-docs-reader-page-settings\"\n              getContentAnchorEl={null}\n              anchorEl={anchorEl}\n              anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n              open={Boolean(anchorEl)}\n              onClose={handleClose}\n              keepMounted\n            >\n              <div>{settingsAddons}</div>\n            </Menu>\n          </>\n        ) : null}\n      </Box>\n    </Toolbar>\n  );\n};\n"],"names":["locations"],"mappings":";;;;;;;;;;AAiCA,MAAM,SAAA,GAAY,WAAW,CAAU,KAAA,MAAA;AAAA,EACrC,IAAM,EAAA;AAAA,IACJ,QAAU,EAAA,eAAA;AAAA,IACV,aAAe,EAAA,QAAA;AAAA,IACf,SAAW,EAAA,MAAA;AAAA,IACX,OAAS,EAAA,KAAA,CAAM,OAAQ,CAAA,CAAA,EAAG,GAAG,CAAC,CAAA;AAAA,IAC9B,cAAgB,EAAA;AAAA,MACd,OAAS,EAAA;AAAA;AACX;AAEJ,CAAE,CAAA,CAAA;AAOW,MAAA,2BAAA,GAA8B,CAAC,KAEtC,KAAA;AACJ,EAAA,MAAM,UAAU,SAAU,EAAA;AAC1B,EAAA,MAAM,CAAC,QAAA,EAAU,WAAW,CAAA,GAAI,SAA6B,IAAI,CAAA;AAEjE,EAAM,MAAA,WAAA,GAAc,WAAY,CAAA,CAAC,KAAyC,KAAA;AACxE,IAAA,WAAA,CAAY,MAAM,aAAa,CAAA;AAAA,GACjC,EAAG,EAAE,CAAA;AAEL,EAAM,MAAA,WAAA,GAAc,YAAY,MAAM;AACpC,IAAA,WAAA,CAAY,IAAI,CAAA;AAAA,GAClB,EAAG,EAAE,CAAA;AAEL,EAAM,MAAA;AAAA,IACJ,cAAgB,EAAA,EAAE,KAAO,EAAA,cAAA,EAAgB,SAAS,qBAAsB;AAAA,MACtE,qBAAsB,EAAA;AAE1B,EAAA,MAAM,SAAS,iBAAkB,EAAA;AAEjC,EAAA,MAAM,kBAAkB,MAAO,CAAA,0BAAA;AAAA,IAC7BA,sBAAU,CAAA;AAAA,GACZ;AAEA,EAAA,MAAM,cAAiB,GAAA,MAAA,CAAO,0BAA2B,CAAAA,sBAAA,CAAU,QAAQ,CAAA;AAE3E,EAAA,IAAI,CAAC,eAAA,IAAmB,CAAC,cAAA,EAAuB,OAAA,IAAA;AAGhD,EAAA,IAAI,qBAA0B,KAAA,KAAA,IAAS,CAAC,cAAA,EAAuB,OAAA,IAAA;AAE/D,EAAA,uBACG,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,EAAQ,OAAmB,EAAA,GAAG,MAAM,YACnC,EAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,GAAA;AAAA,IAAA;AAAA,MACC,OAAQ,EAAA,MAAA;AAAA,MACR,cAAe,EAAA,UAAA;AAAA,MACf,KAAM,EAAA,MAAA;AAAA,MACN,QAAS,EAAA;AAAA,KAAA;AAAA,IAER,eAAA;AAAA,IACA,cACC,mBAAA,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,kBACG,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,EAAQ,OAAM,UACb,EAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,MAAC,UAAA;AAAA,MAAA;AAAA,QACC,eAAc,EAAA,gCAAA;AAAA,QACd,eAAc,EAAA,MAAA;AAAA,QACd,OAAS,EAAA;AAAA,OAAA;AAAA,0CAER,YAAa,EAAA,IAAA;AAAA,KAElB,CACA,kBAAA,KAAA,CAAA,aAAA;AAAA,MAAC,IAAA;AAAA,MAAA;AAAA,QACC,EAAG,EAAA,gCAAA;AAAA,QACH,kBAAoB,EAAA,IAAA;AAAA,QACpB,QAAA;AAAA,QACA,YAAc,EAAA,EAAE,QAAU,EAAA,QAAA,EAAU,YAAY,OAAQ,EAAA;AAAA,QACxD,IAAA,EAAM,QAAQ,QAAQ,CAAA;AAAA,QACtB,OAAS,EAAA,WAAA;AAAA,QACT,WAAW,EAAA;AAAA,OAAA;AAAA,sBAEX,KAAA,CAAA,aAAA,CAAC,aAAK,cAAe;AAAA,KAEzB,CACE,GAAA;AAAA,GAER,CAAA;AAEJ;;;;"}