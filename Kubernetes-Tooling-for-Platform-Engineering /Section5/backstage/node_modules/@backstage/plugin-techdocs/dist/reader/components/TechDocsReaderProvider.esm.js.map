{"version":3,"file":"TechDocsReaderProvider.esm.js","sources":["../../../src/reader/components/TechDocsReaderProvider.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  ComponentType,\n  createContext,\n  useContext,\n  ReactNode,\n} from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useTechDocsReaderPage } from '@backstage/plugin-techdocs-react';\n\nimport { useReaderState, ReaderState } from './useReaderState';\n\nconst TechDocsReaderContext = createContext<ReaderState>({} as ReaderState);\n\nexport const useTechDocsReader = () => useContext(TechDocsReaderContext);\n\n/**\n * @public Render function for {@link TechDocsReaderProvider}\n */\nexport type TechDocsReaderProviderRenderFunction = (\n  value: ReaderState,\n) => JSX.Element;\n\n/**\n * @public Props for {@link TechDocsReaderProvider}\n */\nexport type TechDocsReaderProviderProps = {\n  children: TechDocsReaderProviderRenderFunction | ReactNode;\n};\n\n/**\n * Provides shared building process state to the reader page components.\n *\n * @public\n */\nexport const TechDocsReaderProvider = (props: TechDocsReaderProviderProps) => {\n  const { children } = props;\n\n  const { '*': path = '' } = useParams();\n  const { entityRef } = useTechDocsReaderPage();\n  const { kind, namespace, name } = entityRef;\n  const value = useReaderState(kind, namespace, name, path);\n\n  return (\n    <TechDocsReaderContext.Provider value={value}>\n      {children instanceof Function ? children(value) : children}\n    </TechDocsReaderContext.Provider>\n  );\n};\n\nexport const withTechDocsReaderProvider =\n  <T extends {}>(Component: ComponentType<T>) =>\n  (props: T) =>\n    (\n      <TechDocsReaderProvider>\n        <Component {...props} />\n      </TechDocsReaderProvider>\n    );\n"],"names":[],"mappings":";;;;;AA2BA,MAAM,qBAAA,GAAwB,aAA2B,CAAA,EAAiB,CAAA;AAE7D,MAAA,iBAAA,GAAoB,MAAM,UAAA,CAAW,qBAAqB;AAqB1D,MAAA,sBAAA,GAAyB,CAAC,KAAuC,KAAA;AAC5E,EAAM,MAAA,EAAE,UAAa,GAAA,KAAA;AAErB,EAAA,MAAM,EAAE,GAAA,EAAK,IAAO,GAAA,EAAA,KAAO,SAAU,EAAA;AACrC,EAAM,MAAA,EAAE,SAAU,EAAA,GAAI,qBAAsB,EAAA;AAC5C,EAAA,MAAM,EAAE,IAAA,EAAM,SAAW,EAAA,IAAA,EAAS,GAAA,SAAA;AAClC,EAAA,MAAM,KAAQ,GAAA,cAAA,CAAe,IAAM,EAAA,SAAA,EAAW,MAAM,IAAI,CAAA;AAExD,EACE,uBAAA,KAAA,CAAA,aAAA,CAAC,qBAAsB,CAAA,QAAA,EAAtB,EAA+B,KAAA,EAAA,EAC7B,oBAAoB,QAAW,GAAA,QAAA,CAAS,KAAK,CAAA,GAAI,QACpD,CAAA;AAEJ;AAEa,MAAA,0BAAA,GACX,CAAe,SAAA,KACf,CAAC,KAAA,qBAEI,KAAA,CAAA,aAAA,CAAA,sBAAA,EAAA,IAAA,kBACE,KAAA,CAAA,aAAA,CAAA,SAAA,EAAA,EAAW,GAAG,KAAA,EAAO,CACxB;;;;"}