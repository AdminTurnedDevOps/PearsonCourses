{"version":3,"file":"TechDocsNotFound.esm.js","sources":["../../../src/reader/components/TechDocsNotFound.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { useApi, configApiRef, useAnalytics } from '@backstage/core-plugin-api';\nimport { ErrorPage } from '@backstage/core-components';\nimport { useTechDocsReaderPage } from '@backstage/plugin-techdocs-react';\nimport { useLocation } from 'react-router-dom';\n\ntype Props = {\n  errorMessage?: string;\n};\n\nexport const TechDocsNotFound = ({ errorMessage }: Props) => {\n  const techdocsBuilder =\n    useApi(configApiRef).getOptionalString('techdocs.builder');\n  const analyticsApi = useAnalytics();\n  const { entityRef } = useTechDocsReaderPage();\n  const location = useLocation();\n\n  useEffect(() => {\n    const { pathname, search, hash } = location;\n    analyticsApi.captureEvent('not-found', `${pathname}${search}${hash}`, {\n      attributes: entityRef,\n    });\n  }, [analyticsApi, entityRef, location]);\n\n  let additionalInfo = '';\n  if (![undefined, 'local'].includes(techdocsBuilder)) {\n    additionalInfo =\n      \"Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not \" +\n      \"generate docs if they are not found. Make sure the project's docs are generated and published by some external \" +\n      \"process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage \" +\n      'instance.';\n  }\n\n  return (\n    <ErrorPage\n      status=\"404\"\n      statusMessage={errorMessage || 'Documentation not found'}\n      additionalInfo={additionalInfo}\n    />\n  );\n};\n"],"names":[],"mappings":";;;;;;AA0BO,MAAM,gBAAmB,GAAA,CAAC,EAAE,YAAA,EAA0B,KAAA;AAC3D,EAAA,MAAM,eACJ,GAAA,MAAA,CAAO,YAAY,CAAA,CAAE,kBAAkB,kBAAkB,CAAA;AAC3D,EAAA,MAAM,eAAe,YAAa,EAAA;AAClC,EAAM,MAAA,EAAE,SAAU,EAAA,GAAI,qBAAsB,EAAA;AAC5C,EAAA,MAAM,WAAW,WAAY,EAAA;AAE7B,EAAA,SAAA,CAAU,MAAM;AACd,IAAA,MAAM,EAAE,QAAA,EAAU,MAAQ,EAAA,IAAA,EAAS,GAAA,QAAA;AACnC,IAAa,YAAA,CAAA,YAAA,CAAa,aAAa,CAAG,EAAA,QAAQ,GAAG,MAAM,CAAA,EAAG,IAAI,CAAI,CAAA,EAAA;AAAA,MACpE,UAAY,EAAA;AAAA,KACb,CAAA;AAAA,GACA,EAAA,CAAC,YAAc,EAAA,SAAA,EAAW,QAAQ,CAAC,CAAA;AAEtC,EAAA,IAAI,cAAiB,GAAA,EAAA;AACrB,EAAA,IAAI,CAAC,CAAC,KAAA,CAAA,EAAW,OAAO,CAAE,CAAA,QAAA,CAAS,eAAe,CAAG,EAAA;AACnD,IACE,cAAA,GAAA,6UAAA;AAAA;AAMJ,EACE,uBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,SAAA;AAAA,IAAA;AAAA,MACC,MAAO,EAAA,KAAA;AAAA,MACP,eAAe,YAAgB,IAAA,yBAAA;AAAA,MAC/B;AAAA;AAAA,GACF;AAEJ;;;;"}