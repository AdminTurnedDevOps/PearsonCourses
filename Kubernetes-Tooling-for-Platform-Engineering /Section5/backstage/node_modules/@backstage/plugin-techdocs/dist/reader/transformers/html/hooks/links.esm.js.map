{"version":3,"file":"links.esm.js","sources":["../../../../../src/reader/transformers/html/hooks/links.ts"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst MKDOCS_CSS = /main\\.[A-Fa-f0-9]{8}\\.min\\.css$/;\nconst GOOGLE_FONTS = /^https:\\/\\/fonts\\.googleapis\\.com/;\nconst GSTATIC_FONTS = /^https:\\/\\/fonts\\.gstatic\\.com/;\n\n/**\n * Checks whether a node is link or not.\n * @param node - can be any element.\n * @returns true when node is link.\n */\nconst isLink = (node: Element) => node.nodeName === 'LINK';\n\n/**\n * Checks whether a link is safe or not.\n * @param node - is an link element.\n * @returns true when link is mkdocs css, google fonts or gstatic fonts.\n */\nconst isSafe = (node: Element) => {\n  const href = node?.getAttribute('href') || '';\n  const isMkdocsCss = href.match(MKDOCS_CSS);\n  const isGoogleFonts = href.match(GOOGLE_FONTS);\n  const isGstaticFonts = href.match(GSTATIC_FONTS);\n  return isMkdocsCss || isGoogleFonts || isGstaticFonts;\n};\n\n/**\n * Function that removes unsafe link nodes.\n * @param node - can be any element.\n * @param hosts - list of allowed hosts.\n */\nexport const removeUnsafeLinks = (node: Element) => {\n  if (isLink(node) && !isSafe(node)) {\n    node.remove();\n  }\n  return node;\n};\n"],"names":[],"mappings":"AAgBA,MAAM,UAAa,GAAA,iCAAA;AACnB,MAAM,YAAe,GAAA,mCAAA;AACrB,MAAM,aAAgB,GAAA,gCAAA;AAOtB,MAAM,MAAS,GAAA,CAAC,IAAkB,KAAA,IAAA,CAAK,QAAa,KAAA,MAAA;AAOpD,MAAM,MAAA,GAAS,CAAC,IAAkB,KAAA;AAChC,EAAA,MAAM,IAAO,GAAA,IAAA,EAAM,YAAa,CAAA,MAAM,CAAK,IAAA,EAAA;AAC3C,EAAM,MAAA,WAAA,GAAc,IAAK,CAAA,KAAA,CAAM,UAAU,CAAA;AACzC,EAAM,MAAA,aAAA,GAAgB,IAAK,CAAA,KAAA,CAAM,YAAY,CAAA;AAC7C,EAAM,MAAA,cAAA,GAAiB,IAAK,CAAA,KAAA,CAAM,aAAa,CAAA;AAC/C,EAAA,OAAO,eAAe,aAAiB,IAAA,cAAA;AACzC,CAAA;AAOa,MAAA,iBAAA,GAAoB,CAAC,IAAkB,KAAA;AAClD,EAAA,IAAI,OAAO,IAAI,CAAA,IAAK,CAAC,MAAA,CAAO,IAAI,CAAG,EAAA;AACjC,IAAA,IAAA,CAAK,MAAO,EAAA;AAAA;AAEd,EAAO,OAAA,IAAA;AACT;;;;"}