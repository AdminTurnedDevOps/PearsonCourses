{"version":3,"file":"TechDocsBuildLogs.esm.js","sources":["../../../src/reader/components/TechDocsBuildLogs.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LogViewer } from '@backstage/core-components';\nimport Button from '@material-ui/core/Button';\nimport Drawer from '@material-ui/core/Drawer';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport Close from '@material-ui/icons/Close';\nimport React, { useState } from 'react';\n\nconst useDrawerStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paper: {\n      width: '100%',\n      [theme.breakpoints.up('sm')]: {\n        width: '75%',\n      },\n      [theme.breakpoints.up('md')]: {\n        width: '50%',\n      },\n      padding: theme.spacing(2.5),\n    },\n    root: {\n      height: '100%',\n      overflow: 'hidden',\n    },\n    logs: {\n      background: theme.palette.background.default,\n    },\n  }),\n);\n\nexport const TechDocsBuildLogsDrawerContent = ({\n  buildLog,\n  onClose,\n}: {\n  buildLog: string[];\n  onClose: () => void;\n}) => {\n  const classes = useDrawerStyles();\n  const logText =\n    buildLog.length === 0 ? 'Waiting for logs...' : buildLog.join('\\n');\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      className={classes.root}\n      spacing={0}\n      wrap=\"nowrap\"\n    >\n      <Grid\n        item\n        container\n        justifyContent=\"space-between\"\n        alignItems=\"center\"\n        spacing={0}\n        wrap=\"nowrap\"\n      >\n        <Typography variant=\"h5\">Build Details</Typography>\n        <IconButton\n          key=\"dismiss\"\n          title=\"Close the drawer\"\n          onClick={onClose}\n          color=\"inherit\"\n        >\n          <Close />\n        </IconButton>\n      </Grid>\n      <Grid item xs>\n        <LogViewer text={logText} classes={{ root: classes.logs }} />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport const TechDocsBuildLogs = ({ buildLog }: { buildLog: string[] }) => {\n  const classes = useDrawerStyles();\n  const [open, setOpen] = useState(false);\n\n  return (\n    <>\n      <Button color=\"inherit\" onClick={() => setOpen(true)}>\n        Show Build Logs\n      </Button>\n      <Drawer\n        classes={{ paper: classes.paper }}\n        anchor=\"right\"\n        open={open}\n        onClose={() => setOpen(false)}\n      >\n        <TechDocsBuildLogsDrawerContent\n          buildLog={buildLog}\n          onClose={() => setOpen(false)}\n        />\n      </Drawer>\n    </>\n  );\n};\n"],"names":[],"mappings":"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"}