{"version":3,"file":"utils.cjs.js","sources":["../../src/schema/utils.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CompletedRequest, CompletedResponse } from 'mockttp';\nimport { ErrorObject } from 'ajv';\n\nexport function mockttpToFetchRequest(request: CompletedRequest) {\n  const headers = new Headers(request.rawHeaders);\n  return {\n    url: request.url,\n    method: request.method,\n    headers,\n    json: () => request.body.getJson(),\n    text: () => request.body.getText(),\n  } as Request;\n}\nexport function mockttpToFetchResponse(response: CompletedResponse) {\n  const headers = new Headers(response.rawHeaders);\n  return {\n    status: response.statusCode,\n    headers,\n    json: () => response.body?.getJson(),\n    text: () => response.body?.getText(),\n  } as Response;\n}\n\nexport function humanifyAjvError(error: ErrorObject) {\n  switch (error.keyword) {\n    case 'required':\n      return `The \"${error.params.missingProperty}\" property is required`;\n    case 'type':\n      return `${\n        error.instancePath ? `\"${error.instancePath}\"` : 'Value'\n      } should be of type ${error.params.type}`;\n    case 'additionalProperties':\n      return `The \"${error.params.additionalProperty}\" property is not allowed`;\n    default:\n      return error.message;\n  }\n}\n"],"names":[],"mappings":";;AAkBO,SAAS,sBAAsB,OAA2B,EAAA;AAC/D,EAAA,MAAM,OAAU,GAAA,IAAI,OAAQ,CAAA,OAAA,CAAQ,UAAU,CAAA;AAC9C,EAAO,OAAA;AAAA,IACL,KAAK,OAAQ,CAAA,GAAA;AAAA,IACb,QAAQ,OAAQ,CAAA,MAAA;AAAA,IAChB,OAAA;AAAA,IACA,IAAM,EAAA,MAAM,OAAQ,CAAA,IAAA,CAAK,OAAQ,EAAA;AAAA,IACjC,IAAM,EAAA,MAAM,OAAQ,CAAA,IAAA,CAAK,OAAQ;AAAA,GACnC;AACF;AACO,SAAS,uBAAuB,QAA6B,EAAA;AAClE,EAAA,MAAM,OAAU,GAAA,IAAI,OAAQ,CAAA,QAAA,CAAS,UAAU,CAAA;AAC/C,EAAO,OAAA;AAAA,IACL,QAAQ,QAAS,CAAA,UAAA;AAAA,IACjB,OAAA;AAAA,IACA,IAAM,EAAA,MAAM,QAAS,CAAA,IAAA,EAAM,OAAQ,EAAA;AAAA,IACnC,IAAM,EAAA,MAAM,QAAS,CAAA,IAAA,EAAM,OAAQ;AAAA,GACrC;AACF;AAEO,SAAS,iBAAiB,KAAoB,EAAA;AACnD,EAAA,QAAQ,MAAM,OAAS;AAAA,IACrB,KAAK,UAAA;AACH,MAAO,OAAA,CAAA,KAAA,EAAQ,KAAM,CAAA,MAAA,CAAO,eAAe,CAAA,sBAAA,CAAA;AAAA,IAC7C,KAAK,MAAA;AACH,MAAO,OAAA,CAAA,EACL,KAAM,CAAA,YAAA,GAAe,CAAI,CAAA,EAAA,KAAA,CAAM,YAAY,CAAA,CAAA,CAAA,GAAM,OACnD,CAAA,mBAAA,EAAsB,KAAM,CAAA,MAAA,CAAO,IAAI,CAAA,CAAA;AAAA,IACzC,KAAK,sBAAA;AACH,MAAO,OAAA,CAAA,KAAA,EAAQ,KAAM,CAAA,MAAA,CAAO,kBAAkB,CAAA,yBAAA,CAAA;AAAA,IAChD;AACE,MAAA,OAAO,KAAM,CAAA,OAAA;AAAA;AAEnB;;;;;;"}