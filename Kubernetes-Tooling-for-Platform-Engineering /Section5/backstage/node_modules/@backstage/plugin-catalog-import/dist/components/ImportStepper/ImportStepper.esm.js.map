{"version":3,"file":"ImportStepper.esm.js","sources":["../../../src/components/ImportStepper/ImportStepper.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { InfoCard, InfoCardVariants } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\nimport Step from '@material-ui/core/Step';\nimport StepContent from '@material-ui/core/StepContent';\nimport Stepper from '@material-ui/core/Stepper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useMemo } from 'react';\nimport { catalogImportApiRef } from '../../api';\nimport { ImportFlows, ImportState, useImportState } from '../useImportState';\nimport {\n  defaultGenerateStepper,\n  defaultStepper,\n  StepConfiguration,\n  StepperProvider,\n} from './defaults';\n\nconst useStyles = makeStyles(() => ({\n  stepperRoot: {\n    padding: 0,\n  },\n}));\n\n/**\n * Props for {@link ImportStepper}.\n *\n * @public\n */\nexport interface ImportStepperProps {\n  initialUrl?: string;\n  generateStepper?: (\n    flow: ImportFlows,\n    defaults: StepperProvider,\n  ) => StepperProvider;\n  variant?: InfoCardVariants;\n}\n\n/**\n * The stepper that holds the different import stages.\n *\n * @public\n */\nexport const ImportStepper = (props: ImportStepperProps) => {\n  const {\n    initialUrl,\n    generateStepper = defaultGenerateStepper,\n    variant,\n  } = props;\n\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const classes = useStyles();\n  const state = useImportState({ initialUrl });\n\n  const states = useMemo<StepperProvider>(\n    () => generateStepper(state.activeFlow, defaultStepper),\n    [generateStepper, state.activeFlow],\n  );\n\n  const render = (step: StepConfiguration) => {\n    return (\n      <Step>\n        {step.stepLabel}\n        <StepContent>{step.content}</StepContent>\n      </Step>\n    );\n  };\n\n  return (\n    <InfoCard variant={variant}>\n      <Stepper\n        classes={{ root: classes.stepperRoot }}\n        activeStep={state.activeStepNumber}\n        orientation=\"vertical\"\n      >\n        {render(\n          states.analyze(\n            state as Extract<ImportState, { activeState: 'analyze' }>,\n            { apis: { catalogImportApi } },\n          ),\n        )}\n        {render(\n          states.prepare(\n            state as Extract<ImportState, { activeState: 'prepare' }>,\n            { apis: { catalogImportApi } },\n          ),\n        )}\n        {render(\n          states.review(\n            state as Extract<ImportState, { activeState: 'review' }>,\n            { apis: { catalogImportApi } },\n          ),\n        )}\n        {render(\n          states.finish(\n            state as Extract<ImportState, { activeState: 'finish' }>,\n            { apis: { catalogImportApi } },\n          ),\n        )}\n      </Stepper>\n    </InfoCard>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAgCA,MAAM,SAAA,GAAY,WAAW,OAAO;AAAA,EAClC,WAAa,EAAA;AAAA,IACX,OAAS,EAAA;AAAA;AAEb,CAAE,CAAA,CAAA;AAqBW,MAAA,aAAA,GAAgB,CAAC,KAA8B,KAAA;AAC1D,EAAM,MAAA;AAAA,IACJ,UAAA;AAAA,IACA,eAAkB,GAAA,sBAAA;AAAA,IAClB;AAAA,GACE,GAAA,KAAA;AAEJ,EAAM,MAAA,gBAAA,GAAmB,OAAO,mBAAmB,CAAA;AACnD,EAAA,MAAM,UAAU,SAAU,EAAA;AAC1B,EAAA,MAAM,KAAQ,GAAA,cAAA,CAAe,EAAE,UAAA,EAAY,CAAA;AAE3C,EAAA,MAAM,MAAS,GAAA,OAAA;AAAA,IACb,MAAM,eAAA,CAAgB,KAAM,CAAA,UAAA,EAAY,cAAc,CAAA;AAAA,IACtD,CAAC,eAAiB,EAAA,KAAA,CAAM,UAAU;AAAA,GACpC;AAEA,EAAM,MAAA,MAAA,GAAS,CAAC,IAA4B,KAAA;AAC1C,IACE,uBAAA,KAAA,CAAA,aAAA,CAAC,YACE,IAAK,CAAA,SAAA,sCACL,WAAa,EAAA,IAAA,EAAA,IAAA,CAAK,OAAQ,CAC7B,CAAA;AAAA,GAEJ;AAEA,EACE,uBAAA,KAAA,CAAA,aAAA,CAAC,YAAS,OACR,EAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,OAAA;AAAA,IAAA;AAAA,MACC,OAAS,EAAA,EAAE,IAAM,EAAA,OAAA,CAAQ,WAAY,EAAA;AAAA,MACrC,YAAY,KAAM,CAAA,gBAAA;AAAA,MAClB,WAAY,EAAA;AAAA,KAAA;AAAA,IAEX,MAAA;AAAA,MACC,MAAO,CAAA,OAAA;AAAA,QACL,KAAA;AAAA,QACA,EAAE,IAAA,EAAM,EAAE,gBAAA,EAAmB;AAAA;AAC/B,KACF;AAAA,IACC,MAAA;AAAA,MACC,MAAO,CAAA,OAAA;AAAA,QACL,KAAA;AAAA,QACA,EAAE,IAAA,EAAM,EAAE,gBAAA,EAAmB;AAAA;AAC/B,KACF;AAAA,IACC,MAAA;AAAA,MACC,MAAO,CAAA,MAAA;AAAA,QACL,KAAA;AAAA,QACA,EAAE,IAAA,EAAM,EAAE,gBAAA,EAAmB;AAAA;AAC/B,KACF;AAAA,IACC,MAAA;AAAA,MACC,MAAO,CAAA,MAAA;AAAA,QACL,KAAA;AAAA,QACA,EAAE,IAAA,EAAM,EAAE,gBAAA,EAAmB;AAAA;AAC/B;AACF,GAEJ,CAAA;AAEJ;;;;"}