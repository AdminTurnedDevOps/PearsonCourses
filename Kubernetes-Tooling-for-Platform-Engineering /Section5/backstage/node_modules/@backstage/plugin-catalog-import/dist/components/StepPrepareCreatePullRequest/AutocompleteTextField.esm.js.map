{"version":3,"file":"AutocompleteTextField.esm.js","sources":["../../../src/components/StepPrepareCreatePullRequest/AutocompleteTextField.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport TextField from '@material-ui/core/TextField';\nimport { TextFieldProps } from '@material-ui/core/TextField/TextField';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport React from 'react';\nimport { Controller, FieldErrors } from 'react-hook-form';\n\n/**\n * Props for {@link AutocompleteTextField}.\n *\n * @public\n */\nexport interface AutocompleteTextFieldProps<TFieldValue extends string> {\n  name: TFieldValue;\n  options: string[];\n  required?: boolean;\n\n  errors?: FieldErrors;\n  rules?: React.ComponentProps<typeof Controller>['rules'];\n\n  loading?: boolean;\n  loadingText?: string;\n\n  helperText?: React.ReactNode;\n  errorHelperText?: string;\n\n  textFieldProps?: Omit<TextFieldProps, 'required' | 'fullWidth'>;\n}\n\n/**\n * An autocompletion text field for the catalog import flows.\n *\n * @public\n */\nexport const AutocompleteTextField = <TFieldValue extends string>(\n  props: AutocompleteTextFieldProps<TFieldValue>,\n) => {\n  const {\n    name,\n    options,\n    required,\n    errors,\n    rules,\n    loading = false,\n    loadingText,\n    helperText,\n    errorHelperText,\n    textFieldProps = {},\n  } = props;\n\n  return (\n    <Controller\n      name={name}\n      rules={rules}\n      render={({ field: { onChange } }) => (\n        <Autocomplete\n          loading={loading}\n          loadingText={loadingText}\n          options={options || []}\n          autoSelect\n          freeSolo\n          onChange={(_event: React.ChangeEvent<{}>, value: string | null) =>\n            onChange(value)\n          }\n          renderInput={params => (\n            <TextField\n              {...params}\n              helperText={(errors?.[name] && errorHelperText) || helperText}\n              error={Boolean(errors?.[name])}\n              margin=\"normal\"\n              variant=\"outlined\"\n              required={required}\n              InputProps={{\n                ...params.InputProps,\n                endAdornment: (\n                  <React.Fragment>\n                    {loading ? (\n                      <CircularProgress color=\"inherit\" size=\"1em\" />\n                    ) : null}\n                    {params.InputProps.endAdornment}\n                  </React.Fragment>\n                ),\n              }}\n              {...textFieldProps}\n            />\n          )}\n        />\n      )}\n    />\n  );\n};\n"],"names":[],"mappings":";;;;;;AAkDa,MAAA,qBAAA,GAAwB,CACnC,KACG,KAAA;AACH,EAAM,MAAA;AAAA,IACJ,IAAA;AAAA,IACA,OAAA;AAAA,IACA,QAAA;AAAA,IACA,MAAA;AAAA,IACA,KAAA;AAAA,IACA,OAAU,GAAA,KAAA;AAAA,IACV,WAAA;AAAA,IACA,UAAA;AAAA,IACA,eAAA;AAAA,IACA,iBAAiB;AAAC,GAChB,GAAA,KAAA;AAEJ,EACE,uBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,UAAA;AAAA,IAAA;AAAA,MACC,IAAA;AAAA,MACA,KAAA;AAAA,MACA,QAAQ,CAAC,EAAE,OAAO,EAAE,QAAA,IAClB,qBAAA,KAAA,CAAA,aAAA;AAAA,QAAC,YAAA;AAAA,QAAA;AAAA,UACC,OAAA;AAAA,UACA,WAAA;AAAA,UACA,OAAA,EAAS,WAAW,EAAC;AAAA,UACrB,UAAU,EAAA,IAAA;AAAA,UACV,QAAQ,EAAA,IAAA;AAAA,UACR,QAAU,EAAA,CAAC,MAA+B,EAAA,KAAA,KACxC,SAAS,KAAK,CAAA;AAAA,UAEhB,aAAa,CACX,MAAA,qBAAA,KAAA,CAAA,aAAA;AAAA,YAAC,SAAA;AAAA,YAAA;AAAA,cACE,GAAG,MAAA;AAAA,cACJ,UAAa,EAAA,MAAA,GAAS,IAAI,CAAA,IAAK,eAAoB,IAAA,UAAA;AAAA,cACnD,KAAO,EAAA,OAAA,CAAQ,MAAS,GAAA,IAAI,CAAC,CAAA;AAAA,cAC7B,MAAO,EAAA,QAAA;AAAA,cACP,OAAQ,EAAA,UAAA;AAAA,cACR,QAAA;AAAA,cACA,UAAY,EAAA;AAAA,gBACV,GAAG,MAAO,CAAA,UAAA;AAAA,gBACV,8BACG,KAAA,CAAA,aAAA,CAAA,KAAA,CAAM,QAAN,EAAA,IAAA,EACE,0BACE,KAAA,CAAA,aAAA,CAAA,gBAAA,EAAA,EAAiB,KAAM,EAAA,SAAA,EAAU,MAAK,KAAM,EAAA,CAAA,GAC3C,IACH,EAAA,MAAA,CAAO,WAAW,YACrB;AAAA,eAEJ;AAAA,cACC,GAAG;AAAA;AAAA;AACN;AAAA;AAEJ;AAAA,GAEJ;AAEJ;;;;"}