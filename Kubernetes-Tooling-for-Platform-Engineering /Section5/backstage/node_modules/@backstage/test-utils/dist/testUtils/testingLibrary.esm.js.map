{"version":3,"file":"testingLibrary.esm.js","sources":["../../src/testUtils/testingLibrary.ts"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ReactElement } from 'react';\nimport {\n  act,\n  render,\n  RenderOptions,\n  RenderResult,\n} from '@testing-library/react';\n\n/**\n * @public\n * Set legacy mode when using React 18/RTL 13+.\n * Mock this option while we're working against React 17 or lower.\n */\nexport type LegacyRootOption = { legacyRoot?: boolean };\n\n/**\n * @public\n * Simplifies rendering of async components in by taking care of the wrapping inside act\n *\n * @remarks\n *\n * Components using useEffect to perform an asynchronous action (such as fetch) must be rendered within an async\n * act call to properly get the final state, even with mocked responses. This utility method makes the signature a bit\n * cleaner, since act doesn't return the result of the evaluated function.\n * https://github.com/testing-library/react-testing-library/issues/281\n * https://github.com/facebook/react/pull/14853\n */\nexport async function renderWithEffects(\n  nodes: ReactElement,\n  options?: Pick<RenderOptions, 'wrapper'> & LegacyRootOption,\n): Promise<RenderResult> {\n  let value: RenderResult;\n  await act(async () => {\n    value = render(nodes, options);\n  });\n  return value!;\n}\n"],"names":[],"mappings":";;AA2CsB,eAAA,iBAAA,CACpB,OACA,OACuB,EAAA;AACvB,EAAI,IAAA,KAAA;AACJ,EAAA,MAAM,IAAI,YAAY;AACpB,IAAQ,KAAA,GAAA,MAAA,CAAO,OAAO,OAAO,CAAA;AAAA,GAC9B,CAAA;AACD,EAAO,OAAA,KAAA;AACT;;;;"}