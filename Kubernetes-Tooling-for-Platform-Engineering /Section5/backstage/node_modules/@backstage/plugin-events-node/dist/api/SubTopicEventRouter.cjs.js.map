{"version":3,"file":"SubTopicEventRouter.cjs.js","sources":["../../src/api/SubTopicEventRouter.ts"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EventParams } from './EventParams';\nimport { EventRouter } from './EventRouter';\nimport { EventsService } from './EventsService';\n\n/**\n * Subscribes to the provided (generic) topic\n * and publishes the events under the more concrete sub-topic\n * depending on the implemented logic for determining it.\n * Implementing classes might use information from `metadata`\n * and/or properties within the payload.\n *\n * @public\n */\nexport abstract class SubTopicEventRouter extends EventRouter {\n  protected constructor(options: { events: EventsService; topic: string }) {\n    super({\n      events: options.events,\n      topics: [options.topic],\n    });\n  }\n\n  protected abstract determineSubTopic(params: EventParams): string | undefined;\n\n  protected determineDestinationTopic(params: EventParams): string | undefined {\n    const subTopic = this.determineSubTopic(params);\n    return subTopic ? `${params.topic}.${subTopic}` : undefined;\n  }\n}\n"],"names":["EventRouter"],"mappings":";;;;AA6BO,MAAe,4BAA4BA,uBAAY,CAAA;AAAA,EAClD,YAAY,OAAmD,EAAA;AACvE,IAAM,KAAA,CAAA;AAAA,MACJ,QAAQ,OAAQ,CAAA,MAAA;AAAA,MAChB,MAAA,EAAQ,CAAC,OAAA,CAAQ,KAAK;AAAA,KACvB,CAAA;AAAA;AACH,EAIU,0BAA0B,MAAyC,EAAA;AAC3E,IAAM,MAAA,QAAA,GAAW,IAAK,CAAA,iBAAA,CAAkB,MAAM,CAAA;AAC9C,IAAA,OAAO,WAAW,CAAG,EAAA,MAAA,CAAO,KAAK,CAAA,CAAA,EAAI,QAAQ,CAAK,CAAA,GAAA,KAAA,CAAA;AAAA;AAEtD;;;;"}