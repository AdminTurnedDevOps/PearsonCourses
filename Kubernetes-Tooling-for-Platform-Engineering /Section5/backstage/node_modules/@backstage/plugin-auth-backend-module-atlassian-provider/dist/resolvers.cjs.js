'use strict';

var pluginAuthNode = require('@backstage/plugin-auth-node');

exports.atlassianSignInResolvers = void 0;
((atlassianSignInResolvers2) => {
  atlassianSignInResolvers2.usernameMatchingUserEntityName = pluginAuthNode.createSignInResolverFactory({
    create() {
      return async (info, ctx) => {
        const { result } = info;
        const id = result.fullProfile.username;
        if (!id) {
          throw new Error(`Atlassian user profile does not contain a username`);
        }
        return ctx.signInWithCatalogUser({ entityRef: { name: id } });
      };
    }
  });
})(exports.atlassianSignInResolvers || (exports.atlassianSignInResolvers = {}));
//# sourceMappingURL=resolvers.cjs.js.map
