{"version":3,"file":"IssueLink.esm.js","sources":["../../src/ReportIssue/IssueLink.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { makeStyles } from '@material-ui/core';\nimport BugReportIcon from '@material-ui/icons/BugReport';\n\nimport { Link, GitHubIcon } from '@backstage/core-components';\n\nimport { ReportIssueTemplate, Repository } from './types';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'grid',\n    gridGap: theme.spacing(1),\n    gridAutoFlow: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    color: theme.palette.common.black,\n    fontSize: theme.typography.button.fontSize,\n  },\n}));\n\ntype IssueLinkProps = {\n  template: ReportIssueTemplate;\n  repository: Repository;\n};\n\nconst getIcon = ({ type }: Repository) => {\n  if (type === 'github') {\n    return GitHubIcon;\n  }\n  return BugReportIcon;\n};\n\nconst getName = ({ type }: Repository) => {\n  if (type === 'github') {\n    return 'Github';\n  }\n  return 'Gitlab';\n};\n\nconst getUrl = (repository: Repository, template: ReportIssueTemplate) => {\n  const { title, body } = template;\n  const encodedTitle = encodeURIComponent(title);\n  const encodedBody = encodeURIComponent(body);\n  const { protocol, resource, owner, name, type } = repository;\n\n  const url = `${protocol}://${resource}/${owner}/${name}`;\n  const encodedUrl = encodeURI(url);\n  if (type === 'github') {\n    return `${encodedUrl}/issues/new?title=${encodedTitle}&body=${encodedBody}`;\n  }\n  return `${encodedUrl}/issues/new?issue[title]=${encodedTitle}&issue[description]=${encodedBody}`;\n};\n\nexport const IssueLink = ({ template, repository }: IssueLinkProps) => {\n  const classes = useStyles();\n\n  const Icon = getIcon(repository);\n  const url = getUrl(repository, template);\n\n  return (\n    <Link className={classes.root} to={url} target=\"_blank\">\n      <Icon /> Open new {getName(repository)} issue\n    </Link>\n  );\n};\n"],"names":[],"mappings":";;;;;AAyBA,MAAM,SAAA,GAAY,WAAW,CAAU,KAAA,MAAA;AAAA,EACrC,IAAM,EAAA;AAAA,IACJ,OAAS,EAAA,MAAA;AAAA,IACT,OAAA,EAAS,KAAM,CAAA,OAAA,CAAQ,CAAC,CAAA;AAAA,IACxB,YAAc,EAAA,QAAA;AAAA,IACd,cAAgB,EAAA,QAAA;AAAA,IAChB,UAAY,EAAA,QAAA;AAAA,IACZ,KAAA,EAAO,KAAM,CAAA,OAAA,CAAQ,MAAO,CAAA,KAAA;AAAA,IAC5B,QAAA,EAAU,KAAM,CAAA,UAAA,CAAW,MAAO,CAAA;AAAA;AAEtC,CAAE,CAAA,CAAA;AAOF,MAAM,OAAU,GAAA,CAAC,EAAE,IAAA,EAAuB,KAAA;AACxC,EAAA,IAAI,SAAS,QAAU,EAAA;AACrB,IAAO,OAAA,UAAA;AAAA;AAET,EAAO,OAAA,aAAA;AACT,CAAA;AAEA,MAAM,OAAU,GAAA,CAAC,EAAE,IAAA,EAAuB,KAAA;AACxC,EAAA,IAAI,SAAS,QAAU,EAAA;AACrB,IAAO,OAAA,QAAA;AAAA;AAET,EAAO,OAAA,QAAA;AACT,CAAA;AAEA,MAAM,MAAA,GAAS,CAAC,UAAA,EAAwB,QAAkC,KAAA;AACxE,EAAM,MAAA,EAAE,KAAO,EAAA,IAAA,EAAS,GAAA,QAAA;AACxB,EAAM,MAAA,YAAA,GAAe,mBAAmB,KAAK,CAAA;AAC7C,EAAM,MAAA,WAAA,GAAc,mBAAmB,IAAI,CAAA;AAC3C,EAAA,MAAM,EAAE,QAAU,EAAA,QAAA,EAAU,KAAO,EAAA,IAAA,EAAM,MAAS,GAAA,UAAA;AAElD,EAAM,MAAA,GAAA,GAAM,GAAG,QAAQ,CAAA,GAAA,EAAM,QAAQ,CAAI,CAAA,EAAA,KAAK,IAAI,IAAI,CAAA,CAAA;AACtD,EAAM,MAAA,UAAA,GAAa,UAAU,GAAG,CAAA;AAChC,EAAA,IAAI,SAAS,QAAU,EAAA;AACrB,IAAA,OAAO,CAAG,EAAA,UAAU,CAAqB,kBAAA,EAAA,YAAY,SAAS,WAAW,CAAA,CAAA;AAAA;AAE3E,EAAA,OAAO,CAAG,EAAA,UAAU,CAA4B,yBAAA,EAAA,YAAY,uBAAuB,WAAW,CAAA,CAAA;AAChG,CAAA;AAEO,MAAM,SAAY,GAAA,CAAC,EAAE,QAAA,EAAU,YAAiC,KAAA;AACrE,EAAA,MAAM,UAAU,SAAU,EAAA;AAE1B,EAAM,MAAA,IAAA,GAAO,QAAQ,UAAU,CAAA;AAC/B,EAAM,MAAA,GAAA,GAAM,MAAO,CAAA,UAAA,EAAY,QAAQ,CAAA;AAEvC,EAAA,2CACG,IAAK,EAAA,EAAA,SAAA,EAAW,OAAQ,CAAA,IAAA,EAAM,IAAI,GAAK,EAAA,MAAA,EAAO,QAC7C,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,UAAK,CAAE,EAAA,YAAA,EAAW,OAAQ,CAAA,UAAU,GAAE,QACzC,CAAA;AAEJ;;;;"}