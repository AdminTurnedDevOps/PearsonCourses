{"version":3,"file":"AppNav.esm.js","sources":["../../src/extensions/AppNav.tsx"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  createExtension,\n  coreExtensionData,\n  createExtensionInput,\n  useRouteRef,\n  NavItemBlueprint,\n  NavLogoBlueprint,\n} from '@backstage/frontend-plugin-api';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  Sidebar,\n  useSidebarOpenState,\n  Link,\n  sidebarConfig,\n  SidebarDivider,\n  SidebarItem,\n} from '@backstage/core-components';\n// eslint-disable-next-line @backstage/no-relative-monorepo-imports\nimport LogoIcon from '../../../../packages/app/src/components/Root/LogoIcon';\n// eslint-disable-next-line @backstage/no-relative-monorepo-imports\nimport LogoFull from '../../../../packages/app/src/components/Root/LogoFull';\n\nconst useSidebarLogoStyles = makeStyles({\n  root: {\n    width: sidebarConfig.drawerWidthClosed,\n    height: 3 * sidebarConfig.logoHeight,\n    display: 'flex',\n    flexFlow: 'row nowrap',\n    alignItems: 'center',\n    marginBottom: -14,\n  },\n  link: {\n    width: sidebarConfig.drawerWidthClosed,\n    marginLeft: 24,\n  },\n});\n\nconst SidebarLogo = (\n  props: (typeof NavLogoBlueprint.dataRefs.logoElements)['T'],\n) => {\n  const classes = useSidebarLogoStyles();\n  const { isOpen } = useSidebarOpenState();\n\n  return (\n    <div className={classes.root}>\n      <Link to=\"/\" underline=\"none\" className={classes.link} aria-label=\"Home\">\n        {isOpen\n          ? props?.logoFull ?? <LogoFull />\n          : props?.logoIcon ?? <LogoIcon />}\n      </Link>\n    </div>\n  );\n};\n\nconst SidebarNavItem = (\n  props: (typeof NavItemBlueprint.dataRefs.target)['T'],\n) => {\n  const { icon: Icon, title, routeRef } = props;\n  const link = useRouteRef(routeRef);\n  if (!link) {\n    return null;\n  }\n  // TODO: Support opening modal, for example, the search one\n  return <SidebarItem to={link()} icon={Icon} text={title} />;\n};\n\nexport const AppNav = createExtension({\n  name: 'nav',\n  attachTo: { id: 'app/layout', input: 'nav' },\n  inputs: {\n    items: createExtensionInput([NavItemBlueprint.dataRefs.target]),\n    logos: createExtensionInput([NavLogoBlueprint.dataRefs.logoElements], {\n      singleton: true,\n      optional: true,\n    }),\n  },\n  output: [coreExtensionData.reactElement],\n  factory: ({ inputs }) => [\n    coreExtensionData.reactElement(\n      <Sidebar>\n        <SidebarLogo\n          {...inputs.logos?.get(NavLogoBlueprint.dataRefs.logoElements)}\n        />\n        <SidebarDivider />\n        {inputs.items.map((item, index) => (\n          <SidebarNavItem\n            {...item.get(NavItemBlueprint.dataRefs.target)}\n            key={index}\n          />\n        ))}\n      </Sidebar>,\n    ),\n  ],\n});\n"],"names":[],"mappings":"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"}