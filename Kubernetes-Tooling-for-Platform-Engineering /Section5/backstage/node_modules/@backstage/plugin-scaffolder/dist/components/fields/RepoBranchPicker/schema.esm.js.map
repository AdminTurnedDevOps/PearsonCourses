{"version":3,"file":"schema.esm.js","sources":["../../../../src/components/fields/RepoBranchPicker/schema.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { z } from 'zod';\nimport { makeFieldSchemaFromZod } from '../utils';\n\n/**\n * @public\n */\nexport const RepoBranchPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    requestUserCredentials: z\n      .object({\n        secretsKey: z\n          .string()\n          .describe(\n            'Key used within the template secrets context to store the credential',\n          ),\n        additionalScopes: z\n          .object({\n            gitea: z\n              .array(z.string())\n              .optional()\n              .describe('Additional Gitea scopes to request'),\n            gerrit: z\n              .array(z.string())\n              .optional()\n              .describe('Additional Gerrit scopes to request'),\n            github: z\n              .array(z.string())\n              .optional()\n              .describe('Additional GitHub scopes to request'),\n            gitlab: z\n              .array(z.string())\n              .optional()\n              .describe('Additional GitLab scopes to request'),\n            bitbucket: z\n              .array(z.string())\n              .optional()\n              .describe('Additional BitBucket scopes to request'),\n            azure: z\n              .array(z.string())\n              .optional()\n              .describe('Additional Azure scopes to request'),\n          })\n          .optional()\n          .describe('Additional permission scopes to request'),\n      })\n      .optional()\n      .describe(\n        'If defined will request user credentials to auth against the given SCM platform',\n      ),\n  }),\n);\n\n/**\n * The input props that can be specified under `ui:options` for the\n * `RepoBranchPicker` field extension.\n *\n * @public\n */\nexport type RepoBranchPickerUiOptions =\n  typeof RepoBranchPickerFieldSchema.uiOptionsType;\n\nexport type RepoBranchPickerProps = typeof RepoBranchPickerFieldSchema.type;\n\n// This has been duplicated from /plugins/scaffolder/src/components/fields/RepoUrlPicker/schema.ts\n// NOTE: There is a bug with this failing validation in the custom field explorer due\n// to https://github.com/rjsf-team/react-jsonschema-form/issues/675 even if\n// requestUserCredentials is not defined\nexport const RepoBranchPickerSchema = RepoBranchPickerFieldSchema.schema;\n"],"names":[],"mappings":";;;AAqBO,MAAM,2BAA8B,GAAA,sBAAA;AAAA,EACzC,EAAE,MAAO,EAAA;AAAA,EACT,EAAE,MAAO,CAAA;AAAA,IACP,sBAAA,EAAwB,EACrB,MAAO,CAAA;AAAA,MACN,UAAA,EAAY,CACT,CAAA,MAAA,EACA,CAAA,QAAA;AAAA,QACC;AAAA,OACF;AAAA,MACF,gBAAA,EAAkB,EACf,MAAO,CAAA;AAAA,QACN,KAAA,EAAO,CACJ,CAAA,KAAA,CAAM,CAAE,CAAA,MAAA,EAAQ,CAChB,CAAA,QAAA,EACA,CAAA,QAAA,CAAS,oCAAoC,CAAA;AAAA,QAChD,MAAA,EAAQ,CACL,CAAA,KAAA,CAAM,CAAE,CAAA,MAAA,EAAQ,CAChB,CAAA,QAAA,EACA,CAAA,QAAA,CAAS,qCAAqC,CAAA;AAAA,QACjD,MAAA,EAAQ,CACL,CAAA,KAAA,CAAM,CAAE,CAAA,MAAA,EAAQ,CAChB,CAAA,QAAA,EACA,CAAA,QAAA,CAAS,qCAAqC,CAAA;AAAA,QACjD,MAAA,EAAQ,CACL,CAAA,KAAA,CAAM,CAAE,CAAA,MAAA,EAAQ,CAChB,CAAA,QAAA,EACA,CAAA,QAAA,CAAS,qCAAqC,CAAA;AAAA,QACjD,SAAA,EAAW,CACR,CAAA,KAAA,CAAM,CAAE,CAAA,MAAA,EAAQ,CAChB,CAAA,QAAA,EACA,CAAA,QAAA,CAAS,wCAAwC,CAAA;AAAA,QACpD,KAAA,EAAO,CACJ,CAAA,KAAA,CAAM,CAAE,CAAA,MAAA,EAAQ,CAChB,CAAA,QAAA,EACA,CAAA,QAAA,CAAS,oCAAoC;AAAA,OACjD,CAAA,CACA,QAAS,EAAA,CACT,SAAS,yCAAyC;AAAA,KACtD,CACA,CAAA,QAAA,EACA,CAAA,QAAA;AAAA,MACC;AAAA;AACF,GACH;AACH;AAiBO,MAAM,yBAAyB,2BAA4B,CAAA;;;;"}