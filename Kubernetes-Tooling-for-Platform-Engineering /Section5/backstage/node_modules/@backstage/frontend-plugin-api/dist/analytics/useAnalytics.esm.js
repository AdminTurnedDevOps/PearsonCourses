import { useApi } from '@backstage/core-plugin-api';
import { useAnalyticsContext } from './AnalyticsContext.esm.js';
import '../apis/definitions/AppTreeApi.esm.js';
import '../apis/definitions/ComponentsApi.esm.js';
import '../apis/definitions/IconsApi.esm.js';
import '../apis/definitions/RouteResolutionApi.esm.js';
import { analyticsApiRef } from '../apis/definitions/AnalyticsApi.esm.js';
import { useRef } from 'react';
import { Tracker } from './Tracker.esm.js';

function useAnalyticsApi() {
  try {
    return useApi(analyticsApiRef);
  } catch (error) {
    if (error.name === "NotImplementedError") {
      return { captureEvent: () => {
      } };
    }
    throw error;
  }
}
function useAnalytics() {
  const trackerRef = useRef(null);
  const context = useAnalyticsContext();
  const analyticsApi = useAnalyticsApi();
  function getTracker() {
    if (trackerRef.current === null) {
      trackerRef.current = new Tracker(analyticsApi);
    }
    return trackerRef.current;
  }
  const tracker = getTracker();
  tracker.setContext(context);
  return tracker;
}

export { useAnalytics };
//# sourceMappingURL=useAnalytics.esm.js.map
