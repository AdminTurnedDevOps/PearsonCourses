{"version":3,"file":"SimpleStepperFooter.esm.js","sources":["../../../src/components/SimpleStepper/SimpleStepperFooter.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { PropsWithChildren, ReactNode, useContext } from 'react';\n\nimport { VerticalStepperContext } from './SimpleStepper';\nimport { StepActions } from './types';\nimport { coreComponentsTranslationRef } from '../../translation';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\n\nexport type SimpleStepperFooterClassKey = 'root';\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      marginTop: theme.spacing(3),\n      '& button': {\n        marginRight: theme.spacing(1),\n      },\n    },\n  }),\n  { name: 'BackstageSimpleStepperFooter' },\n);\n\ninterface CommonBtnProps {\n  text?: string;\n  handleClick?: () => void;\n  stepIndex: number;\n}\ninterface RestartBtnProps extends CommonBtnProps {}\n\ninterface NextBtnProps extends CommonBtnProps {\n  disabled?: boolean;\n  last?: boolean;\n  stepIndex: number;\n}\ninterface SkipBtnProps extends CommonBtnProps {\n  disabled?: boolean;\n  stepIndex: number;\n}\ninterface BackBtnProps extends CommonBtnProps {\n  disabled?: boolean;\n  stepIndex: number;\n}\nexport const RestartBtn = ({ text, handleClick }: RestartBtnProps) => {\n  const { t } = useTranslationRef(coreComponentsTranslationRef);\n  return (\n    <Button onClick={handleClick}>{text || t('simpleStepper.reset')}</Button>\n  );\n};\n\nconst NextBtn = ({\n  text,\n  handleClick,\n  disabled,\n  last,\n  stepIndex,\n}: NextBtnProps) => {\n  const { t } = useTranslationRef(coreComponentsTranslationRef);\n  return (\n    <Button\n      variant=\"contained\"\n      color=\"primary\"\n      disabled={disabled}\n      data-testid={`nextButton-${stepIndex}`}\n      onClick={handleClick}\n    >\n      {text || (last ? t('simpleStepper.finish') : t('simpleStepper.next'))}\n    </Button>\n  );\n};\n\nconst SkipBtn = ({ text, handleClick, disabled, stepIndex }: SkipBtnProps) => {\n  const { t } = useTranslationRef(coreComponentsTranslationRef);\n  return (\n    <Button\n      variant=\"outlined\"\n      color=\"primary\"\n      disabled={disabled}\n      data-testid={`skipButton-${stepIndex}`}\n      onClick={handleClick}\n    >\n      {text || t('simpleStepper.skip')}\n    </Button>\n  );\n};\n\nconst BackBtn = ({ text, handleClick, disabled, stepIndex }: BackBtnProps) => {\n  const { t } = useTranslationRef(coreComponentsTranslationRef);\n  return (\n    <Button\n      onClick={handleClick}\n      data-testid={`backButton-${stepIndex}`}\n      disabled={disabled}\n    >\n      {text || t('simpleStepper.back')}\n    </Button>\n  );\n};\n\nexport type SimpleStepperFooterProps = {\n  actions?: StepActions;\n  children?: ReactNode;\n};\n\nexport const SimpleStepperFooter = ({\n  actions = {},\n  children,\n}: PropsWithChildren<SimpleStepperFooterProps>) => {\n  const classes = useStyles();\n  const {\n    stepperLength,\n    stepIndex,\n    setStepIndex,\n    stepHistory,\n    setStepHistory,\n    onStepChange,\n  } = useContext(VerticalStepperContext);\n\n  const onChange = (newIndex: number, callback?: () => void) => {\n    if (callback) {\n      callback();\n    }\n    if (onStepChange) {\n      onStepChange(stepIndex, newIndex);\n    }\n\n    setStepIndex(newIndex);\n  };\n\n  const handleNext = () => {\n    const newIndex = actions.nextStep\n      ? actions.nextStep(stepIndex, stepperLength - 1)\n      : stepIndex + 1;\n    onChange(newIndex, actions.onNext);\n    setStepHistory([...stepHistory, newIndex]);\n  };\n  const handleBack = () => {\n    stepHistory.pop();\n    onChange(stepHistory[stepHistory.length - 1], actions.onBack);\n    setStepHistory([...stepHistory]);\n  };\n  const handleRestart = () => {\n    onChange(0, actions.onRestart);\n    setStepHistory([0]);\n  };\n\n  return (\n    <Box className={classes.root}>\n      {[undefined, true].includes(actions.showBack) && stepIndex !== 0 && (\n        <BackBtn\n          text={actions.backText}\n          handleClick={handleBack}\n          disabled={stepIndex === 0}\n          stepIndex={stepIndex}\n        />\n      )}\n      {actions.showSkip && (\n        <SkipBtn\n          text={actions.skipText}\n          handleClick={handleNext}\n          disabled={\n            (!!stepperLength && stepIndex >= stepperLength) ||\n            (!!actions.canSkip && !actions.canSkip())\n          }\n          stepIndex={stepIndex}\n        />\n      )}\n      {[undefined, true].includes(actions.showNext) && (\n        <NextBtn\n          text={actions.nextText}\n          handleClick={handleNext}\n          disabled={\n            (!!stepperLength && stepIndex >= stepperLength) ||\n            (!!actions.canNext && !actions.canNext())\n          }\n          stepIndex={stepIndex}\n        />\n      )}\n      {actions.showRestart && stepIndex !== 0 && (\n        <RestartBtn\n          text={actions.restartText}\n          handleClick={handleRestart}\n          stepIndex={stepIndex}\n        />\n      )}\n      {children}\n    </Box>\n  );\n};\n"],"names":["React"],"mappings":";;;;;;;;AA2BA,MAAM,SAAY,GAAA,UAAA;AAAA,EAChB,CAAU,KAAA,MAAA;AAAA,IACR,IAAM,EAAA;AAAA,MACJ,SAAA,EAAW,KAAM,CAAA,OAAA,CAAQ,CAAC,CAAA;AAAA,MAC1B,UAAY,EAAA;AAAA,QACV,WAAA,EAAa,KAAM,CAAA,OAAA,CAAQ,CAAC;AAAA;AAC9B;AACF,GACF,CAAA;AAAA,EACA,EAAE,MAAM,8BAA+B;AACzC,CAAA;AAsBO,MAAM,UAAa,GAAA,CAAC,EAAE,IAAA,EAAM,aAAmC,KAAA;AACpE,EAAA,MAAM,EAAE,CAAA,EAAM,GAAA,iBAAA,CAAkB,4BAA4B,CAAA;AAC5D,EAAA,oDACG,MAAO,EAAA,EAAA,OAAA,EAAS,eAAc,IAAQ,IAAA,CAAA,CAAE,qBAAqB,CAAE,CAAA;AAEpE;AAEA,MAAM,UAAU,CAAC;AAAA,EACf,IAAA;AAAA,EACA,WAAA;AAAA,EACA,QAAA;AAAA,EACA,IAAA;AAAA,EACA;AACF,CAAoB,KAAA;AAClB,EAAA,MAAM,EAAE,CAAA,EAAM,GAAA,iBAAA,CAAkB,4BAA4B,CAAA;AAC5D,EACE,uBAAAA,cAAA,CAAA,aAAA;AAAA,IAAC,MAAA;AAAA,IAAA;AAAA,MACC,OAAQ,EAAA,WAAA;AAAA,MACR,KAAM,EAAA,SAAA;AAAA,MACN,QAAA;AAAA,MACA,aAAA,EAAa,cAAc,SAAS,CAAA,CAAA;AAAA,MACpC,OAAS,EAAA;AAAA,KAAA;AAAA,IAER,SAAS,IAAO,GAAA,CAAA,CAAE,sBAAsB,CAAA,GAAI,EAAE,oBAAoB,CAAA;AAAA,GACrE;AAEJ,CAAA;AAEA,MAAM,UAAU,CAAC,EAAE,MAAM,WAAa,EAAA,QAAA,EAAU,WAA8B,KAAA;AAC5E,EAAA,MAAM,EAAE,CAAA,EAAM,GAAA,iBAAA,CAAkB,4BAA4B,CAAA;AAC5D,EACE,uBAAAA,cAAA,CAAA,aAAA;AAAA,IAAC,MAAA;AAAA,IAAA;AAAA,MACC,OAAQ,EAAA,UAAA;AAAA,MACR,KAAM,EAAA,SAAA;AAAA,MACN,QAAA;AAAA,MACA,aAAA,EAAa,cAAc,SAAS,CAAA,CAAA;AAAA,MACpC,OAAS,EAAA;AAAA,KAAA;AAAA,IAER,IAAA,IAAQ,EAAE,oBAAoB;AAAA,GACjC;AAEJ,CAAA;AAEA,MAAM,UAAU,CAAC,EAAE,MAAM,WAAa,EAAA,QAAA,EAAU,WAA8B,KAAA;AAC5E,EAAA,MAAM,EAAE,CAAA,EAAM,GAAA,iBAAA,CAAkB,4BAA4B,CAAA;AAC5D,EACE,uBAAAA,cAAA,CAAA,aAAA;AAAA,IAAC,MAAA;AAAA,IAAA;AAAA,MACC,OAAS,EAAA,WAAA;AAAA,MACT,aAAA,EAAa,cAAc,SAAS,CAAA,CAAA;AAAA,MACpC;AAAA,KAAA;AAAA,IAEC,IAAA,IAAQ,EAAE,oBAAoB;AAAA,GACjC;AAEJ,CAAA;AAOO,MAAM,sBAAsB,CAAC;AAAA,EAClC,UAAU,EAAC;AAAA,EACX;AACF,CAAmD,KAAA;AACjD,EAAA,MAAM,UAAU,SAAU,EAAA;AAC1B,EAAM,MAAA;AAAA,IACJ,aAAA;AAAA,IACA,SAAA;AAAA,IACA,YAAA;AAAA,IACA,WAAA;AAAA,IACA,cAAA;AAAA,IACA;AAAA,GACF,GAAI,WAAW,sBAAsB,CAAA;AAErC,EAAM,MAAA,QAAA,GAAW,CAAC,QAAA,EAAkB,QAA0B,KAAA;AAC5D,IAAA,IAAI,QAAU,EAAA;AACZ,MAAS,QAAA,EAAA;AAAA;AAEX,IAAA,IAAI,YAAc,EAAA;AAChB,MAAA,YAAA,CAAa,WAAW,QAAQ,CAAA;AAAA;AAGlC,IAAA,YAAA,CAAa,QAAQ,CAAA;AAAA,GACvB;AAEA,EAAA,MAAM,aAAa,MAAM;AACvB,IAAM,MAAA,QAAA,GAAW,QAAQ,QACrB,GAAA,OAAA,CAAQ,SAAS,SAAW,EAAA,aAAA,GAAgB,CAAC,CAAA,GAC7C,SAAY,GAAA,CAAA;AAChB,IAAS,QAAA,CAAA,QAAA,EAAU,QAAQ,MAAM,CAAA;AACjC,IAAA,cAAA,CAAe,CAAC,GAAG,WAAa,EAAA,QAAQ,CAAC,CAAA;AAAA,GAC3C;AACA,EAAA,MAAM,aAAa,MAAM;AACvB,IAAA,WAAA,CAAY,GAAI,EAAA;AAChB,IAAA,QAAA,CAAS,YAAY,WAAY,CAAA,MAAA,GAAS,CAAC,CAAA,EAAG,QAAQ,MAAM,CAAA;AAC5D,IAAe,cAAA,CAAA,CAAC,GAAG,WAAW,CAAC,CAAA;AAAA,GACjC;AACA,EAAA,MAAM,gBAAgB,MAAM;AAC1B,IAAS,QAAA,CAAA,CAAA,EAAG,QAAQ,SAAS,CAAA;AAC7B,IAAe,cAAA,CAAA,CAAC,CAAC,CAAC,CAAA;AAAA,GACpB;AAEA,EAAA,uBACGA,cAAA,CAAA,aAAA,CAAA,GAAA,EAAA,EAAI,SAAW,EAAA,OAAA,CAAQ,QACrB,CAAC,KAAA,CAAA,EAAW,IAAI,CAAA,CAAE,QAAS,CAAA,OAAA,CAAQ,QAAQ,CAAA,IAAK,cAAc,CAC7D,oBAAAA,cAAA,CAAA,aAAA;AAAA,IAAC,OAAA;AAAA,IAAA;AAAA,MACC,MAAM,OAAQ,CAAA,QAAA;AAAA,MACd,WAAa,EAAA,UAAA;AAAA,MACb,UAAU,SAAc,KAAA,CAAA;AAAA,MACxB;AAAA;AAAA,GACF,EAED,QAAQ,QACP,oBAAAA,cAAA,CAAA,aAAA;AAAA,IAAC,OAAA;AAAA,IAAA;AAAA,MACC,MAAM,OAAQ,CAAA,QAAA;AAAA,MACd,WAAa,EAAA,UAAA;AAAA,MACb,QACG,EAAA,CAAC,CAAC,aAAA,IAAiB,SAAa,IAAA,aAAA,IAChC,CAAC,CAAC,OAAQ,CAAA,OAAA,IAAW,CAAC,OAAA,CAAQ,OAAQ,EAAA;AAAA,MAEzC;AAAA;AAAA,GACF,EAED,CAAC,KAAW,CAAA,EAAA,IAAI,EAAE,QAAS,CAAA,OAAA,CAAQ,QAAQ,CAC1C,oBAAAA,cAAA,CAAA,aAAA;AAAA,IAAC,OAAA;AAAA,IAAA;AAAA,MACC,MAAM,OAAQ,CAAA,QAAA;AAAA,MACd,WAAa,EAAA,UAAA;AAAA,MACb,QACG,EAAA,CAAC,CAAC,aAAA,IAAiB,SAAa,IAAA,aAAA,IAChC,CAAC,CAAC,OAAQ,CAAA,OAAA,IAAW,CAAC,OAAA,CAAQ,OAAQ,EAAA;AAAA,MAEzC;AAAA;AAAA,GAGH,EAAA,OAAA,CAAQ,WAAe,IAAA,SAAA,KAAc,CACpC,oBAAAA,cAAA,CAAA,aAAA;AAAA,IAAC,UAAA;AAAA,IAAA;AAAA,MACC,MAAM,OAAQ,CAAA,WAAA;AAAA,MACd,WAAa,EAAA,aAAA;AAAA,MACb;AAAA;AAAA,KAGH,QACH,CAAA;AAEJ;;;;"}