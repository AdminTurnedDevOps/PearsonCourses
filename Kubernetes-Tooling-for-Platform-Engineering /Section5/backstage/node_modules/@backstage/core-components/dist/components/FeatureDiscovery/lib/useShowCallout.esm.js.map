{"version":3,"file":"useShowCallout.esm.js","sources":["../../../../src/components/FeatureDiscovery/lib/useShowCallout.ts"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useState } from 'react';\n\nconst STATES_LOCAL_STORAGE_KEY = 'core.calloutSeen';\n\nfunction useCalloutStates(): {\n  states: Record<string, boolean>;\n  setState: (key: string, value: boolean) => void;\n} {\n  const [states, setStates] = useState<Record<string, boolean>>(() => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  });\n\n  const setState = useCallback((key: string, value: boolean) => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    const oldStates = raw ? JSON.parse(raw) : {};\n    const newStates = { ...oldStates, [key]: value };\n    setStates(newStates);\n    localStorage.setItem(STATES_LOCAL_STORAGE_KEY, JSON.stringify(newStates));\n  }, []);\n\n  return { states, setState };\n}\n\nfunction useCalloutHasBeenSeen(featureId: string): {\n  seen: boolean | undefined;\n  markSeen: () => void;\n} {\n  const { states, setState } = useCalloutStates();\n\n  const markSeen = useCallback(() => {\n    setState(featureId, true);\n  }, [setState, featureId]);\n\n  return { seen: states[featureId] === true, markSeen };\n}\n\nexport function useShowCallout(featureId: string): {\n  show: boolean;\n  hide: () => void;\n} {\n  const { seen, markSeen } = useCalloutHasBeenSeen(featureId);\n  return { show: seen === false, hide: markSeen };\n}\n"],"names":[],"mappings":";;AAkBA,MAAM,wBAA2B,GAAA,kBAAA;AAEjC,SAAS,gBAGP,GAAA;AACA,EAAA,MAAM,CAAC,MAAA,EAAQ,SAAS,CAAA,GAAI,SAAkC,MAAM;AAClE,IAAM,MAAA,GAAA,GAAM,YAAa,CAAA,OAAA,CAAQ,wBAAwB,CAAA;AACzD,IAAA,OAAO,GAAM,GAAA,IAAA,CAAK,KAAM,CAAA,GAAG,IAAI,EAAC;AAAA,GACjC,CAAA;AAED,EAAA,MAAM,QAAW,GAAA,WAAA,CAAY,CAAC,GAAA,EAAa,KAAmB,KAAA;AAC5D,IAAM,MAAA,GAAA,GAAM,YAAa,CAAA,OAAA,CAAQ,wBAAwB,CAAA;AACzD,IAAA,MAAM,YAAY,GAAM,GAAA,IAAA,CAAK,KAAM,CAAA,GAAG,IAAI,EAAC;AAC3C,IAAA,MAAM,YAAY,EAAE,GAAG,WAAW,CAAC,GAAG,GAAG,KAAM,EAAA;AAC/C,IAAA,SAAA,CAAU,SAAS,CAAA;AACnB,IAAA,YAAA,CAAa,OAAQ,CAAA,wBAAA,EAA0B,IAAK,CAAA,SAAA,CAAU,SAAS,CAAC,CAAA;AAAA,GAC1E,EAAG,EAAE,CAAA;AAEL,EAAO,OAAA,EAAE,QAAQ,QAAS,EAAA;AAC5B;AAEA,SAAS,sBAAsB,SAG7B,EAAA;AACA,EAAA,MAAM,EAAE,MAAA,EAAQ,QAAS,EAAA,GAAI,gBAAiB,EAAA;AAE9C,EAAM,MAAA,QAAA,GAAW,YAAY,MAAM;AACjC,IAAA,QAAA,CAAS,WAAW,IAAI,CAAA;AAAA,GACvB,EAAA,CAAC,QAAU,EAAA,SAAS,CAAC,CAAA;AAExB,EAAA,OAAO,EAAE,IAAM,EAAA,MAAA,CAAO,SAAS,CAAA,KAAM,MAAM,QAAS,EAAA;AACtD;AAEO,SAAS,eAAe,SAG7B,EAAA;AACA,EAAA,MAAM,EAAE,IAAA,EAAM,QAAS,EAAA,GAAI,sBAAsB,SAAS,CAAA;AAC1D,EAAA,OAAO,EAAE,IAAA,EAAM,IAAS,KAAA,KAAA,EAAO,MAAM,QAAS,EAAA;AAChD;;;;"}