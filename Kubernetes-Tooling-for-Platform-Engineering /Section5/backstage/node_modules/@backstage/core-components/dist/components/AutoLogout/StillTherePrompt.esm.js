import Button from '@material-ui/core/Button';
import Dialog from '@material-ui/core/Dialog';
import DialogActions from '@material-ui/core/DialogActions';
import DialogContent from '@material-ui/core/DialogContent';
import DialogContentText from '@material-ui/core/DialogContentText';
import DialogTitle from '@material-ui/core/DialogTitle';
import React__default, { useEffect } from 'react';
import { coreComponentsTranslationRef } from '../../translation.esm.js';
import { useTranslationRef } from '@backstage/core-plugin-api/alpha';

const StillTherePrompt = (props) => {
  const {
    idleTimer,
    setOpen,
    open,
    promptTimeoutMillis,
    remainingTime,
    setRemainingTime
  } = props;
  const { t } = useTranslationRef(coreComponentsTranslationRef);
  useEffect(() => {
    const interval = setInterval(() => {
      setRemainingTime(Math.ceil(idleTimer.getRemainingTime()));
    }, 500);
    return () => {
      clearInterval(interval);
    };
  }, [idleTimer, setRemainingTime]);
  const handleStillHere = () => {
    setOpen(false);
    idleTimer.activate();
  };
  const timeTillPrompt = Math.max(
    remainingTime - promptTimeoutMillis / 1e3,
    0
  );
  const seconds = timeTillPrompt > 1 ? "seconds" : "second";
  return /* @__PURE__ */ React__default.createElement(Dialog, { open, "data-testid": "inactivity-prompt-dialog" }, /* @__PURE__ */ React__default.createElement(DialogTitle, null, t("autoLogout.stillTherePrompt.title")), /* @__PURE__ */ React__default.createElement(DialogContent, null, /* @__PURE__ */ React__default.createElement(DialogContentText, null, "You are about to be disconnected in", " ", /* @__PURE__ */ React__default.createElement("b", null, Math.ceil(remainingTime / 1e3), " ", seconds), ". Are you still there?")), /* @__PURE__ */ React__default.createElement(DialogActions, null, /* @__PURE__ */ React__default.createElement(
    Button,
    {
      onClick: handleStillHere,
      color: "secondary",
      variant: "contained",
      size: "small"
    },
    t("autoLogout.stillTherePrompt.buttonText")
  )));
};

export { StillTherePrompt };
//# sourceMappingURL=StillTherePrompt.esm.js.map
