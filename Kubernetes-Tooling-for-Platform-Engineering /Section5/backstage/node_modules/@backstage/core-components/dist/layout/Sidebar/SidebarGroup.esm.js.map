{"version":3,"file":"SidebarGroup.esm.js","sources":["../../../src/layout/Sidebar/SidebarGroup.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-shadow */\n/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport BottomNavigationAction, {\n  BottomNavigationActionProps,\n} from '@material-ui/core/BottomNavigationAction';\nimport { Theme, makeStyles } from '@material-ui/core/styles';\nimport React, { useContext } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Link } from '../../components/Link/Link';\nimport { SidebarConfig, SidebarConfigContext } from './config';\nimport { MobileSidebarContext } from './MobileSidebarContext';\nimport { useSidebarPinState } from './SidebarPinStateContext';\n\n/**\n * Props for the `SidebarGroup`\n *\n * @public\n */\nexport interface SidebarGroupProps extends BottomNavigationActionProps {\n  /**\n   * If the `SidebarGroup` should be a `Link`, `to` should be a pathname to that location\n   */\n  to?: string;\n  /**\n   * If the `SidebarGroup`s should be in a different order than in the normal `Sidebar`, you can provide\n   * each `SidebarGroup` it's own priority to reorder them.\n   */\n  priority?: number;\n  /**\n   * React children\n   */\n  children?: React.ReactNode;\n}\n\nconst useStyles = makeStyles<Theme, { sidebarConfig: SidebarConfig }>(\n  theme => ({\n    root: {\n      flexGrow: 0,\n      margin: theme.spacing(0, 2),\n      color: theme.palette.navigation.color,\n    },\n\n    selected: props => ({\n      color: `${theme.palette.navigation.selectedColor}!important`,\n      borderTop: `solid ${props.sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n      marginTop: '-1px',\n    }),\n\n    label: {\n      display: 'none',\n    },\n  }),\n);\n\n/**\n * Returns a Material UI `BottomNavigationAction`, which is aware of the current location & the selected item in the `BottomNavigation`,\n * such that it will highlight a `MobileSidebarGroup` either on location change or if the selected item changes.\n *\n * @param props `to`: pathname of link; `value`: index of the selected item\n * @internal\n */\nconst MobileSidebarGroup = (props: SidebarGroupProps) => {\n  const { to, label, icon, value } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles({ sidebarConfig });\n  const location = useLocation();\n  const { selectedMenuItemIndex, setSelectedMenuItemIndex } =\n    useContext(MobileSidebarContext);\n\n  const onChange = (_: React.ChangeEvent<{}>, value: number) => {\n    if (value === selectedMenuItemIndex) {\n      setSelectedMenuItemIndex(-1);\n    } else {\n      setSelectedMenuItemIndex(value);\n    }\n  };\n\n  const selected =\n    (value === selectedMenuItemIndex && selectedMenuItemIndex >= 0) ||\n    (!(value === selectedMenuItemIndex) &&\n      !(selectedMenuItemIndex >= 0) &&\n      to === location.pathname);\n\n  return (\n    // Material UI issue: https://github.com/mui-org/material-ui/issues/27820\n    <BottomNavigationAction\n      aria-label={label}\n      label={label}\n      icon={icon}\n      component={Link as any}\n      to={(to ? to : location.pathname) as any}\n      onChange={onChange}\n      value={value}\n      selected={selected}\n      classes={classes}\n    />\n  );\n};\n\n/**\n * Groups items of the `Sidebar` together.\n *\n * @remarks\n * On bigger screens, this won't have any effect at the moment.\n * On small screens, it will add an action to the bottom navigation - either triggering an overlay menu or acting as a link\n *\n * @public\n */\nexport const SidebarGroup = (props: SidebarGroupProps) => {\n  const { children, to, label, icon, value } = props;\n  const { isMobile } = useSidebarPinState();\n\n  return isMobile ? (\n    <MobileSidebarGroup to={to} label={label} icon={icon} value={value} />\n  ) : (\n    <>{children}</>\n  );\n};\n"],"names":["value","React"],"mappings":";;;;;;;;;AAiDA,MAAM,SAAY,GAAA,UAAA;AAAA,EAChB,CAAU,KAAA,MAAA;AAAA,IACR,IAAM,EAAA;AAAA,MACJ,QAAU,EAAA,CAAA;AAAA,MACV,MAAQ,EAAA,KAAA,CAAM,OAAQ,CAAA,CAAA,EAAG,CAAC,CAAA;AAAA,MAC1B,KAAA,EAAO,KAAM,CAAA,OAAA,CAAQ,UAAW,CAAA;AAAA,KAClC;AAAA,IAEA,UAAU,CAAU,KAAA,MAAA;AAAA,MAClB,KAAO,EAAA,CAAA,EAAG,KAAM,CAAA,OAAA,CAAQ,WAAW,aAAa,CAAA,UAAA,CAAA;AAAA,MAChD,SAAA,EAAW,SAAS,KAAM,CAAA,aAAA,CAAc,sBAAsB,CAAM,GAAA,EAAA,KAAA,CAAM,OAAQ,CAAA,UAAA,CAAW,SAAS,CAAA,CAAA;AAAA,MACtG,SAAW,EAAA;AAAA,KACb,CAAA;AAAA,IAEA,KAAO,EAAA;AAAA,MACL,OAAS,EAAA;AAAA;AACX,GACF;AACF,CAAA;AASA,MAAM,kBAAA,GAAqB,CAAC,KAA6B,KAAA;AACvD,EAAA,MAAM,EAAE,EAAA,EAAI,KAAO,EAAA,IAAA,EAAM,OAAU,GAAA,KAAA;AACnC,EAAA,MAAM,EAAE,aAAA,EAAkB,GAAA,UAAA,CAAW,oBAAoB,CAAA;AACzD,EAAA,MAAM,OAAU,GAAA,SAAA,CAAU,EAAE,aAAA,EAAe,CAAA;AAC3C,EAAA,MAAM,WAAW,WAAY,EAAA;AAC7B,EAAA,MAAM,EAAE,qBAAA,EAAuB,wBAAyB,EAAA,GACtD,WAAW,oBAAoB,CAAA;AAEjC,EAAM,MAAA,QAAA,GAAW,CAAC,CAAA,EAA0BA,MAAkB,KAAA;AAC5D,IAAA,IAAIA,WAAU,qBAAuB,EAAA;AACnC,MAAA,wBAAA,CAAyB,CAAE,CAAA,CAAA;AAAA,KACtB,MAAA;AACL,MAAA,wBAAA,CAAyBA,MAAK,CAAA;AAAA;AAChC,GACF;AAEA,EAAA,MAAM,QACH,GAAA,KAAA,KAAU,qBAAyB,IAAA,qBAAA,IAAyB,CAC5D,IAAA,EAAE,KAAU,KAAA,qBAAA,CAAA,IACX,EAAE,qBAAA,IAAyB,CAC3B,CAAA,IAAA,EAAA,KAAO,QAAS,CAAA,QAAA;AAEpB,EAAA;AAAA;AAAA,oBAEEC,cAAA,CAAA,aAAA;AAAA,MAAC,sBAAA;AAAA,MAAA;AAAA,QACC,YAAY,EAAA,KAAA;AAAA,QACZ,KAAA;AAAA,QACA,IAAA;AAAA,QACA,SAAW,EAAA,IAAA;AAAA,QACX,EAAA,EAAK,EAAK,GAAA,EAAA,GAAK,QAAS,CAAA,QAAA;AAAA,QACxB,QAAA;AAAA,QACA,KAAA;AAAA,QACA,QAAA;AAAA,QACA;AAAA;AAAA;AACF;AAEJ,CAAA;AAWa,MAAA,YAAA,GAAe,CAAC,KAA6B,KAAA;AACxD,EAAA,MAAM,EAAE,QAAU,EAAA,EAAA,EAAI,KAAO,EAAA,IAAA,EAAM,OAAU,GAAA,KAAA;AAC7C,EAAM,MAAA,EAAE,QAAS,EAAA,GAAI,kBAAmB,EAAA;AAExC,EAAO,OAAA,QAAA,gDACJ,kBAAmB,EAAA,EAAA,EAAA,EAAQ,OAAc,IAAY,EAAA,KAAA,EAAc,CAEpE,mBAAAA,cAAA,CAAA,aAAA,CAAAA,cAAA,CAAA,QAAA,EAAA,IAAA,EAAG,QAAS,CAAA;AAEhB;;;;"}