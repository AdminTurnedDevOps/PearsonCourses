{"version":3,"file":"RelatedEntitiesCard.esm.js","sources":["../../../src/components/RelatedEntitiesCard/RelatedEntitiesCard.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\nimport Typography from '@material-ui/core/Typography';\nimport {\n  EntityTable,\n  useEntity,\n  useRelatedEntities,\n} from '@backstage/plugin-catalog-react';\nimport React from 'react';\nimport {\n  InfoCard,\n  InfoCardVariants,\n  Link,\n  Progress,\n  ResponseErrorPanel,\n  TableColumn,\n  TableOptions,\n} from '@backstage/core-components';\nimport {\n  asComponentEntities,\n  asDomainEntities,\n  asResourceEntities,\n  asSystemEntities,\n  componentEntityColumns,\n  componentEntityHelpLink,\n  domainEntityColumns,\n  domainEntityHelpLink,\n  resourceEntityColumns,\n  resourceEntityHelpLink,\n  systemEntityColumns,\n  systemEntityHelpLink,\n} from './presets';\nimport { catalogTranslationRef } from '../../alpha/translation';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\n\n/** @public */\nexport type RelatedEntitiesCardProps<T extends Entity> = {\n  variant?: InfoCardVariants;\n  title: string;\n  columns: TableColumn<T>[];\n  entityKind?: string;\n  relationType: string;\n  emptyMessage: string;\n  emptyHelpLink: string;\n  asRenderableEntities: (entities: Entity[]) => T[];\n  tableOptions?: TableOptions;\n};\n\n/**\n * A low level card component that can be used as a building block for more\n * specific cards.\n *\n * @remarks\n *\n * You probably want to make a dedicated component for your needs, which renders\n * this card as its implementation with some of the props set to the appropriate\n * values.\n *\n * @public\n */\nexport const RelatedEntitiesCard = <T extends Entity>(\n  props: RelatedEntitiesCardProps<T>,\n) => {\n  const {\n    variant = 'gridItem',\n    title,\n    columns,\n    entityKind,\n    relationType,\n    emptyMessage,\n    emptyHelpLink,\n    asRenderableEntities,\n    tableOptions = {},\n  } = props;\n  const { t } = useTranslationRef(catalogTranslationRef);\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: relationType,\n    kind: entityKind,\n  });\n\n  if (loading) {\n    return (\n      <InfoCard variant={variant} title={title}>\n        <Progress />\n      </InfoCard>\n    );\n  }\n\n  if (error) {\n    return (\n      <InfoCard variant={variant} title={title}>\n        <ResponseErrorPanel error={error} />\n      </InfoCard>\n    );\n  }\n\n  return (\n    <EntityTable\n      title={title}\n      variant={variant}\n      emptyContent={\n        <div style={{ textAlign: 'center' }}>\n          <Typography variant=\"body1\">{emptyMessage}</Typography>\n          <Typography variant=\"body2\">\n            <Link to={emptyHelpLink} externalLinkIcon>\n              {t('relatedEntitiesCard.emptyHelpLinkTitle')}\n            </Link>\n          </Typography>\n        </div>\n      }\n      columns={columns}\n      entities={asRenderableEntities(entities || [])}\n      tableOptions={tableOptions}\n    />\n  );\n};\n\nRelatedEntitiesCard.componentEntityColumns = componentEntityColumns;\nRelatedEntitiesCard.componentEntityHelpLink = componentEntityHelpLink;\nRelatedEntitiesCard.asComponentEntities = asComponentEntities;\nRelatedEntitiesCard.resourceEntityColumns = resourceEntityColumns;\nRelatedEntitiesCard.resourceEntityHelpLink = resourceEntityHelpLink;\nRelatedEntitiesCard.asResourceEntities = asResourceEntities;\nRelatedEntitiesCard.systemEntityColumns = systemEntityColumns;\nRelatedEntitiesCard.systemEntityHelpLink = systemEntityHelpLink;\nRelatedEntitiesCard.asSystemEntities = asSystemEntities;\nRelatedEntitiesCard.domainEntityColums = domainEntityColumns;\nRelatedEntitiesCard.domainEntityHelpLink = domainEntityHelpLink;\nRelatedEntitiesCard.asDomainEntities = asDomainEntities;\n"],"names":[],"mappings":";;;;;;;;AA2Ea,MAAA,mBAAA,GAAsB,CACjC,KACG,KAAA;AACH,EAAM,MAAA;AAAA,IACJ,OAAU,GAAA,UAAA;AAAA,IACV,KAAA;AAAA,IACA,OAAA;AAAA,IACA,UAAA;AAAA,IACA,YAAA;AAAA,IACA,YAAA;AAAA,IACA,aAAA;AAAA,IACA,oBAAA;AAAA,IACA,eAAe;AAAC,GACd,GAAA,KAAA;AACJ,EAAA,MAAM,EAAE,CAAA,EAAM,GAAA,iBAAA,CAAkB,qBAAqB,CAAA;AACrD,EAAM,MAAA,EAAE,MAAO,EAAA,GAAI,SAAU,EAAA;AAC7B,EAAA,MAAM,EAAE,QAAU,EAAA,OAAA,EAAS,KAAM,EAAA,GAAI,mBAAmB,MAAQ,EAAA;AAAA,IAC9D,IAAM,EAAA,YAAA;AAAA,IACN,IAAM,EAAA;AAAA,GACP,CAAA;AAED,EAAA,IAAI,OAAS,EAAA;AACX,IAAA,2CACG,QAAS,EAAA,EAAA,OAAA,EAAkB,KAC1B,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,cAAS,CACZ,CAAA;AAAA;AAIJ,EAAA,IAAI,KAAO,EAAA;AACT,IAAA,2CACG,QAAS,EAAA,EAAA,OAAA,EAAkB,yBACzB,KAAA,CAAA,aAAA,CAAA,kBAAA,EAAA,EAAmB,OAAc,CACpC,CAAA;AAAA;AAIJ,EACE,uBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,WAAA;AAAA,IAAA;AAAA,MACC,KAAA;AAAA,MACA,OAAA;AAAA,MACA,YACE,kBAAA,KAAA,CAAA,aAAA,CAAC,KAAI,EAAA,EAAA,KAAA,EAAO,EAAE,SAAA,EAAW,QAAS,EAAA,EAAA,kBAC/B,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,OAAQ,EAAA,OAAA,EAAA,EAAS,YAAa,CAAA,kBACzC,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,OAAQ,EAAA,OAAA,EAAA,kBACjB,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,EAAK,EAAI,EAAA,aAAA,EAAe,gBAAgB,EAAA,IAAA,EAAA,EACtC,CAAE,CAAA,wCAAwC,CAC7C,CACF,CACF,CAAA;AAAA,MAEF,OAAA;AAAA,MACA,QAAU,EAAA,oBAAA,CAAqB,QAAY,IAAA,EAAE,CAAA;AAAA,MAC7C;AAAA;AAAA,GACF;AAEJ;AAEA,mBAAA,CAAoB,sBAAyB,GAAA,sBAAA;AAC7C,mBAAA,CAAoB,uBAA0B,GAAA,uBAAA;AAC9C,mBAAA,CAAoB,mBAAsB,GAAA,mBAAA;AAC1C,mBAAA,CAAoB,qBAAwB,GAAA,qBAAA;AAC5C,mBAAA,CAAoB,sBAAyB,GAAA,sBAAA;AAC7C,mBAAA,CAAoB,kBAAqB,GAAA,kBAAA;AACzC,mBAAA,CAAoB,mBAAsB,GAAA,mBAAA;AAC1C,mBAAA,CAAoB,oBAAuB,GAAA,oBAAA;AAC3C,mBAAA,CAAoB,gBAAmB,GAAA,gBAAA;AACvC,mBAAA,CAAoB,kBAAqB,GAAA,mBAAA;AACzC,mBAAA,CAAoB,oBAAuB,GAAA,oBAAA;AAC3C,mBAAA,CAAoB,gBAAmB,GAAA,gBAAA;;;;"}