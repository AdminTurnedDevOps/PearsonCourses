{"version":3,"file":"DefaultCatalogPage.esm.js","sources":["../../../src/components/CatalogPage/DefaultCatalogPage.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Content,\n  ContentHeader,\n  CreateButton,\n  PageWithHeader,\n  SupportButton,\n  TableColumn,\n  TableProps,\n} from '@backstage/core-components';\nimport { configApiRef, useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport {\n  CatalogFilterLayout,\n  DefaultFilters,\n  EntityListPagination,\n  EntityListProvider,\n  EntityOwnerPickerProps,\n  UserListFilterKind,\n} from '@backstage/plugin-catalog-react';\nimport React, { ReactNode } from 'react';\nimport { createComponentRouteRef } from '../../routes';\nimport { CatalogTable, CatalogTableRow } from '../CatalogTable';\nimport { catalogTranslationRef } from '../../alpha/translation';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\nimport { CatalogTableColumnsFunc } from '../CatalogTable/types';\nimport { catalogEntityCreatePermission } from '@backstage/plugin-catalog-common/alpha';\nimport { usePermission } from '@backstage/plugin-permission-react';\n\n/** @internal */\nexport type BaseCatalogPageProps = {\n  filters: ReactNode;\n  content?: ReactNode;\n  pagination?: EntityListPagination;\n};\n\n/** @internal */\nexport function BaseCatalogPage(props: BaseCatalogPageProps) {\n  const { filters, content = <CatalogTable />, pagination } = props;\n  const orgName =\n    useApi(configApiRef).getOptionalString('organization.name') ?? 'Backstage';\n  const createComponentLink = useRouteRef(createComponentRouteRef);\n  const { t } = useTranslationRef(catalogTranslationRef);\n  const { allowed } = usePermission({\n    permission: catalogEntityCreatePermission,\n  });\n\n  return (\n    <PageWithHeader title={t('indexPage.title', { orgName })} themeId=\"home\">\n      <Content>\n        <ContentHeader title=\"\">\n          {allowed && (\n            <CreateButton\n              title={t('indexPage.createButtonTitle')}\n              to={createComponentLink && createComponentLink()}\n            />\n          )}\n          <SupportButton>{t('indexPage.supportButtonContent')}</SupportButton>\n        </ContentHeader>\n        <EntityListProvider pagination={pagination}>\n          <CatalogFilterLayout>\n            <CatalogFilterLayout.Filters>{filters}</CatalogFilterLayout.Filters>\n            <CatalogFilterLayout.Content>{content}</CatalogFilterLayout.Content>\n          </CatalogFilterLayout>\n        </EntityListProvider>\n      </Content>\n    </PageWithHeader>\n  );\n}\n\n/**\n * Props for root catalog pages.\n *\n * @public\n */\nexport interface DefaultCatalogPageProps {\n  initiallySelectedFilter?: UserListFilterKind;\n  columns?: TableColumn<CatalogTableRow>[] | CatalogTableColumnsFunc;\n  actions?: TableProps<CatalogTableRow>['actions'];\n  initialKind?: string;\n  tableOptions?: TableProps<CatalogTableRow>['options'];\n  emptyContent?: ReactNode;\n  ownerPickerMode?: EntityOwnerPickerProps['mode'];\n  filters?: ReactNode;\n  initiallySelectedNamespaces?: string[];\n  pagination?: EntityListPagination;\n}\n\nexport function DefaultCatalogPage(props: DefaultCatalogPageProps) {\n  const {\n    columns,\n    actions,\n    initiallySelectedFilter = 'owned',\n    initialKind = 'component',\n    tableOptions = {},\n    emptyContent,\n    pagination,\n    ownerPickerMode,\n    filters,\n    initiallySelectedNamespaces,\n  } = props;\n\n  return (\n    <BaseCatalogPage\n      filters={\n        filters ?? (\n          <DefaultFilters\n            initialKind={initialKind}\n            initiallySelectedFilter={initiallySelectedFilter}\n            ownerPickerMode={ownerPickerMode}\n            initiallySelectedNamespaces={initiallySelectedNamespaces}\n          />\n        )\n      }\n      content={\n        <CatalogTable\n          columns={columns}\n          actions={actions}\n          tableOptions={tableOptions}\n          emptyContent={emptyContent}\n        />\n      }\n      pagination={pagination}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAmDO,SAAS,gBAAgB,KAA6B,EAAA;AAC3D,EAAA,MAAM,EAAE,OAAS,EAAA,OAAA,uCAAW,YAAa,EAAA,IAAA,CAAA,EAAI,YAAe,GAAA,KAAA;AAC5D,EAAA,MAAM,UACJ,MAAO,CAAA,YAAY,CAAE,CAAA,iBAAA,CAAkB,mBAAmB,CAAK,IAAA,WAAA;AACjE,EAAM,MAAA,mBAAA,GAAsB,YAAY,uBAAuB,CAAA;AAC/D,EAAA,MAAM,EAAE,CAAA,EAAM,GAAA,iBAAA,CAAkB,qBAAqB,CAAA;AACrD,EAAM,MAAA,EAAE,OAAQ,EAAA,GAAI,aAAc,CAAA;AAAA,IAChC,UAAY,EAAA;AAAA,GACb,CAAA;AAED,EAAA,2CACG,cAAe,EAAA,EAAA,KAAA,EAAO,CAAE,CAAA,iBAAA,EAAmB,EAAE,OAAQ,EAAC,CAAG,EAAA,OAAA,EAAQ,0BAC/D,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,IAAA,sCACE,aAAc,EAAA,EAAA,KAAA,EAAM,MAClB,OACC,oBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,YAAA;AAAA,IAAA;AAAA,MACC,KAAA,EAAO,EAAE,6BAA6B,CAAA;AAAA,MACtC,EAAA,EAAI,uBAAuB,mBAAoB;AAAA;AAAA,GACjD,kBAED,KAAA,CAAA,aAAA,CAAA,aAAA,EAAA,IAAA,EAAe,CAAE,CAAA,gCAAgC,CAAE,CACtD,CACA,kBAAA,KAAA,CAAA,aAAA,CAAC,kBAAmB,EAAA,EAAA,UAAA,EAAA,kBACjB,KAAA,CAAA,aAAA,CAAA,mBAAA,EAAA,IAAA,kBACE,KAAA,CAAA,aAAA,CAAA,mBAAA,CAAoB,OAApB,EAAA,IAAA,EAA6B,OAAQ,CAAA,kBACrC,KAAA,CAAA,aAAA,CAAA,mBAAA,CAAoB,OAApB,EAAA,IAAA,EAA6B,OAAQ,CACxC,CACF,CACF,CACF,CAAA;AAEJ;AAoBO,SAAS,mBAAmB,KAAgC,EAAA;AACjE,EAAM,MAAA;AAAA,IACJ,OAAA;AAAA,IACA,OAAA;AAAA,IACA,uBAA0B,GAAA,OAAA;AAAA,IAC1B,WAAc,GAAA,WAAA;AAAA,IACd,eAAe,EAAC;AAAA,IAChB,YAAA;AAAA,IACA,UAAA;AAAA,IACA,eAAA;AAAA,IACA,OAAA;AAAA,IACA;AAAA,GACE,GAAA,KAAA;AAEJ,EACE,uBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,eAAA;AAAA,IAAA;AAAA,MACC,SACE,OACE,oBAAA,KAAA,CAAA,aAAA;AAAA,QAAC,cAAA;AAAA,QAAA;AAAA,UACC,WAAA;AAAA,UACA,uBAAA;AAAA,UACA,eAAA;AAAA,UACA;AAAA;AAAA,OACF;AAAA,MAGJ,OACE,kBAAA,KAAA,CAAA,aAAA;AAAA,QAAC,YAAA;AAAA,QAAA;AAAA,UACC,OAAA;AAAA,UACA,OAAA;AAAA,UACA,YAAA;AAAA,UACA;AAAA;AAAA,OACF;AAAA,MAEF;AAAA;AAAA,GACF;AAEJ;;;;"}