{"version":3,"file":"defaultCatalogCollatorEntityTransformer.cjs.js","sources":["../../src/collators/defaultCatalogCollatorEntityTransformer.ts"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity, isGroupEntity, isUserEntity } from '@backstage/catalog-model';\nimport { CatalogCollatorEntityTransformer } from './CatalogCollatorEntityTransformer';\n\nconst getDocumentText = (entity: Entity): string => {\n  const documentTexts: string[] = [];\n  if (entity.metadata.description) {\n    documentTexts.push(entity.metadata.description);\n  }\n\n  if (isUserEntity(entity) || isGroupEntity(entity)) {\n    if (entity.spec?.profile?.displayName) {\n      documentTexts.push(entity.spec.profile.displayName);\n    }\n  }\n\n  if (isUserEntity(entity)) {\n    if (entity.spec?.profile?.email) {\n      documentTexts.push(entity.spec.profile.email);\n    }\n  }\n\n  return documentTexts.join(' : ');\n};\n\n/** @public */\nexport const defaultCatalogCollatorEntityTransformer: CatalogCollatorEntityTransformer =\n  (entity: Entity) => {\n    return {\n      title: entity.metadata.title ?? entity.metadata.name,\n      text: getDocumentText(entity),\n      componentType: entity.spec?.type?.toString() || 'other',\n      type: entity.spec?.type?.toString() || 'other',\n      namespace: entity.metadata.namespace || 'default',\n      kind: entity.kind,\n      lifecycle: (entity.spec?.lifecycle as string) || '',\n      owner: (entity.spec?.owner as string) || '',\n    };\n  };\n"],"names":["isUserEntity","isGroupEntity"],"mappings":";;;;AAmBA,MAAM,eAAA,GAAkB,CAAC,MAA2B,KAAA;AAClD,EAAA,MAAM,gBAA0B,EAAC;AACjC,EAAI,IAAA,MAAA,CAAO,SAAS,WAAa,EAAA;AAC/B,IAAc,aAAA,CAAA,IAAA,CAAK,MAAO,CAAA,QAAA,CAAS,WAAW,CAAA;AAAA;AAGhD,EAAA,IAAIA,yBAAa,CAAA,MAAM,CAAK,IAAAC,0BAAA,CAAc,MAAM,CAAG,EAAA;AACjD,IAAI,IAAA,MAAA,CAAO,IAAM,EAAA,OAAA,EAAS,WAAa,EAAA;AACrC,MAAA,aAAA,CAAc,IAAK,CAAA,MAAA,CAAO,IAAK,CAAA,OAAA,CAAQ,WAAW,CAAA;AAAA;AACpD;AAGF,EAAI,IAAAD,yBAAA,CAAa,MAAM,CAAG,EAAA;AACxB,IAAI,IAAA,MAAA,CAAO,IAAM,EAAA,OAAA,EAAS,KAAO,EAAA;AAC/B,MAAA,aAAA,CAAc,IAAK,CAAA,MAAA,CAAO,IAAK,CAAA,OAAA,CAAQ,KAAK,CAAA;AAAA;AAC9C;AAGF,EAAO,OAAA,aAAA,CAAc,KAAK,KAAK,CAAA;AACjC,CAAA;AAGa,MAAA,uCAAA,GACX,CAAC,MAAmB,KAAA;AAClB,EAAO,OAAA;AAAA,IACL,KAAO,EAAA,MAAA,CAAO,QAAS,CAAA,KAAA,IAAS,OAAO,QAAS,CAAA,IAAA;AAAA,IAChD,IAAA,EAAM,gBAAgB,MAAM,CAAA;AAAA,IAC5B,aAAe,EAAA,MAAA,CAAO,IAAM,EAAA,IAAA,EAAM,UAAc,IAAA,OAAA;AAAA,IAChD,IAAM,EAAA,MAAA,CAAO,IAAM,EAAA,IAAA,EAAM,UAAc,IAAA,OAAA;AAAA,IACvC,SAAA,EAAW,MAAO,CAAA,QAAA,CAAS,SAAa,IAAA,SAAA;AAAA,IACxC,MAAM,MAAO,CAAA,IAAA;AAAA,IACb,SAAA,EAAY,MAAO,CAAA,IAAA,EAAM,SAAwB,IAAA,EAAA;AAAA,IACjD,KAAA,EAAQ,MAAO,CAAA,IAAA,EAAM,KAAoB,IAAA;AAAA,GAC3C;AACF;;;;"}