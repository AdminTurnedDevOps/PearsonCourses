{"version":3,"file":"MultipleAnalyticsApi.esm.js","sources":["../../../../src/apis/implementations/AnalyticsApi/MultipleAnalyticsApi.ts"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { AnalyticsApi, AnalyticsEvent } from '@backstage/core-plugin-api';\n\n/**\n * An implementation of the AnalyticsApi that can be used to forward analytics\n * events to multiple concrete implementations.\n *\n * @public\n *\n * @example\n *\n * ```jsx\n * createApiFactory({\n *   api: analyticsApiRef,\n *   deps: { configApi: configApiRef, identityApi: identityApiRef, storageApi: storageApiRef },\n *   factory: ({ configApi, identityApi, storageApi }) =>\n *     MultipleAnalyticsApi.fromApis([\n *       VendorAnalyticsApi.fromConfig(configApi, { identityApi }),\n *       CustomAnalyticsApi.fromConfig(configApi, { identityApi, storageApi }),\n *     ]),\n * });\n * ```\n */\nexport class MultipleAnalyticsApi implements AnalyticsApi {\n  private constructor(private readonly actualApis: AnalyticsApi[]) {}\n\n  /**\n   * Create an AnalyticsApi implementation from an array of concrete\n   * implementations.\n   *\n   * @example\n   *\n   * ```jsx\n   * MultipleAnalyticsApi.fromApis([\n   *   SomeAnalyticsApi.fromConfig(configApi),\n   *   new CustomAnalyticsApi(),\n   * ]);\n   * ```\n   */\n  static fromApis(actualApis: AnalyticsApi[]) {\n    return new MultipleAnalyticsApi(actualApis);\n  }\n\n  /**\n   * Forward the event to all configured analytics API implementations.\n   */\n  captureEvent(event: AnalyticsEvent): void {\n    this.actualApis.forEach(analyticsApi => {\n      try {\n        analyticsApi.captureEvent(event);\n      } catch {\n        /* ignored */\n      }\n    });\n  }\n}\n"],"names":[],"mappings":"AAqCO,MAAM,oBAA6C,CAAA;AAAA,EAChD,YAA6B,UAA4B,EAAA;AAA5B,IAAA,IAAA,CAAA,UAAA,GAAA,UAAA;AAAA;AAA6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAelE,OAAO,SAAS,UAA4B,EAAA;AAC1C,IAAO,OAAA,IAAI,qBAAqB,UAAU,CAAA;AAAA;AAC5C;AAAA;AAAA;AAAA,EAKA,aAAa,KAA6B,EAAA;AACxC,IAAK,IAAA,CAAA,UAAA,CAAW,QAAQ,CAAgB,YAAA,KAAA;AACtC,MAAI,IAAA;AACF,QAAA,YAAA,CAAa,aAAa,KAAK,CAAA;AAAA,OACzB,CAAA,MAAA;AAAA;AAER,KACD,CAAA;AAAA;AAEL;;;;"}