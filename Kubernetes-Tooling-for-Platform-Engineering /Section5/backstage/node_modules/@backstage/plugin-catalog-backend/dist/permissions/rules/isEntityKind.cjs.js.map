{"version":3,"file":"isEntityKind.cjs.js","sources":["../../../src/permissions/rules/isEntityKind.ts"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RESOURCE_TYPE_CATALOG_ENTITY } from '@backstage/plugin-catalog-common/alpha';\nimport { z } from 'zod';\nimport { createCatalogPermissionRule } from './util';\n\n/**\n * A catalog {@link @backstage/plugin-permission-node#PermissionRule} which\n * filters for entities with a specified kind.\n * @alpha\n */\nexport const isEntityKind = createCatalogPermissionRule({\n  name: 'IS_ENTITY_KIND',\n  description: 'Allow entities matching a specified kind',\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY,\n  paramsSchema: z.object({\n    kinds: z\n      .array(z.string())\n      .describe('List of kinds to match at least one of'),\n  }),\n  apply(resource, { kinds }) {\n    const resourceKind = resource.kind.toLocaleLowerCase('en-US');\n    return kinds.some(kind => kind.toLocaleLowerCase('en-US') === resourceKind);\n  },\n  toQuery({ kinds }) {\n    return {\n      key: 'kind',\n      values: kinds.map(kind => kind.toLocaleLowerCase('en-US')),\n    };\n  },\n});\n"],"names":["createCatalogPermissionRule","RESOURCE_TYPE_CATALOG_ENTITY","z"],"mappings":";;;;;;AAyBO,MAAM,eAAeA,gCAA4B,CAAA;AAAA,EACtD,IAAM,EAAA,gBAAA;AAAA,EACN,WAAa,EAAA,0CAAA;AAAA,EACb,YAAc,EAAAC,kCAAA;AAAA,EACd,YAAA,EAAcC,MAAE,MAAO,CAAA;AAAA,IACrB,KAAA,EAAOA,MACJ,KAAM,CAAAA,KAAA,CAAE,QAAQ,CAAA,CAChB,SAAS,wCAAwC;AAAA,GACrD,CAAA;AAAA,EACD,KAAM,CAAA,QAAA,EAAU,EAAE,KAAA,EAAS,EAAA;AACzB,IAAA,MAAM,YAAe,GAAA,QAAA,CAAS,IAAK,CAAA,iBAAA,CAAkB,OAAO,CAAA;AAC5D,IAAA,OAAO,MAAM,IAAK,CAAA,CAAA,IAAA,KAAQ,KAAK,iBAAkB,CAAA,OAAO,MAAM,YAAY,CAAA;AAAA,GAC5E;AAAA,EACA,OAAA,CAAQ,EAAE,KAAA,EAAS,EAAA;AACjB,IAAO,OAAA;AAAA,MACL,GAAK,EAAA,MAAA;AAAA,MACL,QAAQ,KAAM,CAAA,GAAA,CAAI,UAAQ,IAAK,CAAA,iBAAA,CAAkB,OAAO,CAAC;AAAA,KAC3D;AAAA;AAEJ,CAAC;;;;"}