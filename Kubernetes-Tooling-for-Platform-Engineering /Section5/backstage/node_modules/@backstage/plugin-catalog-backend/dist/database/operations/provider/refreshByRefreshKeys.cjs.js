'use strict';

var util = require('../../util.cjs.js');

async function refreshByRefreshKeys(options) {
  const { tx, keys } = options;
  const hashedKeys = keys.map((k) => util.generateTargetKey(k));
  await tx("refresh_state").whereIn("entity_id", function selectEntityRefs(inner) {
    inner.whereIn("key", hashedKeys).select({
      entity_id: "refresh_keys.entity_id"
    }).from("refresh_keys");
  }).update({ next_update_at: tx.fn.now() });
}

exports.refreshByRefreshKeys = refreshByRefreshKeys;
//# sourceMappingURL=refreshByRefreshKeys.cjs.js.map
