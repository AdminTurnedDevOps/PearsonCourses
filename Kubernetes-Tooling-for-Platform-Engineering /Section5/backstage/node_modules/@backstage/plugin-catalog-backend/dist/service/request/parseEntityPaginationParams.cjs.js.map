{"version":3,"file":"parseEntityPaginationParams.cjs.js","sources":["../../../src/service/request/parseEntityPaginationParams.ts"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { InputError } from '@backstage/errors';\nimport { EntityPagination } from '../../catalog/types';\n\n/**\n * Parses the pagination related parameters out of a query, e.g.\n * /entities?offset=100&limit=10\n */\nexport function parseEntityPaginationParams({\n  limit,\n  offset,\n  after,\n}: {\n  offset?: number;\n  limit?: number;\n  after?: string;\n}): EntityPagination | undefined {\n  if (offset === undefined && limit === undefined && after === undefined) {\n    return undefined;\n  }\n\n  if (offset !== undefined && offset < 0) {\n    throw new InputError(`Invalid offset, must be zero or greater`);\n  }\n  if (limit !== undefined && limit <= 0) {\n    throw new InputError(`Invalid limit, must be greater than zero`);\n  }\n  if (after !== undefined && !after) {\n    throw new InputError(`Invalid after, must not be empty`);\n  }\n\n  return {\n    ...(offset !== undefined ? { offset } : {}),\n    ...(limit !== undefined ? { limit } : {}),\n    ...(after !== undefined ? { after } : {}),\n  };\n}\n"],"names":["InputError"],"mappings":";;;;AAuBO,SAAS,2BAA4B,CAAA;AAAA,EAC1C,KAAA;AAAA,EACA,MAAA;AAAA,EACA;AACF,CAIiC,EAAA;AAC/B,EAAA,IAAI,MAAW,KAAA,KAAA,CAAA,IAAa,KAAU,KAAA,KAAA,CAAA,IAAa,UAAU,KAAW,CAAA,EAAA;AACtE,IAAO,OAAA,KAAA,CAAA;AAAA;AAGT,EAAI,IAAA,MAAA,KAAW,KAAa,CAAA,IAAA,MAAA,GAAS,CAAG,EAAA;AACtC,IAAM,MAAA,IAAIA,kBAAW,CAAyC,uCAAA,CAAA,CAAA;AAAA;AAEhE,EAAI,IAAA,KAAA,KAAU,KAAa,CAAA,IAAA,KAAA,IAAS,CAAG,EAAA;AACrC,IAAM,MAAA,IAAIA,kBAAW,CAA0C,wCAAA,CAAA,CAAA;AAAA;AAEjE,EAAI,IAAA,KAAA,KAAU,KAAa,CAAA,IAAA,CAAC,KAAO,EAAA;AACjC,IAAM,MAAA,IAAIA,kBAAW,CAAkC,gCAAA,CAAA,CAAA;AAAA;AAGzD,EAAO,OAAA;AAAA,IACL,GAAI,MAAW,KAAA,KAAA,CAAA,GAAY,EAAE,MAAA,KAAW,EAAC;AAAA,IACzC,GAAI,KAAU,KAAA,KAAA,CAAA,GAAY,EAAE,KAAA,KAAU,EAAC;AAAA,IACvC,GAAI,KAAU,KAAA,KAAA,CAAA,GAAY,EAAE,KAAA,KAAU;AAAC,GACzC;AACF;;;;"}