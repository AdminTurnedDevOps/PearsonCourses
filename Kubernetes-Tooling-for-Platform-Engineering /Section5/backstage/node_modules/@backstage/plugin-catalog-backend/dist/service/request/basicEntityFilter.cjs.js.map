{"version":3,"file":"basicEntityFilter.cjs.js","sources":["../../../src/service/request/basicEntityFilter.ts"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  EntitiesSearchFilter,\n  EntityFilter,\n} from '@backstage/plugin-catalog-node';\n\n/**\n * Forms a full EntityFilter based on a single key-value(s) object.\n */\nexport function basicEntityFilter(\n  items: Record<string, string | string[]>,\n): EntityFilter {\n  const filtersByKey: Record<string, EntitiesSearchFilter> = {};\n\n  for (const [key, value] of Object.entries(items)) {\n    const values = [value].flat();\n\n    const f =\n      key in filtersByKey\n        ? filtersByKey[key]\n        : (filtersByKey[key] = { key, values: [] });\n\n    f.values!.push(...values);\n  }\n\n  return { anyOf: [{ allOf: Object.values(filtersByKey) }] };\n}\n"],"names":[],"mappings":";;AAwBO,SAAS,kBACd,KACc,EAAA;AACd,EAAA,MAAM,eAAqD,EAAC;AAE5D,EAAA,KAAA,MAAW,CAAC,GAAK,EAAA,KAAK,KAAK,MAAO,CAAA,OAAA,CAAQ,KAAK,CAAG,EAAA;AAChD,IAAA,MAAM,MAAS,GAAA,CAAC,KAAK,CAAA,CAAE,IAAK,EAAA;AAE5B,IAAA,MAAM,CACJ,GAAA,GAAA,IAAO,YACH,GAAA,YAAA,CAAa,GAAG,CAAA,GACf,YAAa,CAAA,GAAG,CAAI,GAAA,EAAE,GAAK,EAAA,MAAA,EAAQ,EAAG,EAAA;AAE7C,IAAE,CAAA,CAAA,MAAA,CAAQ,IAAK,CAAA,GAAG,MAAM,CAAA;AAAA;AAG1B,EAAO,OAAA,EAAE,KAAO,EAAA,CAAC,EAAE,KAAA,EAAO,OAAO,MAAO,CAAA,YAAY,CAAE,EAAC,CAAE,EAAA;AAC3D;;;;"}