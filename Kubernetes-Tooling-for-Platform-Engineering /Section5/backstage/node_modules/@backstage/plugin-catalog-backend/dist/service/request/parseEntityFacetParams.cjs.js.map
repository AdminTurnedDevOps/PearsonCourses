{"version":3,"file":"parseEntityFacetParams.cjs.js","sources":["../../../src/service/request/parseEntityFacetParams.ts"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { InputError } from '@backstage/errors';\nimport { parseStringsParam } from './common';\n\n/**\n * Parses the facets part of a facet query, like\n * /entity-facets?filter=metadata.namespace=default,kind=Component&facet=metadata.namespace\n */\nexport function parseEntityFacetParams(\n  params: Record<string, unknown>,\n): string[] {\n  // Each facet string is on the form a.b.c\n  const facetStrings = parseStringsParam(params.facet, 'facet');\n  if (facetStrings) {\n    const filtered = facetStrings.filter(Boolean);\n    if (filtered.length) {\n      return filtered;\n    }\n  }\n\n  throw new InputError('Missing facet parameter');\n}\n"],"names":["parseStringsParam","InputError"],"mappings":";;;;;AAuBO,SAAS,uBACd,MACU,EAAA;AAEV,EAAA,MAAM,YAAe,GAAAA,wBAAA,CAAkB,MAAO,CAAA,KAAA,EAAO,OAAO,CAAA;AAC5D,EAAA,IAAI,YAAc,EAAA;AAChB,IAAM,MAAA,QAAA,GAAW,YAAa,CAAA,MAAA,CAAO,OAAO,CAAA;AAC5C,IAAA,IAAI,SAAS,MAAQ,EAAA;AACnB,MAAO,OAAA,QAAA;AAAA;AACT;AAGF,EAAM,MAAA,IAAIC,kBAAW,yBAAyB,CAAA;AAChD;;;;"}