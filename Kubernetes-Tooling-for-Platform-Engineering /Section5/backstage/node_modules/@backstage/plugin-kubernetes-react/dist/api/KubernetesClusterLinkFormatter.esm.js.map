{"version":3,"file":"KubernetesClusterLinkFormatter.esm.js","sources":["../../src/api/KubernetesClusterLinkFormatter.ts"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  KubernetesClusterLinkFormatterApi,\n  FormatClusterLinkOptions,\n} from './types';\nimport { ClusterLinksFormatter } from '../types';\n\n/** @public */\nexport class KubernetesClusterLinkFormatter\n  implements KubernetesClusterLinkFormatterApi\n{\n  private readonly formatters: Record<string, ClusterLinksFormatter>;\n  private readonly defaultFormatterName: string;\n\n  constructor(options: {\n    formatters: Record<string, ClusterLinksFormatter>;\n    defaultFormatterName: string;\n  }) {\n    this.formatters = options.formatters;\n    this.defaultFormatterName = options.defaultFormatterName;\n  }\n  async formatClusterLink(options: FormatClusterLinkOptions) {\n    if (!options.dashboardUrl && !options.dashboardParameters) {\n      return undefined;\n    }\n    if (options.dashboardUrl && !options.object) {\n      return options.dashboardUrl;\n    }\n    const app = options.dashboardApp ?? this.defaultFormatterName;\n    const formatter = this.formatters[app];\n    if (!formatter) {\n      throw new Error(`Could not find Kubernetes dashboard app named '${app}'`);\n    }\n    const url = await formatter.formatClusterLink({\n      dashboardUrl: options.dashboardUrl\n        ? new URL(options.dashboardUrl)\n        : undefined,\n      dashboardParameters: options.dashboardParameters,\n      object: options.object,\n      kind: options.kind,\n    });\n    return url.toString();\n  }\n}\n"],"names":[],"mappings":"AAuBO,MAAM,8BAEb,CAAA;AAAA,EACmB,UAAA;AAAA,EACA,oBAAA;AAAA,EAEjB,YAAY,OAGT,EAAA;AACD,IAAA,IAAA,CAAK,aAAa,OAAQ,CAAA,UAAA;AAC1B,IAAA,IAAA,CAAK,uBAAuB,OAAQ,CAAA,oBAAA;AAAA;AACtC,EACA,MAAM,kBAAkB,OAAmC,EAAA;AACzD,IAAA,IAAI,CAAC,OAAA,CAAQ,YAAgB,IAAA,CAAC,QAAQ,mBAAqB,EAAA;AACzD,MAAO,OAAA,KAAA,CAAA;AAAA;AAET,IAAA,IAAI,OAAQ,CAAA,YAAA,IAAgB,CAAC,OAAA,CAAQ,MAAQ,EAAA;AAC3C,MAAA,OAAO,OAAQ,CAAA,YAAA;AAAA;AAEjB,IAAM,MAAA,GAAA,GAAM,OAAQ,CAAA,YAAA,IAAgB,IAAK,CAAA,oBAAA;AACzC,IAAM,MAAA,SAAA,GAAY,IAAK,CAAA,UAAA,CAAW,GAAG,CAAA;AACrC,IAAA,IAAI,CAAC,SAAW,EAAA;AACd,MAAA,MAAM,IAAI,KAAA,CAAM,CAAkD,+CAAA,EAAA,GAAG,CAAG,CAAA,CAAA,CAAA;AAAA;AAE1E,IAAM,MAAA,GAAA,GAAM,MAAM,SAAA,CAAU,iBAAkB,CAAA;AAAA,MAC5C,cAAc,OAAQ,CAAA,YAAA,GAClB,IAAI,GAAI,CAAA,OAAA,CAAQ,YAAY,CAC5B,GAAA,KAAA,CAAA;AAAA,MACJ,qBAAqB,OAAQ,CAAA,mBAAA;AAAA,MAC7B,QAAQ,OAAQ,CAAA,MAAA;AAAA,MAChB,MAAM,OAAQ,CAAA;AAAA,KACf,CAAA;AACD,IAAA,OAAO,IAAI,QAAS,EAAA;AAAA;AAExB;;;;"}