{"version":3,"file":"humanize.esm.js","sources":["../../../src/components/EntityRefLink/humanize.ts"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Entity,\n  CompoundEntityRef,\n  DEFAULT_NAMESPACE,\n} from '@backstage/catalog-model';\nimport get from 'lodash/get';\n\n/**\n * @param defaultNamespace - if set to false then namespace is never omitted,\n * if set to string which matches namespace of entity then omitted\n *\n * @public\n **/\nexport function humanizeEntityRef(\n  entityRef: Entity | CompoundEntityRef,\n  opts?: {\n    defaultKind?: string;\n    defaultNamespace?: string | false;\n  },\n) {\n  const defaultKind = opts?.defaultKind;\n  let kind;\n  let namespace;\n  let name;\n\n  if ('metadata' in entityRef) {\n    kind = entityRef.kind;\n    namespace = entityRef.metadata.namespace;\n    name = entityRef.metadata.name;\n  } else {\n    kind = entityRef.kind;\n    namespace = entityRef.namespace;\n    name = entityRef.name;\n  }\n\n  if (namespace === undefined || namespace === '') {\n    namespace = DEFAULT_NAMESPACE;\n  }\n  if (opts?.defaultNamespace !== undefined) {\n    if (opts?.defaultNamespace === namespace) {\n      namespace = undefined;\n    }\n  } else if (namespace === DEFAULT_NAMESPACE) {\n    namespace = undefined;\n  }\n\n  kind = kind.toLocaleLowerCase('en-US');\n  kind =\n    defaultKind && defaultKind.toLocaleLowerCase('en-US') === kind\n      ? undefined\n      : kind;\n  return `${kind ? `${kind}:` : ''}${namespace ? `${namespace}/` : ''}${name}`;\n}\n\n/**\n * Convert an entity to its more readable name if available.\n *\n * If an entity is either User or Group, this will be its `spec.profile.displayName`.\n * Otherwise, this is `metadata.title`.\n *\n * If neither of those are found or populated, fallback to `defaultName`.\n *\n * @param entity - Entity to convert.\n * @param defaultName - If entity readable name is not available, `defaultName` will be returned.\n * @returns Readable name, defaults to `defaultName`.\n *\n */\nexport function humanizeEntity(entity: Entity, defaultName: string) {\n  for (const path of ['spec.profile.displayName', 'metadata.title']) {\n    const value = get(entity, path);\n    if (value && typeof value === 'string') {\n      return value;\n    }\n  }\n  return defaultName;\n}\n"],"names":[],"mappings":";;;AA6BgB,SAAA,iBAAA,CACd,WACA,IAIA,EAAA;AACA,EAAA,MAAM,cAAc,IAAM,EAAA,WAAA;AAC1B,EAAI,IAAA,IAAA;AACJ,EAAI,IAAA,SAAA;AACJ,EAAI,IAAA,IAAA;AAEJ,EAAA,IAAI,cAAc,SAAW,EAAA;AAC3B,IAAA,IAAA,GAAO,SAAU,CAAA,IAAA;AACjB,IAAA,SAAA,GAAY,UAAU,QAAS,CAAA,SAAA;AAC/B,IAAA,IAAA,GAAO,UAAU,QAAS,CAAA,IAAA;AAAA,GACrB,MAAA;AACL,IAAA,IAAA,GAAO,SAAU,CAAA,IAAA;AACjB,IAAA,SAAA,GAAY,SAAU,CAAA,SAAA;AACtB,IAAA,IAAA,GAAO,SAAU,CAAA,IAAA;AAAA;AAGnB,EAAI,IAAA,SAAA,KAAc,KAAa,CAAA,IAAA,SAAA,KAAc,EAAI,EAAA;AAC/C,IAAY,SAAA,GAAA,iBAAA;AAAA;AAEd,EAAI,IAAA,IAAA,EAAM,qBAAqB,KAAW,CAAA,EAAA;AACxC,IAAI,IAAA,IAAA,EAAM,qBAAqB,SAAW,EAAA;AACxC,MAAY,SAAA,GAAA,KAAA,CAAA;AAAA;AACd,GACF,MAAA,IAAW,cAAc,iBAAmB,EAAA;AAC1C,IAAY,SAAA,GAAA,KAAA,CAAA;AAAA;AAGd,EAAO,IAAA,GAAA,IAAA,CAAK,kBAAkB,OAAO,CAAA;AACrC,EAAA,IAAA,GACE,eAAe,WAAY,CAAA,iBAAA,CAAkB,OAAO,CAAA,KAAM,OACtD,KACA,CAAA,GAAA,IAAA;AACN,EAAA,OAAO,CAAG,EAAA,IAAA,GAAO,CAAG,EAAA,IAAI,CAAM,CAAA,CAAA,GAAA,EAAE,CAAG,EAAA,SAAA,GAAY,CAAG,EAAA,SAAS,CAAM,CAAA,CAAA,GAAA,EAAE,GAAG,IAAI,CAAA,CAAA;AAC5E;AAegB,SAAA,cAAA,CAAe,QAAgB,WAAqB,EAAA;AAClE,EAAA,KAAA,MAAW,IAAQ,IAAA,CAAC,0BAA4B,EAAA,gBAAgB,CAAG,EAAA;AACjE,IAAM,MAAA,KAAA,GAAQ,GAAI,CAAA,MAAA,EAAQ,IAAI,CAAA;AAC9B,IAAI,IAAA,KAAA,IAAS,OAAO,KAAA,KAAU,QAAU,EAAA;AACtC,MAAO,OAAA,KAAA;AAAA;AACT;AAEF,EAAO,OAAA,WAAA;AACT;;;;"}