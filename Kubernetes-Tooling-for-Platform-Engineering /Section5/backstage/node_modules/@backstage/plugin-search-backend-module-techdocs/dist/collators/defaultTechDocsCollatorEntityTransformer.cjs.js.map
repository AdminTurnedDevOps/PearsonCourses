{"version":3,"file":"defaultTechDocsCollatorEntityTransformer.cjs.js","sources":["../../src/collators/defaultTechDocsCollatorEntityTransformer.ts"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity, isGroupEntity, isUserEntity } from '@backstage/catalog-model';\nimport { TechDocsCollatorEntityTransformer } from './TechDocsCollatorEntityTransformer';\n\nconst getDocumentText = (entity: Entity): string => {\n  const documentTexts: string[] = [];\n  documentTexts.push(entity.metadata.description || '');\n\n  if (isUserEntity(entity) || isGroupEntity(entity)) {\n    if (entity.spec?.profile?.displayName) {\n      documentTexts.push(entity.spec.profile.displayName);\n    }\n  }\n\n  if (isUserEntity(entity)) {\n    if (entity.spec?.profile?.email) {\n      documentTexts.push(entity.spec.profile.email);\n    }\n  }\n\n  return documentTexts.join(' : ');\n};\n\n/** @public */\nexport const defaultTechDocsCollatorEntityTransformer: TechDocsCollatorEntityTransformer =\n  (entity: Entity) => {\n    return {\n      kind: entity.kind,\n      namespace: entity.metadata.namespace || 'default',\n      annotations: entity.metadata.annotations || '',\n      name: entity.metadata.name || '',\n      title: entity.metadata.title || '',\n      text: getDocumentText(entity),\n      componentType: entity.spec?.type?.toString() || 'other',\n      type: entity.spec?.type?.toString() || 'other',\n      lifecycle: (entity.spec?.lifecycle as string) || '',\n      owner: (entity.spec?.owner as string) || '',\n      path: '',\n    };\n  };\n"],"names":["isUserEntity","isGroupEntity"],"mappings":";;;;AAmBA,MAAM,eAAA,GAAkB,CAAC,MAA2B,KAAA;AAClD,EAAA,MAAM,gBAA0B,EAAC;AACjC,EAAA,aAAA,CAAc,IAAK,CAAA,MAAA,CAAO,QAAS,CAAA,WAAA,IAAe,EAAE,CAAA;AAEpD,EAAA,IAAIA,yBAAa,CAAA,MAAM,CAAK,IAAAC,0BAAA,CAAc,MAAM,CAAG,EAAA;AACjD,IAAI,IAAA,MAAA,CAAO,IAAM,EAAA,OAAA,EAAS,WAAa,EAAA;AACrC,MAAA,aAAA,CAAc,IAAK,CAAA,MAAA,CAAO,IAAK,CAAA,OAAA,CAAQ,WAAW,CAAA;AAAA;AACpD;AAGF,EAAI,IAAAD,yBAAA,CAAa,MAAM,CAAG,EAAA;AACxB,IAAI,IAAA,MAAA,CAAO,IAAM,EAAA,OAAA,EAAS,KAAO,EAAA;AAC/B,MAAA,aAAA,CAAc,IAAK,CAAA,MAAA,CAAO,IAAK,CAAA,OAAA,CAAQ,KAAK,CAAA;AAAA;AAC9C;AAGF,EAAO,OAAA,aAAA,CAAc,KAAK,KAAK,CAAA;AACjC,CAAA;AAGa,MAAA,wCAAA,GACX,CAAC,MAAmB,KAAA;AAClB,EAAO,OAAA;AAAA,IACL,MAAM,MAAO,CAAA,IAAA;AAAA,IACb,SAAA,EAAW,MAAO,CAAA,QAAA,CAAS,SAAa,IAAA,SAAA;AAAA,IACxC,WAAA,EAAa,MAAO,CAAA,QAAA,CAAS,WAAe,IAAA,EAAA;AAAA,IAC5C,IAAA,EAAM,MAAO,CAAA,QAAA,CAAS,IAAQ,IAAA,EAAA;AAAA,IAC9B,KAAA,EAAO,MAAO,CAAA,QAAA,CAAS,KAAS,IAAA,EAAA;AAAA,IAChC,IAAA,EAAM,gBAAgB,MAAM,CAAA;AAAA,IAC5B,aAAe,EAAA,MAAA,CAAO,IAAM,EAAA,IAAA,EAAM,UAAc,IAAA,OAAA;AAAA,IAChD,IAAM,EAAA,MAAA,CAAO,IAAM,EAAA,IAAA,EAAM,UAAc,IAAA,OAAA;AAAA,IACvC,SAAA,EAAY,MAAO,CAAA,IAAA,EAAM,SAAwB,IAAA,EAAA;AAAA,IACjD,KAAA,EAAQ,MAAO,CAAA,IAAA,EAAM,KAAoB,IAAA,EAAA;AAAA,IACzC,IAAM,EAAA;AAAA,GACR;AACF;;;;"}