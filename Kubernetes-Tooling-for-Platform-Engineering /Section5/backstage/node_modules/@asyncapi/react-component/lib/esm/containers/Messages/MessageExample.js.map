{"version":3,"file":"MessageExample.js","sourceRoot":"","sources":["../../../../src/containers/Messages/MessageExample.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MessageInterface, SchemaInterface } from '@asyncapi/parser';\n\nimport { CollapseButton, JSONSnippet } from '../../components';\nimport { MessageHelpers } from '../../helpers/message';\nimport { MessageExample as MessageExampleType } from '../../types';\nimport { useConfig } from '../../contexts';\n\ninterface Props {\n  message: MessageInterface;\n}\n\nexport const MessageExample: React.FunctionComponent<Props> = ({ message }) => {\n  if (!message) {\n    return null;\n  }\n\n  const payload = message.payload();\n  const headers = message.headers();\n\n  return (\n    <div className=\"bg-gray-800 px-8 py-4 mt-4 -mx-8 2xl:mx-0 2xl:px-4 2xl:rounded examples\">\n      <h4 className=\"text-white text-lg\">Examples</h4>\n      {payload && (\n        <Example\n          type=\"Payload\"\n          schema={payload}\n          examples={MessageHelpers.getPayloadExamples(message)}\n        />\n      )}\n      {headers && (\n        <Example\n          type=\"Headers\"\n          schema={headers}\n          examples={MessageHelpers.getHeadersExamples(message)}\n        />\n      )}\n    </div>\n  );\n};\n\ninterface ExampleProps {\n  type: 'Payload' | 'Headers';\n  schema: SchemaInterface;\n  examples?: MessageExampleType[];\n}\n\nexport const Example: React.FunctionComponent<ExampleProps> = ({\n  type = 'Payload',\n  schema,\n  examples = [],\n}) => {\n  const config = useConfig();\n  const [expanded, setExpanded] = useState(\n    config?.expand?.messageExamples ?? false,\n  );\n\n  useEffect(() => {\n    setExpanded(config?.expand?.messageExamples ?? false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [config.expand]);\n\n  return (\n    <div className=\"mt-4\">\n      <div>\n        <CollapseButton\n          onClick={() => setExpanded((prev) => !prev)}\n          expanded={expanded}\n          chevronProps={{\n            className: 'fill-current text-gray-200',\n          }}\n        >\n          <span className=\"inline-block w-20 py-0.5 mr-1 text-gray-200 text-sm border text-center rounded focus:outline-none\">\n            {type}\n          </span>\n        </CollapseButton>\n      </div>\n      <div className={expanded ? 'block' : 'hidden'}>\n        {examples && examples.length > 0 ? (\n          <ul>\n            {examples.map((example, idx) => (\n              <li className=\"mt-4\" key={idx}>\n                <h5 className=\"text-xs font-bold text-gray-500\">\n                  {example.name\n                    ? `#${idx + 1} Example - ${example.name}`\n                    : `#${idx + 1} Example`}\n                </h5>\n                {example.summary && (\n                  <p className=\"text-xs font-bold text-gray-500\">\n                    {example.summary}\n                  </p>\n                )}\n                <div className=\"mt-1\">\n                  <JSONSnippet\n                    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                    snippet={MessageHelpers.sanitizeExample(example.example)}\n                  />\n                </div>\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <div className=\"mt-4\">\n            <JSONSnippet\n              // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n              snippet={MessageHelpers.generateExample(schema.json())}\n            />\n            <h6 className=\"text-xs font-bold text-gray-600 italic mt-2\">\n              This example has been generated automatically.\n            </h6>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n"]}