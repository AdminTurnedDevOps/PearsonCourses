class t{setAnimation(t){this.animation=t,null==t||t.finished.then((()=>this.clearAnimation())).catch((()=>{}))}clearAnimation(){this.animation=this.generator=void 0}}const e=new WeakMap;function i(t){return e.has(t)||e.set(t,{transforms:[],values:new Map}),e.get(t)}const a=(t,e,i)=>Math.min(Math.max(i,t),e),n={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},s=t=>"number"==typeof t,r=t=>"object"==typeof t&&Boolean(t.createAnimation),o=t=>Array.isArray(t)&&!s(t[0]);const l=(t,e,i)=>-i*t+i*e+t,h=()=>{},c=t=>t,u=(t,e,i)=>e-t==0?1:(i-t)/(e-t);function d(t,e){const i=t[t.length-1];for(let a=1;a<=e;a++){const n=u(0,e,a);t.push(l(i,1,n))}}function f(t,e=function(t){const e=[0];return d(e,t-1),e}(t.length),i=c){const n=t.length,s=n-e.length;return s>0&&d(e,s),s=>{let r=0;for(;r<n-2&&!(s<e[r+1]);r++);let h=a(0,1,u(e[r],e[r+1],s));const c=function(t,e){return o(t)?t[((t,e,i)=>{const a=e-t;return((i-t)%a+a)%a+t})(0,t.length,e)]:t}(i,r);return h=c(h),l(t[r],t[r+1],h)}}const p=t=>1e3*t,m=["","X","Y","Z"],y={x:"translateX",y:"translateY",z:"translateZ"},g={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},v={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:g,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:c},skew:g},T=new Map,S=t=>`--motion-${t}`,w=["x","y","z"];["translate","scale","rotate","skew"].forEach((t=>{m.forEach((e=>{w.push(t+e),T.set(S(t+e),v[t])}))}));const D=(t,e)=>w.indexOf(t)-w.indexOf(e),A=new Set(w),x=t=>A.has(t),k=t=>t.sort(D).reduce(b,"").trim(),b=(t,e)=>`${t} ${e}(var(${S(e)}))`,M=t=>t.startsWith("--"),O=new Set;const R=(t,e,i)=>(((1-3*i+3*e)*t+(3*i-6*e))*t+3*e)*t;function P(t,e,i,a){if(t===e&&i===a)return c;const n=e=>function(t,e,i,a,n){let s,r,o=0;do{r=e+(i-e)/2,s=R(r,a,n)-t,s>0?i=r:e=r}while(Math.abs(s)>1e-7&&++o<12);return r}(e,0,1,t,i);return t=>0===t||1===t?t:R(n(t),e,a)}const V={ease:P(.25,.1,.25,1),"ease-in":P(.42,0,1,1),"ease-in-out":P(.42,0,.58,1),"ease-out":P(0,0,.58,1)},$=/\((.*?)\)/;function j(t){if("function"==typeof t)return t;if(Array.isArray(t))return P(...t);if(V[t])return V[t];if(t.startsWith("steps")){const e=$.exec(t);if(e){const t=e[1].split(",");return((t,e="end")=>i=>{const n=(i="end"===e?Math.min(i,.999):Math.max(i,.001))*t,s="end"===e?Math.floor(n):Math.ceil(n);return a(0,1,s/t)})(parseFloat(t[0]),t[1].trim())}}return c}class q{constructor(t,e=[0,1],{easing:i,duration:a=n.duration,delay:s=n.delay,endDelay:l=n.endDelay,repeat:h=n.repeat,offset:u,direction:d="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=c,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise(((t,e)=>{this.resolve=t,this.reject=e})),i=i||n.easing,r(i)){const t=i.createAnimation(e,(()=>"0"),!0);i=t.easing,void 0!==t.keyframes&&(e=t.keyframes),void 0!==t.duration&&(a=t.duration)}this.repeat=h,this.easing=o(i)?c:j(i),this.updateDuration(a);const p=f(e,u,o(i)?i.map(j):c);this.tick=e=>{var i;let a=0;a=void 0!==this.pauseTime?this.pauseTime:(e-this.startTime)*this.rate,this.t=a,a/=1e3,a=Math.max(a-s,0),"finished"===this.playState&&void 0===this.pauseTime&&(a=this.totalDuration);const n=a/this.duration;let r=Math.floor(n),o=n%1;!o&&n>=1&&(o=1),1===o&&r--;const h=r%2;("reverse"===d||"alternate"===d&&h||"alternate-reverse"===d&&!h)&&(o=1-o);const c=a>=this.totalDuration?1:Math.min(o,1),u=p(this.easing(c));t(u);void 0===this.pauseTime&&("finished"===this.playState||a>=this.totalDuration+l)?(this.playState="finished",null===(i=this.resolve)||void 0===i||i.call(this,u)):"idle"!==this.playState&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",void 0!==this.pauseTime?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",void 0!==this.frameRequestId&&cancelAnimationFrame(this.frameRequestId),null===(t=this.reject)||void 0===t||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){void 0!==this.pauseTime||0===this.rate?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}const E=t=>(t=>Array.isArray(t)&&s(t[0]))(t)?F(t):t,F=([t,e,i,a])=>`cubic-bezier(${t}, ${e}, ${i}, ${a})`,U=t=>document.createElement("div").animate(t,{duration:.001}),C={cssRegisterProperty:()=>"undefined"!=typeof CSS&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{U({opacity:[1]})}catch(t){return!1}return!0},finished:()=>Boolean(U({opacity:[0,1]}).finished)},I={},_={};for(const t in C)_[t]=()=>(void 0===I[t]&&(I[t]=C[t]()),I[t]);function W(t){return y[t]&&(t=y[t]),x(t)?S(t):t}const z=(t,e)=>{e=W(e);let i=M(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!i&&0!==i){const t=T.get(e);t&&(i=t.initialValue)}return i},B=(t,e,i)=>{e=W(e),M(e)?t.style.setProperty(e,i):t.style[e]=i};function K(e,a,l,c={}){const u=window.__MOTION_DEV_TOOLS_RECORD,d=!1!==c.record&&u;let f,{duration:m=n.duration,delay:g=n.delay,endDelay:v=n.endDelay,repeat:S=n.repeat,easing:w=n.easing,direction:D,offset:A,allowWebkitAcceleration:b=!1}=c;const R=i(e);let P=_.waapi();const V=x(a);V&&((t,e)=>{y[e]&&(e=y[e]);const{transforms:a}=i(t);var n,s;s=e,-1===(n=a).indexOf(s)&&n.push(s),t.style.transform=k(a)})(e,a);const $=W(a),j=function(e,i){return e.has(i)||e.set(i,new t),e.get(i)}(R.values,$),F=T.get($);return function(t,e=!0){if(t&&"finished"!==t.playState)try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch(t){}}(j.animation,!(r(w)&&j.generator)&&!1!==c.record),()=>{const t=()=>{var t,i;return null!==(i=null!==(t=z(e,$))&&void 0!==t?t:null==F?void 0:F.initialValue)&&void 0!==i?i:0};let i=function(t,e){for(let i=0;i<t.length;i++)null===t[i]&&(t[i]=i?t[i-1]:e());return t}((t=>Array.isArray(t)?t:[t])(l),t);if(r(w)){const e=w.createAnimation(i,t,V,$,j);w=e.easing,void 0!==e.keyframes&&(i=e.keyframes),void 0!==e.duration&&(m=e.duration)}if(M($)&&(_.cssRegisterProperty()?function(t){if(!O.has(t)){O.add(t);try{const{syntax:e,initialValue:i}=T.has(t)?T.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:i})}catch(t){}}}($):P=!1),P){F&&(i=i.map((t=>s(t)?F.toDefaultUnit(t):t))),1!==i.length||_.partialKeyframes()&&!d||i.unshift(t());const a={delay:p(g),duration:p(m),endDelay:p(v),easing:o(w)?void 0:E(w),direction:D,iterations:S+1,fill:"both"};f=e.animate({[$]:i,offset:A,easing:o(w)?w.map(E):void 0},a),f.finished||(f.finished=new Promise(((t,e)=>{f.onfinish=t,f.oncancel=e})));const n=i[i.length-1];f.finished.then((()=>{B(e,$,n),f.cancel()})).catch(h),b||(f.playbackRate=1.000001)}else if(V){i=i.map((t=>"string"==typeof t?parseFloat(t):t)),1===i.length&&i.unshift(parseFloat(t()));f=new q((t=>{F&&(t=F.toDefaultUnit(t)),B(e,$,t)}),i,Object.assign(Object.assign({},c),{duration:m,easing:w}))}else{const t=i[i.length-1];B(e,$,F&&s(t)?F.toDefaultUnit(t):t)}return d&&u(e,a,i,{duration:m,delay:g,easing:w,repeat:S,offset:A},"motion-one"),j.setAnimation(f),f}}export{K as animateStyle};
