"use strict";var R=Object.defineProperty;var f=(L,y)=>R(L,"name",{value:y,configurable:!0});const F=require("./codemirror.cjs2.js");var T={exports:{}},E;function I(){return E||(E=1,function(L,y){(function(o){o(F.requireCodemirror())})(function(o){var S=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),g=o.Pos,B={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function A(t){return t&&t.bracketRegex||/[(){}[\]]/}f(A,"bracketRegex");function b(t,r,e){var s=t.getLineHandle(r.line),n=r.ch-1,h=e&&e.afterCursor;h==null&&(h=/(^| )cm-fat-cursor($| )/.test(t.getWrapperElement().className));var l=A(e),u=!h&&n>=0&&l.test(s.text.charAt(n))&&B[s.text.charAt(n)]||l.test(s.text.charAt(n+1))&&B[s.text.charAt(++n)];if(!u)return null;var a=u.charAt(1)==">"?1:-1;if(e&&e.strict&&a>0!=(n==r.ch))return null;var k=t.getTokenTypeAt(g(r.line,n+1)),i=H(t,g(r.line,n+(a>0?1:0)),a,k,e);return i==null?null:{from:g(r.line,n),to:i&&i.pos,match:i&&i.ch==u.charAt(0),forward:a>0}}f(b,"findMatchingBracket");function H(t,r,e,s,n){for(var h=n&&n.maxScanLineLength||1e4,l=n&&n.maxScanLines||1e3,u=[],a=A(n),k=e>0?Math.min(r.line+l,t.lastLine()+1):Math.max(t.firstLine()-1,r.line-l),i=r.line;i!=k;i+=e){var c=t.getLine(i);if(c){var v=e>0?0:c.length-1,q=e>0?c.length:-1;if(!(c.length>h))for(i==r.line&&(v=r.ch-(e<0?1:0));v!=q;v+=e){var d=c.charAt(v);if(a.test(d)&&(s===void 0||(t.getTokenTypeAt(g(i,v+1))||"")==(s||""))){var m=B[d];if(m&&m.charAt(1)==">"==e>0)u.push(d);else if(u.length)u.pop();else return{pos:g(i,v),ch:d}}}}}return i-e==(e>0?t.lastLine():t.firstLine())?!1:null}f(H,"scanForBracket");function M(t,r,e){for(var s=t.state.matchBrackets.maxHighlightLineLength||1e3,n=e&&e.highlightNonMatching,h=[],l=t.listSelections(),u=0;u<l.length;u++){var a=l[u].empty()&&b(t,l[u].head,e);if(a&&(a.match||n!==!1)&&t.getLine(a.from.line).length<=s){var k=a.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";h.push(t.markText(a.from,g(a.from.line,a.from.ch+1),{className:k})),a.to&&t.getLine(a.to.line).length<=s&&h.push(t.markText(a.to,g(a.to.line,a.to.ch+1),{className:k}))}}if(h.length){S&&t.state.focused&&t.focus();var i=f(function(){t.operation(function(){for(var c=0;c<h.length;c++)h[c].clear()})},"clear");if(r)setTimeout(i,800);else return i}}f(M,"matchBrackets");function x(t){t.operation(function(){t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null),t.state.matchBrackets.currentlyHighlighted=M(t,!1,t.state.matchBrackets)})}f(x,"doMatchBrackets");function p(t){t.state.matchBrackets&&t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null)}f(p,"clearHighlighted"),o.defineOption("matchBrackets",!1,function(t,r,e){e&&e!=o.Init&&(t.off("cursorActivity",x),t.off("focus",x),t.off("blur",p),p(t)),r&&(t.state.matchBrackets=typeof r=="object"?r:{},t.on("cursorActivity",x),t.on("focus",x),t.on("blur",p))}),o.defineExtension("matchBrackets",function(){M(this,!0)}),o.defineExtension("findMatchingBracket",function(t,r,e){return(e||typeof r=="boolean")&&(e?(e.strict=r,r=e):r=r?{strict:!0}:null),b(this,t,r)}),o.defineExtension("scanForBracket",function(t,r,e,s){return H(this,t,r,e,s)})})}()),T.exports}f(I,"requireMatchbrackets");exports.requireMatchbrackets=I;
//# sourceMappingURL=matchbrackets.cjs2.js.map
