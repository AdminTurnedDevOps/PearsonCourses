"use strict";var z=Object.defineProperty;var u=(O,k)=>z(O,"name",{value:k,configurable:!0});const G=require("./codemirror.cjs2.js");function L(O,k){for(var i=0;i<k.length;i++){const s=k[i];if(typeof s!="string"&&!Array.isArray(s)){for(const p in s)if(p!=="default"&&!(p in O)){const w=Object.getOwnPropertyDescriptor(s,p);w&&Object.defineProperty(O,p,w.get?w:{enumerable:!0,get:()=>s[p]})}}}return Object.freeze(Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}))}u(L,"_mergeNamespaces");var j={exports:{}},U={exports:{}},N;function q(){return N||(N=1,function(O,k){(function(i){i(G.requireCodemirror())})(function(i){function s(t,o,f,a){if(f&&f.call){var g=f;f=null}else var g=v(t,f,"rangeFinder");typeof o=="number"&&(o=i.Pos(o,0));var y=v(t,f,"minFoldSize");function x(l){var r=g(t,o);if(!r||r.to.line-r.from.line<y)return null;if(a==="fold")return r;for(var c=t.findMarksAt(r.from),h=0;h<c.length;++h)if(c[h].__isFold){if(!l)return null;r.cleared=!0,c[h].clear()}return r}u(x,"getRange");var d=x(!0);if(v(t,f,"scanUp"))for(;!d&&o.line>t.firstLine();)o=i.Pos(o.line-1,0),d=x(!1);if(!(!d||d.cleared||a==="unfold")){var e=p(t,f,d);i.on(e,"mousedown",function(l){n.clear(),i.e_preventDefault(l)});var n=t.markText(d.from,d.to,{replacedWith:e,clearOnEnter:v(t,f,"clearOnEnter"),__isFold:!0});n.on("clear",function(l,r){i.signal(t,"unfold",t,l,r)}),i.signal(t,"fold",t,d.from,d.to)}}u(s,"doFold");function p(t,o,f){var a=v(t,o,"widget");if(typeof a=="function"&&(a=a(f.from,f.to)),typeof a=="string"){var g=document.createTextNode(a);a=document.createElement("span"),a.appendChild(g),a.className="CodeMirror-foldmarker"}else a&&(a=a.cloneNode(!0));return a}u(p,"makeWidget"),i.newFoldFunction=function(t,o){return function(f,a){s(f,a,{rangeFinder:t,widget:o})}},i.defineExtension("foldCode",function(t,o,f){s(this,t,o,f)}),i.defineExtension("isFolded",function(t){for(var o=this.findMarksAt(t),f=0;f<o.length;++f)if(o[f].__isFold)return!0}),i.commands.toggleFold=function(t){t.foldCode(t.getCursor())},i.commands.fold=function(t){t.foldCode(t.getCursor(),null,"fold")},i.commands.unfold=function(t){t.foldCode(t.getCursor(),{scanUp:!1},"unfold")},i.commands.foldAll=function(t){t.operation(function(){for(var o=t.firstLine(),f=t.lastLine();o<=f;o++)t.foldCode(i.Pos(o,0),{scanUp:!1},"fold")})},i.commands.unfoldAll=function(t){t.operation(function(){for(var o=t.firstLine(),f=t.lastLine();o<=f;o++)t.foldCode(i.Pos(o,0),{scanUp:!1},"unfold")})},i.registerHelper("fold","combine",function(){var t=Array.prototype.slice.call(arguments,0);return function(o,f){for(var a=0;a<t.length;++a){var g=t[a](o,f);if(g)return g}}}),i.registerHelper("fold","auto",function(t,o){for(var f=t.getHelpers(o,"fold"),a=0;a<f.length;a++){var g=f[a](t,o);if(g)return g}});var w={rangeFinder:i.fold.auto,widget:"â†”",minFoldSize:0,scanUp:!1,clearOnEnter:!0};i.defineOption("foldOptions",null);function v(t,o,f){if(o&&o[f]!==void 0)return o[f];var a=t.options.foldOptions;return a&&a[f]!==void 0?a[f]:w[f]}u(v,"getOption"),i.defineExtension("foldOption",function(t,o){return v(this,t,o)})})}()),U.exports}u(q,"requireFoldcode");(function(O,k){(function(i){i(G.requireCodemirror(),q())})(function(i){i.defineOption("foldGutter",!1,function(e,n,l){l&&l!=i.Init&&(e.clearGutter(e.state.foldGutter.options.gutter),e.state.foldGutter=null,e.off("gutterClick",g),e.off("changes",y),e.off("viewportChange",x),e.off("fold",d),e.off("unfold",d),e.off("swapDoc",y)),n&&(e.state.foldGutter=new p(w(n)),a(e),e.on("gutterClick",g),e.on("changes",y),e.on("viewportChange",x),e.on("fold",d),e.on("unfold",d),e.on("swapDoc",y))});var s=i.Pos;function p(e){this.options=e,this.from=this.to=0}u(p,"State");function w(e){return e===!0&&(e={}),e.gutter==null&&(e.gutter="CodeMirror-foldgutter"),e.indicatorOpen==null&&(e.indicatorOpen="CodeMirror-foldgutter-open"),e.indicatorFolded==null&&(e.indicatorFolded="CodeMirror-foldgutter-folded"),e}u(w,"parseOptions");function v(e,n){for(var l=e.findMarks(s(n,0),s(n+1,0)),r=0;r<l.length;++r)if(l[r].__isFold){var c=l[r].find(-1);if(c&&c.line===n)return l[r]}}u(v,"isFolded");function t(e){if(typeof e=="string"){var n=document.createElement("div");return n.className=e+" CodeMirror-guttermarker-subtle",n}else return e.cloneNode(!0)}u(t,"marker");function o(e,n,l){var r=e.state.foldGutter.options,c=n-1,h=e.foldOption(r,"minFoldSize"),E=e.foldOption(r,"rangeFinder"),S=typeof r.indicatorFolded=="string"&&f(r.indicatorFolded),T=typeof r.indicatorOpen=="string"&&f(r.indicatorOpen);e.eachLine(n,l,function(b){++c;var _=null,F=b.gutterMarkers;if(F&&(F=F[r.gutter]),v(e,c)){if(S&&F&&S.test(F.className))return;_=t(r.indicatorFolded)}else{var A=s(c,0),m=E&&E(e,A);if(m&&m.to.line-m.from.line>=h){if(T&&F&&T.test(F.className))return;_=t(r.indicatorOpen)}}!_&&!F||e.setGutterMarker(b,r.gutter,_)})}u(o,"updateFoldInfo");function f(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}u(f,"classTest");function a(e){var n=e.getViewport(),l=e.state.foldGutter;l&&(e.operation(function(){o(e,n.from,n.to)}),l.from=n.from,l.to=n.to)}u(a,"updateInViewport");function g(e,n,l){var r=e.state.foldGutter;if(r){var c=r.options;if(l==c.gutter){var h=v(e,n);h?h.clear():e.foldCode(s(n,0),c)}}}u(g,"onGutterClick");function y(e){var n=e.state.foldGutter;if(n){var l=n.options;n.from=n.to=0,clearTimeout(n.changeUpdate),n.changeUpdate=setTimeout(function(){a(e)},l.foldOnChangeTimeSpan||600)}}u(y,"onChange");function x(e){var n=e.state.foldGutter;if(n){var l=n.options;clearTimeout(n.changeUpdate),n.changeUpdate=setTimeout(function(){var r=e.getViewport();n.from==n.to||r.from-n.to>20||n.from-r.to>20?a(e):e.operation(function(){r.from<n.from&&(o(e,r.from,n.from),n.from=r.from),r.to>n.to&&(o(e,n.to,r.to),n.to=r.to)})},l.updateViewportTimeSpan||400)}}u(x,"onViewportChange");function d(e,n){var l=e.state.foldGutter;if(l){var r=n.line;r>=l.from&&r<l.to&&o(e,r,r+1)}}u(d,"onFold")})})();var P=j.exports;const C=G.getDefaultExportFromCjs(P),D=L({__proto__:null,default:C},[P]);exports.foldgutter=D;
//# sourceMappingURL=foldgutter.cjs.js.map
