{"version":3,"file":"info.cjs.js","sources":["../../codemirror-graphql/esm/info.js"],"sourcesContent":["import { GraphQLList, GraphQLNonNull, } from 'graphql';\nimport CodeMirror from 'codemirror';\nimport getTypeInfo from './utils/getTypeInfo';\nimport { getArgumentReference, getDirectiveReference, getEnumValueReference, getFieldReference, getTypeReference, } from './utils/SchemaReference';\nimport './utils/info-addon';\nCodeMirror.registerHelper('info', 'graphql', (token, options) => {\n    if (!options.schema || !token.state) {\n        return;\n    }\n    const { kind, step } = token.state;\n    const typeInfo = getTypeInfo(options.schema, token.state);\n    if ((kind === 'Field' && step === 0 && typeInfo.fieldDef) ||\n        (kind === 'AliasedField' && step === 2 && typeInfo.fieldDef)) {\n        const header = document.createElement('div');\n        header.className = 'CodeMirror-info-header';\n        renderField(header, typeInfo, options);\n        const into = document.createElement('div');\n        into.append(header);\n        renderDescription(into, options, typeInfo.fieldDef);\n        return into;\n    }\n    if (kind === 'Directive' && step === 1 && typeInfo.directiveDef) {\n        const header = document.createElement('div');\n        header.className = 'CodeMirror-info-header';\n        renderDirective(header, typeInfo, options);\n        const into = document.createElement('div');\n        into.append(header);\n        renderDescription(into, options, typeInfo.directiveDef);\n        return into;\n    }\n    if (kind === 'Argument' && step === 0 && typeInfo.argDef) {\n        const header = document.createElement('div');\n        header.className = 'CodeMirror-info-header';\n        renderArg(header, typeInfo, options);\n        const into = document.createElement('div');\n        into.append(header);\n        renderDescription(into, options, typeInfo.argDef);\n        return into;\n    }\n    if (kind === 'EnumValue' &&\n        typeInfo.enumValue &&\n        typeInfo.enumValue.description) {\n        const header = document.createElement('div');\n        header.className = 'CodeMirror-info-header';\n        renderEnumValue(header, typeInfo, options);\n        const into = document.createElement('div');\n        into.append(header);\n        renderDescription(into, options, typeInfo.enumValue);\n        return into;\n    }\n    if (kind === 'NamedType' &&\n        typeInfo.type &&\n        typeInfo.type.description) {\n        const header = document.createElement('div');\n        header.className = 'CodeMirror-info-header';\n        renderType(header, typeInfo, options, typeInfo.type);\n        const into = document.createElement('div');\n        into.append(header);\n        renderDescription(into, options, typeInfo.type);\n        return into;\n    }\n});\nfunction renderField(into, typeInfo, options) {\n    renderQualifiedField(into, typeInfo, options);\n    renderTypeAnnotation(into, typeInfo, options, typeInfo.type);\n}\nfunction renderQualifiedField(into, typeInfo, options) {\n    var _a;\n    const fieldName = ((_a = typeInfo.fieldDef) === null || _a === void 0 ? void 0 : _a.name) || '';\n    text(into, fieldName, 'field-name', options, getFieldReference(typeInfo));\n}\nfunction renderDirective(into, typeInfo, options) {\n    var _a;\n    const name = '@' + (((_a = typeInfo.directiveDef) === null || _a === void 0 ? void 0 : _a.name) || '');\n    text(into, name, 'directive-name', options, getDirectiveReference(typeInfo));\n}\nfunction renderArg(into, typeInfo, options) {\n    var _a;\n    const name = ((_a = typeInfo.argDef) === null || _a === void 0 ? void 0 : _a.name) || '';\n    text(into, name, 'arg-name', options, getArgumentReference(typeInfo));\n    renderTypeAnnotation(into, typeInfo, options, typeInfo.inputType);\n}\nfunction renderEnumValue(into, typeInfo, options) {\n    var _a;\n    const name = ((_a = typeInfo.enumValue) === null || _a === void 0 ? void 0 : _a.name) || '';\n    renderType(into, typeInfo, options, typeInfo.inputType);\n    text(into, '.');\n    text(into, name, 'enum-value', options, getEnumValueReference(typeInfo));\n}\nfunction renderTypeAnnotation(into, typeInfo, options, t) {\n    const typeSpan = document.createElement('span');\n    typeSpan.className = 'type-name-pill';\n    if (t instanceof GraphQLNonNull) {\n        renderType(typeSpan, typeInfo, options, t.ofType);\n        text(typeSpan, '!');\n    }\n    else if (t instanceof GraphQLList) {\n        text(typeSpan, '[');\n        renderType(typeSpan, typeInfo, options, t.ofType);\n        text(typeSpan, ']');\n    }\n    else {\n        text(typeSpan, (t === null || t === void 0 ? void 0 : t.name) || '', 'type-name', options, getTypeReference(typeInfo, t));\n    }\n    into.append(typeSpan);\n}\nfunction renderType(into, typeInfo, options, t) {\n    if (t instanceof GraphQLNonNull) {\n        renderType(into, typeInfo, options, t.ofType);\n        text(into, '!');\n    }\n    else if (t instanceof GraphQLList) {\n        text(into, '[');\n        renderType(into, typeInfo, options, t.ofType);\n        text(into, ']');\n    }\n    else {\n        text(into, (t === null || t === void 0 ? void 0 : t.name) || '', 'type-name', options, getTypeReference(typeInfo, t));\n    }\n}\nfunction renderDescription(into, options, def) {\n    const { description } = def;\n    if (description) {\n        const descriptionDiv = document.createElement('div');\n        descriptionDiv.className = 'info-description';\n        if (options.renderDescription) {\n            descriptionDiv.innerHTML = options.renderDescription(description);\n        }\n        else {\n            descriptionDiv.append(document.createTextNode(description));\n        }\n        into.append(descriptionDiv);\n    }\n    renderDeprecation(into, options, def);\n}\nfunction renderDeprecation(into, options, def) {\n    const reason = def.deprecationReason;\n    if (reason) {\n        const deprecationDiv = document.createElement('div');\n        deprecationDiv.className = 'info-deprecation';\n        into.append(deprecationDiv);\n        const label = document.createElement('span');\n        label.className = 'info-deprecation-label';\n        label.append(document.createTextNode('Deprecated'));\n        deprecationDiv.append(label);\n        const reasonDiv = document.createElement('div');\n        reasonDiv.className = 'info-deprecation-reason';\n        if (options.renderDescription) {\n            reasonDiv.innerHTML = options.renderDescription(reason);\n        }\n        else {\n            reasonDiv.append(document.createTextNode(reason));\n        }\n        deprecationDiv.append(reasonDiv);\n    }\n}\nfunction text(into, content, className = '', options = { onClick: null }, ref = null) {\n    if (className) {\n        const { onClick } = options;\n        let node;\n        if (onClick) {\n            node = document.createElement('a');\n            node.href = 'javascript:void 0';\n            node.addEventListener('click', (e) => {\n                e.preventDefault();\n                onClick(ref, e);\n            });\n        }\n        else {\n            node = document.createElement('span');\n        }\n        node.className = className;\n        node.append(document.createTextNode(content));\n        into.append(node);\n    }\n    else {\n        into.append(document.createTextNode(content));\n    }\n}\n//# sourceMappingURL=info.js.map"],"names":["CodeMirror","token","options","kind","step","typeInfo","getTypeInfo","header","renderField","into","renderDescription","renderDirective","renderArg","renderEnumValue","renderType","renderQualifiedField","renderTypeAnnotation","__name","_a","fieldName","text","getFieldReference","name","getDirectiveReference","getArgumentReference","getEnumValueReference","t","typeSpan","GraphQLNonNull","GraphQLList","getTypeReference","def","description","descriptionDiv","renderDeprecation","reason","deprecationDiv","label","reasonDiv","content","className","ref","onClick","node","e"],"mappings":"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"}