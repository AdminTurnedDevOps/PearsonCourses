"use strict";var V=Object.defineProperty;var t=(e,n)=>V(e,"name",{value:n,configurable:!0});const I=require("./codemirror.cjs.js"),b=require("graphql");require("./codemirror.cjs2.js");function C(e){d=e,E=e.length,s=u=N=-1,o(),y();const n=q();return p("EOF"),n}t(C,"jsonParse");let d,E,s,u,N,r,l;function q(){const e=s,n=[];if(p("{"),!x("}")){do n.push(M());while(x(","));p("}")}return{kind:"Object",start:e,end:N,members:n}}t(q,"parseObj");function M(){const e=s,n=l==="String"?G():null;p("String"),p(":");const i=B();return{kind:"Member",start:e,end:N,key:n,value:i}}t(M,"parseMember");function v(){const e=s,n=[];if(p("["),!x("]")){do n.push(B());while(x(","));p("]")}return{kind:"Array",start:e,end:N,values:n}}t(v,"parseArr");function B(){switch(l){case"[":return v();case"{":return q();case"String":case"Number":case"Boolean":case"Null":const e=G();return y(),e}p("Value")}t(B,"parseVal");function G(){return{kind:l,start:s,end:u,value:JSON.parse(d.slice(s,u))}}t(G,"curToken");function p(e){if(l===e){y();return}let n;if(l==="EOF")n="[end of file]";else if(u-s>1)n="`"+d.slice(s,u)+"`";else{const i=d.slice(s).match(/^.+?\b/);n="`"+(i?i[0]:d[s])+"`"}throw k(`Expected ${e} but found ${n}.`)}t(p,"expect");class j extends Error{constructor(n,i){super(n),this.position=i}}t(j,"JSONSyntaxError");function k(e){return new j(e,{start:s,end:u})}t(k,"syntaxError");function x(e){if(l===e)return y(),!0}t(x,"skip");function o(){return u<E&&(u++,r=u===E?0:d.charCodeAt(u)),r}t(o,"ch");function y(){for(N=u;r===9||r===10||r===13||r===32;)o();if(r===0){l="EOF";return}switch(s=u,r){case 34:return l="String",D();case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return l="Number",H();case 102:if(d.slice(s,s+5)!=="false")break;u+=4,o(),l="Boolean";return;case 110:if(d.slice(s,s+4)!=="null")break;u+=3,o(),l="Null";return;case 116:if(d.slice(s,s+4)!=="true")break;u+=3,o(),l="Boolean";return}l=d[s],o()}t(y,"lex");function D(){for(o();r!==34&&r>31;)if(r===92)switch(r=o(),r){case 34:case 47:case 92:case 98:case 102:case 110:case 114:case 116:o();break;case 117:o(),w(),w(),w(),w();break;default:throw k("Bad character escape sequence.")}else{if(u===E)throw k("Unterminated string.");o()}if(r===34){o();return}throw k("Unterminated string.")}t(D,"readString");function w(){if(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102)return o();throw k("Expected hexadecimal digit.")}t(w,"readHex");function H(){r===45&&o(),r===48?o():$(),r===46&&(o(),$()),(r===69||r===101)&&(r=o(),(r===43||r===45)&&o(),$())}t(H,"readNumber");function $(){if(r<48||r>57)throw k("Expected decimal digit.");do o();while(r>=48&&r<=57)}t($,"readDigits");I.CodeMirror.registerHelper("lint","graphql-variables",(e,n,i)=>{if(!e)return[];let f;try{f=C(e)}catch(c){if(c instanceof j)return[F(i,c.position,c.message)];throw c}const{variableToType:a}=n;return a?U(i,a,f):[]});function U(e,n,i){var f;const a=[];for(const c of i.members)if(c){const h=(f=c.key)===null||f===void 0?void 0:f.value,m=n[h];if(m)for(const[O,Q]of g(m,c.value))a.push(F(e,O,Q));else a.push(F(e,c.key,`Variable "$${h}" does not appear in any GraphQL query.`))}return a}t(U,"validateVariables");function g(e,n){if(!e||!n)return[];if(e instanceof b.GraphQLNonNull)return n.kind==="Null"?[[n,`Type "${e}" is non-nullable and cannot be null.`]]:g(e.ofType,n);if(n.kind==="Null")return[];if(e instanceof b.GraphQLList){const i=e.ofType;if(n.kind==="Array"){const f=n.values||[];return L(f,a=>g(i,a))}return g(i,n)}if(e instanceof b.GraphQLInputObjectType){if(n.kind!=="Object")return[[n,`Type "${e}" must be an Object.`]];const i=Object.create(null),f=L(n.members,a=>{var c;const h=(c=a==null?void 0:a.key)===null||c===void 0?void 0:c.value;i[h]=!0;const m=e.getFields()[h];if(!m)return[[a.key,`Type "${e}" does not have a field "${h}".`]];const O=m?m.type:void 0;return g(O,a.value)});for(const a of Object.keys(e.getFields())){const c=e.getFields()[a];!i[a]&&c.type instanceof b.GraphQLNonNull&&!c.defaultValue&&f.push([n,`Object of type "${e}" is missing required field "${a}".`])}return f}return e.name==="Boolean"&&n.kind!=="Boolean"||e.name==="String"&&n.kind!=="String"||e.name==="ID"&&n.kind!=="Number"&&n.kind!=="String"||e.name==="Float"&&n.kind!=="Number"||e.name==="Int"&&(n.kind!=="Number"||(n.value|0)!==n.value)?[[n,`Expected value of type "${e}".`]]:(e instanceof b.GraphQLEnumType||e instanceof b.GraphQLScalarType)&&(n.kind!=="String"&&n.kind!=="Number"&&n.kind!=="Boolean"&&n.kind!=="Null"||_(e.parseValue(n.value)))?[[n,`Expected value of type "${e}".`]]:[]}t(g,"validateValue");function F(e,n,i){return{message:i,severity:"error",type:"validation",from:e.posFromIndex(n.start),to:e.posFromIndex(n.end)}}t(F,"lintError");function _(e){return e==null||e!==e}t(_,"isNullish");function L(e,n){return Array.prototype.concat.apply([],e.map(n))}t(L,"mapCat");
//# sourceMappingURL=lint.cjs3.js.map
