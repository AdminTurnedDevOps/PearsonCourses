{"version":3,"file":"hint.cjs.js","sources":["../../codemirror-graphql/esm/hint.js"],"sourcesContent":["import CodeMirror from 'codemirror';\nimport 'codemirror/addon/hint/show-hint';\nimport { getAutocompleteSuggestions, Position } from 'graphql-language-service';\nCodeMirror.registerHelper('hint', 'graphql', (editor, options) => {\n    const { schema, externalFragments, autocompleteOptions } = options;\n    if (!schema) {\n        return;\n    }\n    const cur = editor.getCursor();\n    const token = editor.getTokenAt(cur);\n    const tokenStart = token.type !== null && /\"|\\w/.test(token.string[0])\n        ? token.start\n        : token.end;\n    const position = new Position(cur.line, tokenStart);\n    const rawResults = getAutocompleteSuggestions(schema, editor.getValue(), position, token, externalFragments, autocompleteOptions);\n    const results = {\n        list: rawResults.map(item => {\n            var _a;\n            return ({\n                text: (_a = item === null || item === void 0 ? void 0 : item.rawInsert) !== null && _a !== void 0 ? _a : item.label,\n                type: item.type,\n                description: item.documentation,\n                isDeprecated: item.isDeprecated,\n                deprecationReason: item.deprecationReason,\n            });\n        }),\n        from: { line: cur.line, ch: tokenStart },\n        to: { line: cur.line, ch: token.end },\n    };\n    if ((results === null || results === void 0 ? void 0 : results.list) && results.list.length > 0) {\n        results.from = CodeMirror.Pos(results.from.line, results.from.ch);\n        results.to = CodeMirror.Pos(results.to.line, results.to.ch);\n        CodeMirror.signal(editor, 'hasCompletion', editor, results, token);\n    }\n    return results;\n});\n//# sourceMappingURL=hint.js.map"],"names":["CodeMirror","Position","getAutocompleteSuggestions"],"mappings":";;;;AAGAA,WAAU,WAAC,eAAe,QAAQ,WAAW,CAAC,QAAQ,YAAY;AAC9D,QAAM,EAAE,QAAQ,mBAAmB,oBAAmB,IAAK;AAC3D,MAAI,CAAC,QAAQ;AACT;AAAA,EACH;AACD,QAAM,MAAM,OAAO;AACnB,QAAM,QAAQ,OAAO,WAAW,GAAG;AACnC,QAAM,aAAa,MAAM,SAAS,QAAQ,OAAO,KAAK,MAAM,OAAO,CAAC,CAAC,IAC/D,MAAM,QACN,MAAM;AACZ,QAAM,WAAW,IAAIC,uBAAQ,SAAC,IAAI,MAAM,UAAU;AAClD,QAAM,aAAaC,uBAAAA,2BAA2B,QAAQ,OAAO,YAAY,UAAU,OAAO,mBAAmB,mBAAmB;AAChI,QAAM,UAAU;AAAA,IACZ,MAAM,WAAW,IAAI,UAAQ;AACzB,UAAI;AACJ,aAAQ;AAAA,QACJ,OAAO,KAAK,SAAS,QAAQ,SAAS,SAAS,SAAS,KAAK,eAAe,QAAQ,OAAO,SAAS,KAAK,KAAK;AAAA,QAC9G,MAAM,KAAK;AAAA,QACX,aAAa,KAAK;AAAA,QAClB,cAAc,KAAK;AAAA,QACnB,mBAAmB,KAAK;AAAA,MACxC;AAAA,IACA,CAAS;AAAA,IACD,MAAM,EAAE,MAAM,IAAI,MAAM,IAAI,WAAY;AAAA,IACxC,IAAI,EAAE,MAAM,IAAI,MAAM,IAAI,MAAM,IAAK;AAAA,EAC7C;AACI,OAAK,YAAY,QAAQ,YAAY,SAAS,SAAS,QAAQ,SAAS,QAAQ,KAAK,SAAS,GAAG;AAC7F,YAAQ,OAAOF,sBAAW,IAAI,QAAQ,KAAK,MAAM,QAAQ,KAAK,EAAE;AAChE,YAAQ,KAAKA,sBAAW,IAAI,QAAQ,GAAG,MAAM,QAAQ,GAAG,EAAE;AAC1DA,eAAU,WAAC,OAAO,QAAQ,iBAAiB,QAAQ,SAAS,KAAK;AAAA,EACpE;AACD,SAAO;AACX,CAAC;"}