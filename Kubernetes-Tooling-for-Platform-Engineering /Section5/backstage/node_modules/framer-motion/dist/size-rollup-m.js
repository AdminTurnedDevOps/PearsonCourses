import*as t from"react";import r,{createContext as n,useContext as e,useLayoutEffect as o,useEffect as a,useState as i,useRef as s,useCallback as u,useMemo as l,forwardRef as c,createElement as f}from"react";var d=function(t,r){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])})(t,r)};var p=function(){return(p=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)};function v(t,r){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.indexOf(e)<0&&(n[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)r.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(n[e[o]]=t[e[o]])}return n}var m=("undefined"==typeof process||process.env,"production"),y=function(t){return{isEnabled:function(r){return t.some((function(t){return!!r[t]}))}}},g={measureLayout:y(["layout","layoutId","drag"]),animation:y(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:y(["exit"]),drag:y(["drag","dragControls"]),focus:y(["whileFocus"]),hover:y(["whileHover","onHoverStart","onHoverEnd"]),tap:y(["whileTap","onTap","onTapStart","onTapCancel"]),pan:y(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:y(["whileInView","onViewportEnter","onViewportLeave"])};var h=n({strict:!1}),w=Object.keys(g),b=w.length;var S=n({transformPagePoint:function(t){return t},isStatic:!1,reducedMotion:"never"}),O=n({});var x=n(null),j="undefined"!=typeof document,E=j?o:a,P={current:null},C=!1;function T(){return!C&&function(){if(C=!0,j)if(window.matchMedia){var t=window.matchMedia("(prefers-reduced-motion)"),r=function(){return P.current=t.matches};t.addListener(r),r()}else P.current=!1}(),function(t,r){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,o,a=n.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(e=a.next()).done;)i.push(e.value)}catch(t){o={error:t}}finally{try{e&&!e.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}(i(P.current),1)[0]}function V(t,r,n,o){var i,u,l=e(h),c=e(O).visualElement,f=e(x),d=(i=T(),"never"!==(u=e(S).reducedMotion)&&("always"===u||i)),p=s(void 0);o||(o=l.renderer),!p.current&&o&&(p.current=o(t,{visualState:r,parent:c,props:n,presenceId:null==f?void 0:f.id,blockInitialAnimation:!1===(null==f?void 0:f.initial),shouldReduceMotion:d}));var v=p.current;return E((function(){null==v||v.syncRender()})),a((function(){var t;null===(t=null==v?void 0:v.animationState)||void 0===t||t.animateChanges()})),E((function(){return function(){return null==v?void 0:v.notifyUnmount()}}),[]),v}function L(t){return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function k(t){return"string"==typeof t||function(t){return Array.isArray(t)}(t)}function A(t){var r;return"function"==typeof(null===(r=t.animate)||void 0===r?void 0:r.start)||k(t.initial)||k(t.animate)||k(t.whileHover)||k(t.whileDrag)||k(t.whileTap)||k(t.whileFocus)||k(t.exit)}function M(t){var r=function(t,r){if(A(t)){var n=t.initial,e=t.animate;return{initial:!1===n||k(n)?n:void 0,animate:k(e)?e:void 0}}return!1!==t.inherit?r:{}}(t,e(O)),n=r.initial,o=r.animate;return l((function(){return{initial:n,animate:o}}),[R(n),R(o)])}function R(t){return Array.isArray(t)?t.join(" "):t}function B(t){var r=s(null);return null===r.current&&(r.current=t()),r.current}var D=!1,X=1;var Y=n({}),H=n({});var I=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}d(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(r,t),r.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},r.prototype.componentDidUpdate=function(){},r.prototype.updateProps=function(){var t=this.props,r=t.visualElement,n=t.props;r&&r.setProps(n)},r.prototype.render=function(){return this.props.children},r}(r.Component);function W(r){var n=r.preloadedFeatures,o=r.createVisualElement,a=r.projectionNodeConstructor,i=r.useRender,s=r.useVisualState,l=r.Component;return n&&function(t){for(var r in t)null!==t[r]&&("projectionNodeConstructor"===r?g.projectionNodeConstructor=t[r]:g[r].Component=t[r])}(n),c((function(r,c){var f=function(t){var r,n=t.layoutId,o=null===(r=e(Y))||void 0===r?void 0:r.id;return o&&void 0!==n?o+"-"+n:n}(r);r=p(p({},r),{layoutId:f});var d=e(S),v=null,y=M(r),x=d.isStatic?void 0:B((function(){if(D)return X++})),E=s(r,d.isStatic);return!d.isStatic&&j&&(y.visualElement=V(l,E,p(p({},d),r),o),function(t,r,n,o){var a,i=r.layoutId,s=r.layout,u=r.drag,l=r.dragConstraints,c=r.layoutScroll,f=e(H);o&&n&&!(null==n?void 0:n.projection)&&(n.projection=new o(t,n.getLatestValues(),null===(a=n.parent)||void 0===a?void 0:a.projection),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:Boolean(u)||l&&L(l),visualElement:n,scheduleRender:function(){return n.scheduleRender()},animationType:"string"==typeof s?s:"both",initialPromotionConfig:f,layoutScroll:c}))}(x,r,y.visualElement,a||g.projectionNodeConstructor),v=function(r,n,o){var a=[],i=e(h);if(!n)return null;"production"!==m&&o&&i.strict;for(var s=0;s<b;s++){var u=w[s],l=g[u],c=l.isEnabled,f=l.Component;c(r)&&f&&a.push(t.createElement(f,p({key:u},r,{visualElement:n})))}return a}(r,y.visualElement,n)),t.createElement(I,{visualElement:y.visualElement,props:p(p({},d),r)},v,t.createElement(O.Provider,{value:y},i(l,r,x,function(t,r,n){return u((function(e){var o;e&&(null===(o=t.mount)||void 0===o||o.call(t,e)),r&&(e?r.mount(e):r.unmount()),n&&("function"==typeof n?n(e):L(n)&&(n.current=e))}),[r])}(E,y.visualElement,c),E,d.isStatic,y.visualElement)))}))}var F=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function Z(t){return"string"==typeof t&&!t.includes("-")&&!!(F.indexOf(t)>-1||/[A-Z]/.test(t))}var _={},z=["","X","Y","Z"],U=["transformPerspective","x","y","z"];function N(t,r){return U.indexOf(t)-U.indexOf(r)}["translate","scale","rotate","skew"].forEach((function(t){return z.forEach((function(r){return U.push(t+r)}))}));var K=new Set(U);function $(t){return K.has(t)}var q=new Set(["originX","originY","originZ"]);function G(t){return q.has(t)}function J(t,r){var n=r.layout,e=r.layoutId;return $(t)||G(t)||(n||void 0!==e)&&(!!_[t]||"opacity"===t)}var Q=function(t){return Boolean(null!==t&&"object"==typeof t&&t.getVelocity)},tt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function rt(t){return t.startsWith("--")}var nt=function(t,r){return r&&"number"==typeof t?r.transform(t):t};const et={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},ot=Object.assign(Object.assign({},et),{transform:(at=0,it=1,t=>Math.max(Math.min(t,it),at))});var at,it;const st=Object.assign(Object.assign({},et),{default:1}),ut=t=>({test:r=>function(t){return"string"==typeof t}(r)&&r.endsWith(t)&&1===r.split(" ").length,parse:parseFloat,transform:r=>`${r}${t}`}),lt=ut("deg"),ct=ut("%"),ft=ut("px"),dt=Object.assign(Object.assign({},ct),{parse:t=>ct.parse(t)/100,transform:t=>ct.transform(100*t)});var pt=p(p({},et),{transform:Math.round}),vt={borderWidth:ft,borderTopWidth:ft,borderRightWidth:ft,borderBottomWidth:ft,borderLeftWidth:ft,borderRadius:ft,radius:ft,borderTopLeftRadius:ft,borderTopRightRadius:ft,borderBottomRightRadius:ft,borderBottomLeftRadius:ft,width:ft,maxWidth:ft,height:ft,maxHeight:ft,size:ft,top:ft,right:ft,bottom:ft,left:ft,padding:ft,paddingTop:ft,paddingRight:ft,paddingBottom:ft,paddingLeft:ft,margin:ft,marginTop:ft,marginRight:ft,marginBottom:ft,marginLeft:ft,rotate:lt,rotateX:lt,rotateY:lt,rotateZ:lt,scale:st,scaleX:st,scaleY:st,scaleZ:st,skew:lt,skewX:lt,skewY:lt,distance:ft,translateX:ft,translateY:ft,translateZ:ft,x:ft,y:ft,z:ft,perspective:ft,transformPerspective:ft,opacity:ot,originX:dt,originY:dt,originZ:ft,zIndex:pt,fillOpacity:ot,strokeOpacity:ot,numOctaves:pt};function mt(t,r,n,e){var o,a=t.style,i=t.vars,s=t.transform,u=t.transformKeys,l=t.transformOrigin;u.length=0;var c=!1,f=!1,d=!0;for(var p in r){var v=r[p];if(rt(p))i[p]=v;else{var m=vt[p],y=nt(v,m);if($(p)){if(c=!0,s[p]=y,u.push(p),!d)continue;v!==(null!==(o=m.default)&&void 0!==o?o:0)&&(d=!1)}else G(p)?(l[p]=y,f=!0):a[p]=y}}c?a.transform=function(t,r,n,e){var o=t.transform,a=t.transformKeys,i=r.enableHardwareAcceleration,s=void 0===i||i,u=r.allowTransformNone,l=void 0===u||u,c="";a.sort(N);for(var f=!1,d=a.length,p=0;p<d;p++){var v=a[p];c+="".concat(tt[v]||v,"(").concat(o[v],") "),"z"===v&&(f=!0)}return!f&&s?c+="translateZ(0)":c=c.trim(),e?c=e(o,n?"":c):l&&n&&(c="none"),c}(t,n,d,e):e?a.transform=e({},""):!r.transform&&a.transform&&(a.transform="none"),f&&(a.transformOrigin=function(t){var r=t.originX,n=void 0===r?"50%":r,e=t.originY,o=void 0===e?"50%":e,a=t.originZ,i=void 0===a?0:a;return"".concat(n," ").concat(o," ").concat(i)}(l))}var yt=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function gt(t,r,n){for(var e in r)Q(r[e])||J(e,n)||(t[e]=r[e])}function ht(t,r,n){var e={};return gt(e,t.style||{},t),Object.assign(e,function(t,r,n){var e=t.transformTemplate;return l((function(){var t={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};mt(t,r,{enableHardwareAcceleration:!n},e);var o=t.style;return p(p({},t.vars),o)}),[r])}(t,r,n)),t.transformValues&&(e=t.transformValues(e)),e}function wt(t,r,n){var e={},o=ht(t,r,n);return Boolean(t.drag)&&!1!==t.dragListener&&(e.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===t.drag?"none":"pan-".concat("x"===t.drag?"y":"x")),e.style=o,e}var bt=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function St(t){return bt.has(t)}var Ot,xt=function(t){return!St(t)};try{(Ot=require("@emotion/is-prop-valid").default)&&(xt=function(t){return t.startsWith("on")?!St(t):Ot(t)})}catch(t){}function jt(t,r,n){return"string"==typeof t?t:ft.transform(r+n*t)}var Et={offset:"stroke-dashoffset",array:"stroke-dasharray"},Pt={offset:"strokeDashoffset",array:"strokeDasharray"};function Ct(t,r,n,e){var o=r.attrX,a=r.attrY,i=r.originX,s=r.originY,u=r.pathLength,l=r.pathSpacing,c=void 0===l?1:l,f=r.pathOffset,d=void 0===f?0:f;mt(t,v(r,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,e),t.attrs=t.style,t.style={};var p=t.attrs,m=t.style,y=t.dimensions;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(void 0!==i||void 0!==s||m.transform)&&(m.transformOrigin=function(t,r,n){var e=jt(r,t.x,t.width),o=jt(n,t.y,t.height);return"".concat(e," ").concat(o)}(y,void 0!==i?i:.5,void 0!==s?s:.5)),void 0!==o&&(p.x=o),void 0!==a&&(p.y=a),void 0!==u&&function(t,r,n,e,o){void 0===n&&(n=1),void 0===e&&(e=0),void 0===o&&(o=!0),t.pathLength=1;var a=o?Et:Pt;t[a.offset]=ft.transform(-e);var i=ft.transform(r),s=ft.transform(n);t[a.array]="".concat(i," ").concat(s)}(p,u,c,d,!1)}var Tt=function(){return p(p({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function Vt(t,r){var n=l((function(){var n=Tt();return Ct(n,r,{enableHardwareAcceleration:!1},t.transformTemplate),p(p({},n.attrs),{style:p({},n.style)})}),[r]);if(t.style){var e={};gt(e,t.style,t),n.style=p(p({},e),n.style)}return n}function Lt(t){void 0===t&&(t=!1);return function(r,n,e,o,a,i){var s=a.latestValues,u=(Z(r)?Vt:wt)(n,s,i),l=function(t,r,n){var e={};for(var o in t)(xt(o)||!0===n&&St(o)||!r&&!St(o)||t.draggable&&o.startsWith("onDrag"))&&(e[o]=t[o]);return e}(n,"string"==typeof r,t),c=p(p(p({},l),u),{ref:o});return e&&(c["data-projection-id"]=e),f(r,c)}}var kt=/([a-z])([A-Z])/g;var At=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function Mt(t,r,n,e){for(var o in function(t,r,n,e){var o=r.style,a=r.vars;for(var i in Object.assign(t.style,o,e&&e.getProjectionStyles(n)),a)t.style.setProperty(i,a[i])}(t,r,void 0,e),r.attrs)t.setAttribute(At.has(o)?o:o.replace(kt,"$1-$2").toLowerCase(),r.attrs[o])}function Rt(t){var r=t.style,n={};for(var e in r)(Q(r[e])||J(e,t))&&(n[e]=r[e]);return n}function Bt(t){var r,n=Q(t)?t.get():t;return r=n,Boolean(r&&"object"==typeof r&&r.mix&&r.toValue)?n.toValue():n}function Dt(t,r,n,e){var o=t.scrapeMotionValuesFromProps,a=t.createRenderState,i=t.onMount,s={latestValues:Yt(r,n,e,o),renderState:a()};return i&&(s.mount=function(t){return i(r,t,s)}),s}var Xt=function(t){return function(r,n){var o=e(O),a=e(x);return n?Dt(t,r,o,a):B((function(){return Dt(t,r,o,a)}))}};function Yt(t,r,n,e){var o={},a=!1===(null==n?void 0:n.initial),i=e(t);for(var s in i)o[s]=Bt(i[s]);var u=t.initial,l=t.animate,c=A(t),f=function(t){return Boolean(A(t)||t.variants)}(t);r&&f&&!c&&!1!==t.inherit&&(null!=u||(u=r.initial),null!=l||(l=r.animate));var d,p=a||!1===u,m=p?l:u;!m||"boolean"==typeof m||"object"==typeof(d=m)&&"function"==typeof d.start||(Array.isArray(m)?m:[m]).forEach((function(r){var n=function(t,r,n,e,o){var a;return void 0===e&&(e={}),void 0===o&&(o={}),"function"==typeof r&&(r=r(null!=n?n:t.custom,e,o)),"string"==typeof r&&(r=null===(a=t.variants)||void 0===a?void 0:a[r]),"function"==typeof r&&(r=r(null!=n?n:t.custom,e,o)),r}(t,r);if(n){var e=n.transitionEnd;n.transition;var a=v(n,["transitionEnd","transition"]);for(var i in a){var s=a[i];if(Array.isArray(s))s=s[p?s.length-1:0];null!==s&&(o[i]=s)}for(var i in e)o[i]=e[i]}}));return o}var Ht={useVisualState:Xt({scrapeMotionValuesFromProps:function(t){var r=Rt(t);for(var n in t){if(Q(t[n]))r["x"===n||"y"===n?"attr"+n.toUpperCase():n]=t[n]}return r},createRenderState:Tt,onMount:function(t,r,n){var e=n.renderState,o=n.latestValues;try{e.dimensions="function"==typeof r.getBBox?r.getBBox():r.getBoundingClientRect()}catch(t){e.dimensions={x:0,y:0,width:0,height:0}}Ct(e,o,{enableHardwareAcceleration:!1},t.transformTemplate),Mt(r,e)}})},It={useVisualState:Xt({scrapeMotionValuesFromProps:Rt,createRenderState:yt})};var Wt=function(t){function r(r,n){return void 0===n&&(n={}),W(t(r,n))}if("undefined"==typeof Proxy)return r;var n=new Map;return new Proxy(r,{get:function(t,e){return n.has(e)||n.set(e,r(e)),n.get(e)}})}((function(t,r,n,e,o){var a=r.forwardMotionProps,i=void 0!==a&&a,s=Z(t)?Ht:It;return p(p({},s),{preloadedFeatures:n,useRender:Lt(i),createVisualElement:e,projectionNodeConstructor:o,Component:t})}));export{Wt as m};
